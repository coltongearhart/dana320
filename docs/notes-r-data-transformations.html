<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.376">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>DANA 320 –Data Visualization - 30&nbsp; Notes – Data Transformations</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./hw-r-data-transformations.html" rel="next">
<link href="./hw-r-visualizations.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./module-r.html">R</a></li><li class="breadcrumb-item"><a href="./notes-r-data-transformations.html"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Notes -- Data Transformations</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./module-r.html">R</a></li><li class="breadcrumb-item"><a href="./notes-r-data-transformations.html"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Notes -- Data Transformations</span></a></li></ol></nav><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">
<span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Notes – Data Transformations</span>
</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">DANA 320 –<br>Data Visualization</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./module-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-meet-your-instructor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Meet Your Instructor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Syllabus</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-how-to-navigate-this-course.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">How to Navigate this Course</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-to-data-viz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introduction to Data Visualization</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./module-readings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Readings</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quizzes-readings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Reading Check Quizzes</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./module-excel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Excel</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./install-excel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Install Excel</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-to-excel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Introduction to Excel</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-excel-basic-charts-in-excel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Notes – Basic Charts in Excel</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-excel-more-charts-in-excel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Lab – More Charts in Excel</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-excel-plots-for-analyses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">HW – Plots for Analyses</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-excel-reports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Notes – Reports</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-excel-pivot-tables-and-combining-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Lab – Pivot Tables and Combining Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-excel-creating-more-engaging-reports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">HW – Creating More Engaging Reports</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-excel-dynamic-charts-and-dashboards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Notes – Dynamic Charts and Dashboards</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-excel-dynamic-charts-and-dashboards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Lab – Dynamic Charts and Dashboards</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-excel-dynamic-charts-and-dashboards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">HW – Dynamic Charts and Dashboards</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./module-tableau.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tableau</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./install-tableau-and-tableau-prep-builder.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Install Excel</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-to-tableau.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Introduction to Tableau</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-tableau-working-with-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Notes – Working with Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-tableau-working-with-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">HW – Working with Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-tableau-parameters.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Notes – Parameters</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-tableau-parameters.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">HW – Parameters</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-tableau-dashboards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Notes – Dashboards</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-tableau-dashboards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">HW – Dashboards</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./module-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./install-r-and-rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Install R and RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-to-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Introduction to R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-to-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Introduction to Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-r-visualizations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Notes – Visualizations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-r-visualizations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">HW - Visualizations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-r-data-transformations.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Notes – Data Transformations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-r-data-transformations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">HW - Data Transformations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-r-reshaping-and-combining-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Notes – Reshaping and Combining Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-r-data-cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Lab - Data Cleaning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-r-data-manipulations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">HW - Data Manipulations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-r-interactive-plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Notes – Interactive Plots</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-r-interactive-plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">HW – Interactive Plots</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><span class="header-section-number">30.1</span> Overview</a>
  <ul class="collapse">
<li><a href="#materials" id="toc-materials" class="nav-link" data-scroll-target="#materials"><span class="header-section-number">30.1.1</span> Materials</a></li>
  <li><a href="#this-section" id="toc-this-section" class="nav-link" data-scroll-target="#this-section"><span class="header-section-number">30.1.2</span> This section</a></li>
  <li><a href="#readings" id="toc-readings" class="nav-link" data-scroll-target="#readings"><span class="header-section-number">30.1.3</span> Readings</a></li>
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites"><span class="header-section-number">30.1.4</span> Prerequisites</a></li>
  </ul>
</li>
  <li>
<a href="#basics" id="toc-basics" class="nav-link" data-scroll-target="#basics"><span class="header-section-number">30.2</span> Basics</a>
  <ul class="collapse">
<li><a href="#dplyr" id="toc-dplyr" class="nav-link" data-scroll-target="#dplyr"><span class="header-section-number">30.2.1</span> dplyr</a></li>
  <li><a href="#dataframe-vs-tibble" id="toc-dataframe-vs-tibble" class="nav-link" data-scroll-target="#dataframe-vs-tibble"><span class="header-section-number">30.2.2</span> Dataframe vs Tibble</a></li>
  <li><a href="#piping" id="toc-piping" class="nav-link" data-scroll-target="#piping"><span class="header-section-number">30.2.3</span> Piping</a></li>
  </ul>
</li>
  <li>
<a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example"><span class="header-section-number">30.3</span> Example</a>
  <ul class="collapse">
<li><a href="#dataset" id="toc-dataset" class="nav-link" data-scroll-target="#dataset"><span class="header-section-number">30.3.1</span> Dataset</a></li>
  <li><a href="#goal" id="toc-goal" class="nav-link" data-scroll-target="#goal"><span class="header-section-number">30.3.2</span> Goal</a></li>
  </ul>
</li>
  <li>
<a href="#selecting-columns" id="toc-selecting-columns" class="nav-link" data-scroll-target="#selecting-columns"><span class="header-section-number">30.4</span> Selecting columns</a>
  <ul class="collapse">
<li><a href="#select-basics" id="toc-select-basics" class="nav-link" data-scroll-target="#select-basics"><span class="header-section-number">30.4.1</span> select() basics</a></li>
  <li><a href="#select-advanced" id="toc-select-advanced" class="nav-link" data-scroll-target="#select-advanced"><span class="header-section-number">30.4.2</span> select() advanced</a></li>
  <li><a href="#sec-select-ex" id="toc-sec-select-ex" class="nav-link" data-scroll-target="#sec-select-ex"><span class="header-section-number">30.4.3</span> Exercise</a></li>
  </ul>
</li>
  <li>
<a href="#renaming-columns" id="toc-renaming-columns" class="nav-link" data-scroll-target="#renaming-columns"><span class="header-section-number">30.5</span> Renaming columns</a>
  <ul class="collapse">
<li><a href="#rename-basics" id="toc-rename-basics" class="nav-link" data-scroll-target="#rename-basics"><span class="header-section-number">30.5.1</span> rename() basics</a></li>
  <li><a href="#sec-rename-ex" id="toc-sec-rename-ex" class="nav-link" data-scroll-target="#sec-rename-ex"><span class="header-section-number">30.5.2</span> Exercise</a></li>
  </ul>
</li>
  <li>
<a href="#relocating-columns" id="toc-relocating-columns" class="nav-link" data-scroll-target="#relocating-columns"><span class="header-section-number">30.6</span> Relocating columns</a>
  <ul class="collapse">
<li><a href="#relocate-basics" id="toc-relocate-basics" class="nav-link" data-scroll-target="#relocate-basics"><span class="header-section-number">30.6.1</span> relocate() basics</a></li>
  <li><a href="#sec-relocate-ex" id="toc-sec-relocate-ex" class="nav-link" data-scroll-target="#sec-relocate-ex"><span class="header-section-number">30.6.2</span> Exercise</a></li>
  </ul>
</li>
  <li>
<a href="#filtering-rows" id="toc-filtering-rows" class="nav-link" data-scroll-target="#filtering-rows"><span class="header-section-number">30.7</span> Filtering rows</a>
  <ul class="collapse">
<li><a href="#filter-basics" id="toc-filter-basics" class="nav-link" data-scroll-target="#filter-basics"><span class="header-section-number">30.7.1</span> filter() basics</a></li>
  <li><a href="#sec-filter-ex" id="toc-sec-filter-ex" class="nav-link" data-scroll-target="#sec-filter-ex"><span class="header-section-number">30.7.2</span> Exercise</a></li>
  </ul>
</li>
  <li>
<a href="#ordering-rows" id="toc-ordering-rows" class="nav-link" data-scroll-target="#ordering-rows"><span class="header-section-number">30.8</span> Ordering rows</a>
  <ul class="collapse">
<li><a href="#arrange-basics" id="toc-arrange-basics" class="nav-link" data-scroll-target="#arrange-basics"><span class="header-section-number">30.8.1</span> arrange() basics</a></li>
  <li><a href="#sec-arrange-ex" id="toc-sec-arrange-ex" class="nav-link" data-scroll-target="#sec-arrange-ex"><span class="header-section-number">30.8.2</span> Exercise</a></li>
  </ul>
</li>
  <li>
<a href="#finding-unique-rows" id="toc-finding-unique-rows" class="nav-link" data-scroll-target="#finding-unique-rows"><span class="header-section-number">30.9</span> Finding unique rows</a>
  <ul class="collapse">
<li><a href="#distinct-basics" id="toc-distinct-basics" class="nav-link" data-scroll-target="#distinct-basics"><span class="header-section-number">30.9.1</span> distinct() basics</a></li>
  <li><a href="#sec-distinct-ex" id="toc-sec-distinct-ex" class="nav-link" data-scroll-target="#sec-distinct-ex"><span class="header-section-number">30.9.2</span> Exercise</a></li>
  </ul>
</li>
  <li>
<a href="#creating-editing-columns" id="toc-creating-editing-columns" class="nav-link" data-scroll-target="#creating-editing-columns"><span class="header-section-number">30.10</span> Creating / editing columns</a>
  <ul class="collapse">
<li><a href="#mutate-basics" id="toc-mutate-basics" class="nav-link" data-scroll-target="#mutate-basics"><span class="header-section-number">30.10.1</span> mutate() basics</a></li>
  <li><a href="#mutate-advanced" id="toc-mutate-advanced" class="nav-link" data-scroll-target="#mutate-advanced"><span class="header-section-number">30.10.2</span> mutate() advanced</a></li>
  <li><a href="#sec-mutate-ex" id="toc-sec-mutate-ex" class="nav-link" data-scroll-target="#sec-mutate-ex"><span class="header-section-number">30.10.3</span> Exercise</a></li>
  </ul>
</li>
  <li>
<a href="#summarize-columns" id="toc-summarize-columns" class="nav-link" data-scroll-target="#summarize-columns"><span class="header-section-number">30.11</span> Summarize columns</a>
  <ul class="collapse">
<li><a href="#summarize-basics" id="toc-summarize-basics" class="nav-link" data-scroll-target="#summarize-basics"><span class="header-section-number">30.11.1</span> summarize() basics</a></li>
  <li><a href="#summarize-advanced" id="toc-summarize-advanced" class="nav-link" data-scroll-target="#summarize-advanced"><span class="header-section-number">30.11.2</span> summarize() advanced</a></li>
  <li><a href="#sec-summarize-ex" id="toc-sec-summarize-ex" class="nav-link" data-scroll-target="#sec-summarize-ex"><span class="header-section-number">30.11.3</span> Exercise</a></li>
  </ul>
</li>
  <li>
<a href="#groups" id="toc-groups" class="nav-link" data-scroll-target="#groups"><span class="header-section-number">30.12</span> Groups</a>
  <ul class="collapse">
<li><a href="#group_by-basics" id="toc-group_by-basics" class="nav-link" data-scroll-target="#group_by-basics"><span class="header-section-number">30.12.1</span> group_by() basics</a></li>
  <li><a href="#summarize-grouped-data" id="toc-summarize-grouped-data" class="nav-link" data-scroll-target="#summarize-grouped-data"><span class="header-section-number">30.12.2</span> Summarize grouped data</a></li>
  <li><a href="#sec-groups-ex" id="toc-sec-groups-ex" class="nav-link" data-scroll-target="#sec-groups-ex"><span class="header-section-number">30.12.3</span> Exercise</a></li>
  <li><a href="#ungroup-basics" id="toc-ungroup-basics" class="nav-link" data-scroll-target="#ungroup-basics"><span class="header-section-number">30.12.4</span> ungroup() basics</a></li>
  <li><a href="#by-argument" id="toc-by-argument" class="nav-link" data-scroll-target="#by-argument"><span class="header-section-number">30.12.5</span> .by argument</a></li>
  <li><a href="#group_by-with-other-functions" id="toc-group_by-with-other-functions" class="nav-link" data-scroll-target="#group_by-with-other-functions"><span class="header-section-number">30.12.6</span> group_by() with other functions</a></li>
  <li><a href="#slice-and-slice_" id="toc-slice-and-slice_" class="nav-link" data-scroll-target="#slice-and-slice_"><span class="header-section-number">30.12.7</span> slice() and slice_*()</a></li>
  <li><a href="#sec-groups-ex2" id="toc-sec-groups-ex2" class="nav-link" data-scroll-target="#sec-groups-ex2"><span class="header-section-number">30.12.8</span> Exercise</a></li>
  </ul>
</li>
  <li>
<a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="header-section-number">30.13</span> Application</a>
  <ul class="collapse">
<li><a href="#recreating" id="toc-recreating" class="nav-link" data-scroll-target="#recreating"><span class="header-section-number">30.13.1</span> Recreating</a></li>
  <li><a href="#sec-application-ex" id="toc-sec-application-ex" class="nav-link" data-scroll-target="#sec-application-ex"><span class="header-section-number">30.13.2</span> Exercise</a></li>
  </ul>
</li>
  <li><a href="#exercise-solutions" id="toc-exercise-solutions" class="nav-link" data-scroll-target="#exercise-solutions"><span class="header-section-number">30.14</span> Exercise solutions</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content"><section id="overview" class="level2" data-number="30.1"><h2 data-number="30.1" class="anchored" data-anchor-id="overview">
<span class="header-section-number">30.1</span> Overview</h2>
<section id="materials" class="level3" data-number="30.1.1"><h3 data-number="30.1.1" class="anchored" data-anchor-id="materials">
<span class="header-section-number">30.1.1</span> Materials</h3>
<ul>
<li><p>Attached are all of the supplemental materials to this content! Feel free to check them out :)</p></li>
<li>
<p>Click the image below or follow the link to access the interactive tutorial that corresponds to this content: <a href="https://coltongearhart.shinyapps.io/data-transformations/" class="uri">https://coltongearhart.shinyapps.io/data-transformations/</a></p>
<p><a href="https://coltongearhart.shinyapps.io/data-transformations/"><img src="images/tutorial-data-transformations.png" class="img-fluid" width="1000"></a></p>
</li>
<li><p>Here are the videos that go through the tutorial:</p></li>
</ul>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/le9tW9TYVTo" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/8jgrIywIcGE" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/oOSp1Smrhsc" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<ul>
<li>And finally here is the starter file mentioned: <a href="https://github.com/coltongearhart/dana320/blob/main/tutorials/data-transformations/data-transformations-STARTER.qmd">data-transformations-STARTER.qmd</a>
</li>
</ul></section><section id="this-section" class="level3" data-number="30.1.2"><h3 data-number="30.1.2" class="anchored" data-anchor-id="this-section">
<span class="header-section-number">30.1.2</span> This section</h3>
<ul>
<li><p>In the previous tutorial, we learned how to create many different visuals to display one or several quantitative and/or qualitative variables.</p></li>
<li><p>However, creating visuals is one of the later steps in the process of data visualization.</p></li>
</ul>
<div id="fig-539a35d47e664c97a50115a146a7f1bd-1" class="quarto-figure quarto-figure-center anchored" width="50%">
<figure class="quarto-float quarto-float-fig figure"><div>
<img src="tutorials/data-transformations/images/data-science-project-workflow.png" id="fig-539a35d47e664c97a50115a146a7f1bd-1" class="img-fluid figure-img" style="width:50.0%">
</div>
</figure>
</div>
<ul>
<li><p>Nearly always we have to work with the data at least a little bit to get it into the form we need for the visuals we plan to make.</p></li>
<li><p>Now in this section, we are going to learn the different data transformation methods provided by another core package of the <strong>tidyverse</strong> called <strong>dplyr</strong>. Specifically, we will learn how to subset data (both rows and columns), create new columns and summarize data.</p></li>
</ul></section><section id="readings" class="level3" data-number="30.1.3"><h3 data-number="30.1.3" class="anchored" data-anchor-id="readings">
<span class="header-section-number">30.1.3</span> Readings</h3>
<ul>
<li><p>This section covers content from <a href="https://r4ds.hadley.nz/data-transform">Chapter 4 - Data Transformation</a> of <em>R for Data Science (2e)</em>.</p></li>
<li><p><a href="https://dplyr.tidyverse.org/index.html">dplyr help documentation</a> contains everything you need to know about <strong>dplyr</strong>, including a very helpful <a href="https://github.com/rstudio/cheatsheets/blob/main/data-transformation.pdf">cheatsheet</a>.</p></li>
</ul></section><section id="prerequisites" class="level3" data-number="30.1.4"><h3 data-number="30.1.4" class="anchored" data-anchor-id="prerequisites">
<span class="header-section-number">30.1.4</span> Prerequisites</h3>
<ul>
<li>
<p>In addition to the <strong>tidyverse</strong> which includes <strong>dyplr</strong>, we need to load (and install if necessary) the following package:</p>
<ul>
<li>
<code>Lahman</code> → This is the package our example dataset comes from.</li>
</ul>
</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://CRAN.R-project.org/package=Lahman">Lahman</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="basics" class="level2" data-number="30.2"><h2 data-number="30.2" class="anchored" data-anchor-id="basics">
<span class="header-section-number">30.2</span> Basics</h2>
<section id="dplyr" class="level3" data-number="30.2.1"><h3 data-number="30.2.1" class="anchored" data-anchor-id="dplyr">
<span class="header-section-number">30.2.1</span> dplyr</h3>
<ul>
<li><p>Throughout this section we will demonstrate several <strong>dplyr</strong> functions that perform the big picture data transformations tasks like filtering, organizing columns, creating new columns, etc.</p></li>
<li>
<p>While each of these has their particulars, all of them have the same general setup in terms of their inputs and output:</p>
<ul>
<li><p>The first argument is always a data frame, which is handy when using pipes (see next mini topic).</p></li>
<li><p>The subsequent arguments typically describe which columns to operate on, using the variable names (without quotes).</p></li>
<li><p>The output is always a new data frame (or tibble).</p></li>
</ul>
</li>
</ul></section><section id="dataframe-vs-tibble" class="level3" data-number="30.2.2"><h3 data-number="30.2.2" class="anchored" data-anchor-id="dataframe-vs-tibble">
<span class="header-section-number">30.2.2</span> Dataframe vs Tibble</h3>
<ul>
<li><p>A <strong>dataframe</strong> is a data type in R that we have been working with (think of it as a table in Excel, rows and columns).</p></li>
<li><p>All of the functions we will use / have used work perfectly fine with this data type.</p></li>
<li><p>However, there is special type of data frame used by the tidyverse known as a <strong>tibble</strong>. They are essentially equivalent, but tibbles is that they much nicer printing features than regular dataframes.</p></li>
<li><p>Try it out to see for yourself. The <code>iris</code> dataset we have used is a dataframe, while <code>diamonds</code> is a tibble. Run the following lines of code in the console and see the difference in how each prints:</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">iris</span></span>
<span><span class="va">diamonds</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>The printed tibble gives similar results as <code><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse()</a></code>. So with this new type, we can just call the data object directly.</p></li>
<li>
<p>In both cases, we are shown a nicely formatted output that includes the dimensions (# of rows x # of cols) and the first few rows / columns with an indication of the column type, which is important for knowing which type of operations we can do on them:</p>
<ul>
<li><p><code>&lt;int&gt;</code> is short for integer;</p></li>
<li><p><code>&lt;dbl&gt;</code> is short for double (aka real numbers);</p></li>
<li><p><code>&lt;chr&gt;</code> for character (aka strings);</p></li>
<li><p><code>&lt;dttm&gt;</code> for date-time.</p></li>
</ul>
</li>
</ul></section><section id="piping" class="level3" data-number="30.2.3"><h3 data-number="30.2.3" class="anchored" data-anchor-id="piping">
<span class="header-section-number">30.2.3</span> Piping</h3>
<ul>
<li><p>Often, we want to perform multiple functions, i.e.&nbsp;take an object, do something to it, then do something to the output.</p></li>
<li><p>One way to do this is with <em>nesting</em> functions → <code>f(x)</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span>, mean <span class="op">=</span> <span class="fl">10</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html">scale</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<ul>
<li>
<p>The <strong>pipe</strong> is another (equivalent) way to combine functions that is more readable. We can think of this as <em>chaining</em> functions together.</p>
<ul>
<li><p>Piping → <code>x %&gt;% f</code>, read as “and then”.</p></li>
<li><p>Takes the object / result on the left and uses (passes) it as the <em>first</em> argument of the function on the right.</p></li>
</ul>
</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span>, mean <span class="op">=</span> <span class="fl">10</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">scale</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">sd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<ul>
<li>There is a base R version of the pipe as well <code>|&gt;</code>, but we will continue to use <code>%&gt;%</code> (it has some better functionality that we won’t dive into).</li>
</ul></section></section><section id="example" class="level2" data-number="30.3"><h2 data-number="30.3" class="anchored" data-anchor-id="example">
<span class="header-section-number">30.3</span> Example</h2>
<section id="dataset" class="level3" data-number="30.3.1"><h3 data-number="30.3.1" class="anchored" data-anchor-id="dataset">
<span class="header-section-number">30.3.1</span> Dataset</h3>
<ul>
<li><p>We are going to use <code><a href="https://rdrr.io/pkg/Lahman/man/Batting.html">Lahman::Batting</a></code> dataset, which contains Major League Baseball (MLB) batting statistics dating back to 1871.</p></li>
<li><p>Here is a preview of the dataset.</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"1","4":"TRO","5":"NA","6":"1","7":"4","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","_rn_":"1"},{"1":"addybo01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"118","8":"30","9":"32","10":"6","11":"0","12":"0","13":"13","14":"8","15":"1","16":"4","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","_rn_":"2"},{"1":"allisar01","2":"1871","3":"1","4":"CL1","5":"NA","6":"29","7":"137","8":"28","9":"40","10":"4","11":"5","12":"0","13":"19","14":"3","15":"1","16":"2","17":"5","18":"NA","19":"NA","20":"NA","21":"NA","22":"1","_rn_":"3"},{"1":"allisdo01","2":"1871","3":"1","4":"WS3","5":"NA","6":"27","7":"133","8":"28","9":"44","10":"10","11":"2","12":"2","13":"27","14":"1","15":"1","16":"0","17":"2","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","_rn_":"4"},{"1":"ansonca01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"120","8":"29","9":"39","10":"11","11":"3","12":"0","13":"16","14":"6","15":"2","16":"2","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","_rn_":"5"},{"1":"armstbo01","2":"1871","3":"1","4":"FW1","5":"NA","6":"12","7":"49","8":"9","9":"11","10":"2","11":"1","12":"0","13":"5","14":"0","15":"1","16":"0","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li>Because we will be checking the results of data transformations often in this section, let’s convert this to a new dataset that is a tibble with <code><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble()</a></code>. Then we can confirm the data type with <code><a href="https://rdrr.io/r/base/class.html">class()</a></code>.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="va">Batting</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">Batting</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">batting</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<ul>
<li>Next to simplify things later, lets run this line of code. We will learn what this does shortly.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op">&lt;-</span> <span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">CS</span><span class="op">:</span><span class="va">GIDP</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="goal" class="level3" data-number="30.3.2"><h3 data-number="30.3.2" class="anchored" data-anchor-id="goal">
<span class="header-section-number">30.3.2</span> Goal</h3>
<ul>
<li><p>Suppose we are interested in the relationship between several of the batting statistics such as home runs (HR), runs batted in (RBI), etc. for the best home run hitters.</p></li>
<li><p>The specific questions we can answer depend on what data we have and how it is structured (i.e.&nbsp;what each row represents).</p></li>
<li><p>For example, currently each row represents a player, team and year combination, which means it shows numbers for a <em>single</em> season. So we can’t answer any questions that deal with <em>career</em> statistics based on this setup (season-level vs career-level data).</p></li>
<li><p>One question we could investigate is how many games were needed for the top 100 home run totals in a single season.</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div id="fig-539a35d47e664c97a50115a146a7f1bd-2" class="quarto-figure quarto-figure-center anchored" width="672" data-fig-pos="hold">
<figure class="quarto-float quarto-float-fig figure"><div>
<img src="notes-r-data-transformations_files/figure-html/hr-plot-1.png" id="fig-539a35d47e664c97a50115a146a7f1bd-2" class="img-fluid figure-img" data-fig-pos="hold" width="672">
</div>
</figure>
</div>
</div>
</div>
<ul>
<li><p>Our goal for this section is to learn how to use the functions demonstrated in the next sections to perform all of the data transformations needed to construct the following plots.</p></li>
<li><p>The first one tracks a particular player’s home runs per season throughout the course of his career.</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div id="fig-539a35d47e664c97a50115a146a7f1bd-3" class="quarto-figure quarto-figure-center anchored" width="672" data-fig-pos="hold">
<figure class="quarto-float quarto-float-fig figure"><div>
<img src="notes-r-data-transformations_files/figure-html/griffey-plot-1.png" id="fig-539a35d47e664c97a50115a146a7f1bd-3" class="img-fluid figure-img" data-fig-pos="hold" width="672">
</div>
</figure>
</div>
</div>
</div>
<ul>
<li>The second one plots the number of seasons played and total home runs for the top 500 home run hitters in the history of the MLB and includes information about whether they are still playing.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div id="fig-539a35d47e664c97a50115a146a7f1bd-4" class="quarto-figure quarto-figure-center anchored" width="672" data-fig-pos="hold">
<figure class="quarto-float quarto-float-fig figure"><div>
<img src="notes-r-data-transformations_files/figure-html/best-hr-hitters-plot-1.png" id="fig-539a35d47e664c97a50115a146a7f1bd-4" class="img-fluid figure-img" data-fig-pos="hold" width="672">
</div>
</figure>
</div>
</div>
</div>
</section></section><section id="selecting-columns" class="level2" data-number="30.4"><h2 data-number="30.4" class="anchored" data-anchor-id="selecting-columns">
<span class="header-section-number">30.4</span> Selecting columns</h2>
<section id="select-basics" class="level3" data-number="30.4.1"><h3 data-number="30.4.1" class="anchored" data-anchor-id="select-basics">
<span class="header-section-number">30.4.1</span> select() basics</h3>
<ul>
<li><p>Often there are unneeded columns in dataset. To focus on the columns of interest, we can use <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>.</p></li>
<li><p>There are many ways to specify the columns we want to keep or remove, a few are shown below. First we can get a complete list of the available columns with <code><a href="https://rdrr.io/r/base/colnames.html">colnames()</a></code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">batting</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "playerID" "yearID"   "stint"    "teamID"   "lgID"     "G"       
 [7] "AB"       "R"        "H"        "X2B"      "X3B"      "HR"      
[13] "RBI"      "SB"       "CS"       "BB"       "SO"       "IBB"     
[19] "HBP"      "SH"       "SF"       "GIDP"    </code></pre>
</div>
</div>
<ul>
<li>Explicitly naming columns (and how to use piping) → Good when just need a few columns.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">batting</span>, <span class="va">playerID</span>, <span class="va">yearID</span>, <span class="va">HR</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["HR"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"0"},{"1":"addybo01","2":"1871","3":"0"},{"1":"allisar01","2":"1871","3":"0"},{"1":"allisdo01","2":"1871","3":"2"},{"1":"ansonca01","2":"1871","3":"0"},{"1":"armstbo01","2":"1871","3":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">playerID</span>, <span class="va">yearID</span>, <span class="va">HR</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["HR"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"0"},{"1":"addybo01","2":"1871","3":"0"},{"1":"allisar01","2":"1871","3":"0"},{"1":"allisdo01","2":"1871","3":"2"},{"1":"ansonca01","2":"1871","3":"0"},{"1":"armstbo01","2":"1871","3":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li>Selecting all from a block <code>start_col:end_col</code> → Good shorthand when you know the dataset is organized in blocks of related columns.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">playerID</span><span class="op">:</span><span class="va">AB</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"1","4":"TRO","5":"NA","6":"1","7":"4"},{"1":"addybo01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"118"},{"1":"allisar01","2":"1871","3":"1","4":"CL1","5":"NA","6":"29","7":"137"},{"1":"allisdo01","2":"1871","3":"1","4":"WS3","5":"NA","6":"27","7":"133"},{"1":"ansonca01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"120"},{"1":"armstbo01","2":"1871","3":"1","4":"FW1","5":"NA","6":"12","7":"49"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li>
<p>Select all <em>except</em> certain columns (i.e.&nbsp;remove columns).</p>
<ul>
<li><p>Can remove non-adjacent columns by making a vector of column names with <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>.</p></li>
<li><p>Can also specify column position (#) rather than name.</p></li>
</ul>
</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">playerID</span><span class="op">:</span><span class="va">AB</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["R"],"name":[1],"type":["int"],"align":["right"]},{"label":["H"],"name":[2],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[3],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[4],"type":["int"],"align":["right"]},{"label":["HR"],"name":[5],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[6],"type":["int"],"align":["right"]},{"label":["SB"],"name":[7],"type":["int"],"align":["right"]},{"label":["CS"],"name":[8],"type":["int"],"align":["right"]},{"label":["BB"],"name":[9],"type":["int"],"align":["right"]},{"label":["SO"],"name":[10],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[11],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[12],"type":["int"],"align":["right"]},{"label":["SH"],"name":[13],"type":["int"],"align":["right"]},{"label":["SF"],"name":[14],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[15],"type":["int"],"align":["right"]}],"data":[{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"NA","12":"NA","13":"NA","14":"NA","15":"0"},{"1":"30","2":"32","3":"6","4":"0","5":"0","6":"13","7":"8","8":"1","9":"4","10":"0","11":"NA","12":"NA","13":"NA","14":"NA","15":"0"},{"1":"28","2":"40","3":"4","4":"5","5":"0","6":"19","7":"3","8":"1","9":"2","10":"5","11":"NA","12":"NA","13":"NA","14":"NA","15":"1"},{"1":"28","2":"44","3":"10","4":"2","5":"2","6":"27","7":"1","8":"1","9":"0","10":"2","11":"NA","12":"NA","13":"NA","14":"NA","15":"0"},{"1":"29","2":"39","3":"11","4":"3","5":"0","6":"16","7":"6","8":"2","9":"2","10":"1","11":"NA","12":"NA","13":"NA","14":"NA","15":"0"},{"1":"9","2":"11","3":"2","4":"1","5":"0","6":"5","7":"0","8":"1","9":"0","10":"1","11":"NA","12":"NA","13":"NA","14":"NA","15":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">playerID</span><span class="op">:</span><span class="va">AB</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["R"],"name":[1],"type":["int"],"align":["right"]},{"label":["H"],"name":[2],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[3],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[4],"type":["int"],"align":["right"]},{"label":["HR"],"name":[5],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[6],"type":["int"],"align":["right"]},{"label":["SB"],"name":[7],"type":["int"],"align":["right"]},{"label":["CS"],"name":[8],"type":["int"],"align":["right"]},{"label":["BB"],"name":[9],"type":["int"],"align":["right"]},{"label":["SO"],"name":[10],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[11],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[12],"type":["int"],"align":["right"]},{"label":["SH"],"name":[13],"type":["int"],"align":["right"]},{"label":["SF"],"name":[14],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[15],"type":["int"],"align":["right"]}],"data":[{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"NA","12":"NA","13":"NA","14":"NA","15":"0"},{"1":"30","2":"32","3":"6","4":"0","5":"0","6":"13","7":"8","8":"1","9":"4","10":"0","11":"NA","12":"NA","13":"NA","14":"NA","15":"0"},{"1":"28","2":"40","3":"4","4":"5","5":"0","6":"19","7":"3","8":"1","9":"2","10":"5","11":"NA","12":"NA","13":"NA","14":"NA","15":"1"},{"1":"28","2":"44","3":"10","4":"2","5":"2","6":"27","7":"1","8":"1","9":"0","10":"2","11":"NA","12":"NA","13":"NA","14":"NA","15":"0"},{"1":"29","2":"39","3":"11","4":"3","5":"0","6":"16","7":"6","8":"2","9":"2","10":"1","11":"NA","12":"NA","13":"NA","14":"NA","15":"0"},{"1":"9","2":"11","3":"2","4":"1","5":"0","6":"5","7":"0","8":"1","9":"0","10":"1","11":"NA","12":"NA","13":"NA","14":"NA","15":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["yearID"],"name":[1],"type":["int"],"align":["right"]},{"label":["stint"],"name":[2],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[3],"type":["fct"],"align":["left"]},{"label":["G"],"name":[4],"type":["int"],"align":["right"]},{"label":["R"],"name":[5],"type":["int"],"align":["right"]},{"label":["H"],"name":[6],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[7],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[8],"type":["int"],"align":["right"]},{"label":["HR"],"name":[9],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[10],"type":["int"],"align":["right"]},{"label":["SB"],"name":[11],"type":["int"],"align":["right"]},{"label":["CS"],"name":[12],"type":["int"],"align":["right"]},{"label":["BB"],"name":[13],"type":["int"],"align":["right"]},{"label":["SO"],"name":[14],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[15],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[16],"type":["int"],"align":["right"]},{"label":["SH"],"name":[17],"type":["int"],"align":["right"]},{"label":["SF"],"name":[18],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[19],"type":["int"],"align":["right"]}],"data":[{"1":"1871","2":"1","3":"TRO","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"NA","16":"NA","17":"NA","18":"NA","19":"0"},{"1":"1871","2":"1","3":"RC1","4":"25","5":"30","6":"32","7":"6","8":"0","9":"0","10":"13","11":"8","12":"1","13":"4","14":"0","15":"NA","16":"NA","17":"NA","18":"NA","19":"0"},{"1":"1871","2":"1","3":"CL1","4":"29","5":"28","6":"40","7":"4","8":"5","9":"0","10":"19","11":"3","12":"1","13":"2","14":"5","15":"NA","16":"NA","17":"NA","18":"NA","19":"1"},{"1":"1871","2":"1","3":"WS3","4":"27","5":"28","6":"44","7":"10","8":"2","9":"2","10":"27","11":"1","12":"1","13":"0","14":"2","15":"NA","16":"NA","17":"NA","18":"NA","19":"0"},{"1":"1871","2":"1","3":"RC1","4":"25","5":"29","6":"39","7":"11","8":"3","9":"0","10":"16","11":"6","12":"2","13":"2","14":"1","15":"NA","16":"NA","17":"NA","18":"NA","19":"0"},{"1":"1871","2":"1","3":"FW1","4":"12","5":"9","6":"11","7":"2","8":"1","9":"0","10":"5","11":"0","12":"1","13":"0","14":"1","15":"NA","16":"NA","17":"NA","18":"NA","19":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li>
<p>Can combine all these different ways.</p>
<ul>
<li>Note that the columns of the results are ordered based on when they were specified in <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>.</li>
</ul>
</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="op">-</span><span class="va">yearID</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">HR</span>, <span class="va">AB</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["stint"],"name":[2],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[3],"type":["fct"],"align":["left"]},{"label":["HR"],"name":[4],"type":["int"],"align":["right"]},{"label":["AB"],"name":[5],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1","3":"TRO","4":"0","5":"4"},{"1":"addybo01","2":"1","3":"RC1","4":"0","5":"118"},{"1":"allisar01","2":"1","3":"CL1","4":"0","5":"137"},{"1":"allisdo01","2":"1","3":"WS3","4":"2","5":"133"},{"1":"ansonca01","2":"1","3":"RC1","4":"0","5":"120"},{"1":"armstbo01","2":"1","3":"FW1","4":"0","5":"49"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li>Rename columns using <code>select(new_var = old_var)</code>. Note that all variables not included will be dropped.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span>Games <span class="op">=</span> <span class="va">G</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Games"],"name":[1],"type":["int"],"align":["right"]}],"data":[{"1":"1"},{"1":"25"},{"1":"29"},{"1":"27"},{"1":"25"},{"1":"12"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="select-advanced" class="level3" data-number="30.4.2"><h3 data-number="30.4.2" class="anchored" data-anchor-id="select-advanced">
<span class="header-section-number">30.4.2</span> select() advanced</h3>
<ul>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> has <strong>helper functions</strong> to aide in selecting multiple variables at once (it can be cumbersome to have to type out each individual name or organize them so that we can use <code>:</code>). A few of them are explained below.</p></li>
<li><p><code>where(&lt; function &gt;)</code> → Useful for selecting all variables of a certain data type.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with()</a></code>, and <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code> → Useful when variable names follow a pattern.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/all_of.html">all_of()</a></code> and <code><a href="https://tidyselect.r-lib.org/reference/all_of.html">any_of()</a></code> → Useful when have a character vector of column names (these do the same thing, except we want to use <code><a href="https://tidyselect.r-lib.org/reference/all_of.html">any_of()</a></code> to allow for the potential of missing variables without getting an error).</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html">where</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["yearID"],"name":[1],"type":["int"],"align":["right"]},{"label":["stint"],"name":[2],"type":["int"],"align":["right"]},{"label":["G"],"name":[3],"type":["int"],"align":["right"]},{"label":["AB"],"name":[4],"type":["int"],"align":["right"]},{"label":["R"],"name":[5],"type":["int"],"align":["right"]},{"label":["H"],"name":[6],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[7],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[8],"type":["int"],"align":["right"]},{"label":["HR"],"name":[9],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[10],"type":["int"],"align":["right"]},{"label":["SB"],"name":[11],"type":["int"],"align":["right"]},{"label":["CS"],"name":[12],"type":["int"],"align":["right"]},{"label":["BB"],"name":[13],"type":["int"],"align":["right"]},{"label":["SO"],"name":[14],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[15],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[16],"type":["int"],"align":["right"]},{"label":["SH"],"name":[17],"type":["int"],"align":["right"]},{"label":["SF"],"name":[18],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[19],"type":["int"],"align":["right"]}],"data":[{"1":"1871","2":"1","3":"1","4":"4","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"NA","16":"NA","17":"NA","18":"NA","19":"0"},{"1":"1871","2":"1","3":"25","4":"118","5":"30","6":"32","7":"6","8":"0","9":"0","10":"13","11":"8","12":"1","13":"4","14":"0","15":"NA","16":"NA","17":"NA","18":"NA","19":"0"},{"1":"1871","2":"1","3":"29","4":"137","5":"28","6":"40","7":"4","8":"5","9":"0","10":"19","11":"3","12":"1","13":"2","14":"5","15":"NA","16":"NA","17":"NA","18":"NA","19":"1"},{"1":"1871","2":"1","3":"27","4":"133","5":"28","6":"44","7":"10","8":"2","9":"2","10":"27","11":"1","12":"1","13":"0","14":"2","15":"NA","16":"NA","17":"NA","18":"NA","19":"0"},{"1":"1871","2":"1","3":"25","4":"120","5":"29","6":"39","7":"11","8":"3","9":"0","10":"16","11":"6","12":"2","13":"2","14":"1","15":"NA","16":"NA","17":"NA","18":"NA","19":"0"},{"1":"1871","2":"1","3":"12","4":"49","5":"9","6":"11","7":"2","8":"1","9":"0","10":"5","11":"0","12":"1","13":"0","14":"1","15":"NA","16":"NA","17":"NA","18":"NA","19":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with</a></span><span class="op">(</span><span class="st">"ID"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[3],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[4],"type":["fct"],"align":["left"]}],"data":[{"1":"abercda01","2":"1871","3":"TRO","4":"NA"},{"1":"addybo01","2":"1871","3":"RC1","4":"NA"},{"1":"allisar01","2":"1871","3":"CL1","4":"NA"},{"1":"allisdo01","2":"1871","3":"WS3","4":"NA"},{"1":"ansonca01","2":"1871","3":"RC1","4":"NA"},{"1":"armstbo01","2":"1871","3":"FW1","4":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"playerID"</span>, <span class="st">"yearID"</span>, <span class="st">"HR"</span>, <span class="st">"H"</span><span class="op">)</span></span>
<span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html">all_of</a></span><span class="op">(</span><span class="va">vars</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["HR"],"name":[3],"type":["int"],"align":["right"]},{"label":["H"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"0","4":"0"},{"1":"addybo01","2":"1871","3":"0","4":"32"},{"1":"allisar01","2":"1871","3":"0","4":"40"},{"1":"allisdo01","2":"1871","3":"2","4":"44"},{"1":"ansonca01","2":"1871","3":"0","4":"39"},{"1":"armstbo01","2":"1871","3":"0","4":"11"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"playerID"</span>, <span class="st">"yearID"</span>, <span class="st">"HR"</span>, <span class="st">"H"</span>, <span class="st">"BA"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span>
<span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html">any_of</a></span><span class="op">(</span><span class="va">vars</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["HR"],"name":[3],"type":["int"],"align":["right"]},{"label":["H"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"0","4":"0"},{"1":"addybo01","2":"1871","3":"0","4":"32"},{"1":"allisar01","2":"1871","3":"0","4":"40"},{"1":"allisdo01","2":"1871","3":"2","4":"44"},{"1":"ansonca01","2":"1871","3":"0","4":"39"},{"1":"armstbo01","2":"1871","3":"0","4":"11"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li>Note that these functions have to be used within a <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> statement (or in similar verbs).</li>
</ul></section><section id="sec-select-ex" class="level3" data-number="30.4.3"><h3 data-number="30.4.3" class="anchored" data-anchor-id="sec-select-ex">
<span class="header-section-number">30.4.3</span> Exercise</h3>
<ul>
<li>Use the <code>diamonds</code> dataset to create a new dataset that contains only the columns <code>carat</code>, <code>cut</code>, <code>color</code> and <code>price</code>. Try to do this <em>three</em> different ways.</li>
</ul></section></section><section id="renaming-columns" class="level2" data-number="30.5"><h2 data-number="30.5" class="anchored" data-anchor-id="renaming-columns">
<span class="header-section-number">30.5</span> Renaming columns</h2>
<section id="rename-basics" class="level3" data-number="30.5.1"><h3 data-number="30.5.1" class="anchored" data-anchor-id="rename-basics">
<span class="header-section-number">30.5.1</span> rename() basics</h3>
<ul>
<li>If want to keep the all of the variables, but just rename a few, we should use <code>rename(new_var = old_var)</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>Doubles <span class="op">=</span> <span class="va">X2B</span>, Triples <span class="op">=</span> <span class="va">X3B</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["Doubles"],"name":[10],"type":["int"],"align":["right"]},{"label":["Triples"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"1","4":"TRO","5":"NA","6":"1","7":"4","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"addybo01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"118","8":"30","9":"32","10":"6","11":"0","12":"0","13":"13","14":"8","15":"1","16":"4","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"allisar01","2":"1871","3":"1","4":"CL1","5":"NA","6":"29","7":"137","8":"28","9":"40","10":"4","11":"5","12":"0","13":"19","14":"3","15":"1","16":"2","17":"5","18":"NA","19":"NA","20":"NA","21":"NA","22":"1"},{"1":"allisdo01","2":"1871","3":"1","4":"WS3","5":"NA","6":"27","7":"133","8":"28","9":"44","10":"10","11":"2","12":"2","13":"27","14":"1","15":"1","16":"0","17":"2","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"ansonca01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"120","8":"29","9":"39","10":"11","11":"3","12":"0","13":"16","14":"6","15":"2","16":"2","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"armstbo01","2":"1871","3":"1","4":"FW1","5":"NA","6":"12","7":"49","8":"9","9":"11","10":"2","11":"1","12":"0","13":"5","14":"0","15":"1","16":"0","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="sec-rename-ex" class="level3" data-number="30.5.2"><h3 data-number="30.5.2" class="anchored" data-anchor-id="sec-rename-ex">
<span class="header-section-number">30.5.2</span> Exercise</h3>
<ul>
<li>
<p>Rename the columns of the <code>iris</code> dataset so they match each of the following scenarios (<em>NOTE: each is a separate problem</em>):</p>
<ol type="a">
<li><p>All columns names are lowercase and the dots <code>.</code> are replaced with underscores <code>_</code>.</p></li>
<li><p>Same rules as (a), except we only want to keep the new columns <code>species</code> and <code>sepal_length</code> (in this order) in the resulting dataframe.</p></li>
</ol>
</li>
</ul></section></section><section id="relocating-columns" class="level2" data-number="30.6"><h2 data-number="30.6" class="anchored" data-anchor-id="relocating-columns">
<span class="header-section-number">30.6</span> Relocating columns</h2>
<section id="relocate-basics" class="level3" data-number="30.6.1"><h3 data-number="30.6.1" class="anchored" data-anchor-id="relocate-basics">
<span class="header-section-number">30.6.1</span> relocate() basics</h3>
<ul>
<li><p>Use <code><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate()</a></code> to move variables around (rather than reordering all of them in a <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> statement).</p></li>
<li><p>By default variables are placed in the front, but we can also specify a different location by using the <code>.before</code> or <code>.after</code> arguments.</p></li>
<li><p>Note that these arguments are available in <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> as well, and the <code>.</code> before the word signifies that it is an argument and not a column named <code>after</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">HR</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["HR"],"name":[1],"type":["int"],"align":["right"]},{"label":["playerID"],"name":[2],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[3],"type":["int"],"align":["right"]},{"label":["stint"],"name":[4],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[6],"type":["fct"],"align":["left"]},{"label":["G"],"name":[7],"type":["int"],"align":["right"]},{"label":["AB"],"name":[8],"type":["int"],"align":["right"]},{"label":["R"],"name":[9],"type":["int"],"align":["right"]},{"label":["H"],"name":[10],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[11],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"0","2":"abercda01","3":"1871","4":"1","5":"TRO","6":"NA","7":"1","8":"4","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"0","2":"addybo01","3":"1871","4":"1","5":"RC1","6":"NA","7":"25","8":"118","9":"30","10":"32","11":"6","12":"0","13":"13","14":"8","15":"1","16":"4","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"0","2":"allisar01","3":"1871","4":"1","5":"CL1","6":"NA","7":"29","8":"137","9":"28","10":"40","11":"4","12":"5","13":"19","14":"3","15":"1","16":"2","17":"5","18":"NA","19":"NA","20":"NA","21":"NA","22":"1"},{"1":"2","2":"allisdo01","3":"1871","4":"1","5":"WS3","6":"NA","7":"27","8":"133","9":"28","10":"44","11":"10","12":"2","13":"27","14":"1","15":"1","16":"0","17":"2","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"0","2":"ansonca01","3":"1871","4":"1","5":"RC1","6":"NA","7":"25","8":"120","9":"29","10":"39","11":"11","12":"3","13":"16","14":"6","15":"2","16":"2","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"0","2":"armstbo01","3":"1871","4":"1","5":"FW1","6":"NA","7":"12","8":"49","9":"9","10":"11","11":"2","12":"1","13":"5","14":"0","15":"1","16":"0","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">lgID</span>, <span class="va">G</span>, .after <span class="op">=</span> <span class="va">AB</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["AB"],"name":[5],"type":["int"],"align":["right"]},{"label":["lgID"],"name":[6],"type":["fct"],"align":["left"]},{"label":["G"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"1","4":"TRO","5":"4","6":"NA","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"addybo01","2":"1871","3":"1","4":"RC1","5":"118","6":"NA","7":"25","8":"30","9":"32","10":"6","11":"0","12":"0","13":"13","14":"8","15":"1","16":"4","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"allisar01","2":"1871","3":"1","4":"CL1","5":"137","6":"NA","7":"29","8":"28","9":"40","10":"4","11":"5","12":"0","13":"19","14":"3","15":"1","16":"2","17":"5","18":"NA","19":"NA","20":"NA","21":"NA","22":"1"},{"1":"allisdo01","2":"1871","3":"1","4":"WS3","5":"133","6":"NA","7":"27","8":"28","9":"44","10":"10","11":"2","12":"2","13":"27","14":"1","15":"1","16":"0","17":"2","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"ansonca01","2":"1871","3":"1","4":"RC1","5":"120","6":"NA","7":"25","8":"29","9":"39","10":"11","11":"3","12":"0","13":"16","14":"6","15":"2","16":"2","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"armstbo01","2":"1871","3":"1","4":"FW1","5":"49","6":"NA","7":"12","8":"9","9":"11","10":"2","11":"1","12":"0","13":"5","14":"0","15":"1","16":"0","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li>Generally it is a good idea to have all of the categorical (identifier) variables first and then the numerical variables, which is how the data was setup originally.</li>
</ul></section><section id="sec-relocate-ex" class="level3" data-number="30.6.2"><h3 data-number="30.6.2" class="anchored" data-anchor-id="sec-relocate-ex">
<span class="header-section-number">30.6.2</span> Exercise</h3>
<ul>
<li>
<p>Reorganize the columns of the <code>diamonds</code> dataset so they match each of the following scenarios (<em>NOTE: each is a separate problem</em>):</p>
<ol type="a">
<li><p><code>price</code> is the first column.</p></li>
<li><p><code>x</code>, <code>y</code>, and <code>z</code> are located after <code>cut</code>; see if you can do this two different ways.</p></li>
</ol>
</li>
</ul></section></section><section id="filtering-rows" class="level2" data-number="30.7"><h2 data-number="30.7" class="anchored" data-anchor-id="filtering-rows">
<span class="header-section-number">30.7</span> Filtering rows</h2>
<section id="filter-basics" class="level3" data-number="30.7.1"><h3 data-number="30.7.1" class="anchored" data-anchor-id="filter-basics">
<span class="header-section-number">30.7.1</span> filter() basics</h3>
<ul>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> is used to subset a dataframe to rows that meet the specified condition(s).</p></li>
<li><p>These conditions are called <strong>logical tests</strong>. R has the following comparison operators that we can use to compare values: <code>&gt;</code>, <code>&gt;=</code> (greater than or equal), <code>&lt;</code>, <code>&lt;=</code>, <code>!=</code> (not equal), and <code>==</code> (equal).</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">playerID</span> <span class="op">==</span> <span class="st">"aaronha01"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"aaronha01","2":"1954","3":"1","4":"ML1","5":"NL","6":"122","7":"468","8":"58","9":"131","10":"27","11":"6","12":"13","13":"69","14":"2","15":"2","16":"28","17":"39","18":"NA","19":"3","20":"6","21":"4","22":"13"},{"1":"aaronha01","2":"1955","3":"1","4":"ML1","5":"NL","6":"153","7":"602","8":"105","9":"189","10":"37","11":"9","12":"27","13":"106","14":"3","15":"1","16":"49","17":"61","18":"5","19":"3","20":"7","21":"4","22":"20"},{"1":"aaronha01","2":"1956","3":"1","4":"ML1","5":"NL","6":"153","7":"609","8":"106","9":"200","10":"34","11":"14","12":"26","13":"92","14":"2","15":"4","16":"37","17":"54","18":"6","19":"2","20":"5","21":"7","22":"21"},{"1":"aaronha01","2":"1957","3":"1","4":"ML1","5":"NL","6":"151","7":"615","8":"118","9":"198","10":"27","11":"6","12":"44","13":"132","14":"1","15":"1","16":"57","17":"58","18":"15","19":"0","20":"0","21":"3","22":"13"},{"1":"aaronha01","2":"1958","3":"1","4":"ML1","5":"NL","6":"153","7":"601","8":"109","9":"196","10":"34","11":"4","12":"30","13":"95","14":"4","15":"1","16":"59","17":"49","18":"16","19":"1","20":"0","21":"3","22":"21"},{"1":"aaronha01","2":"1959","3":"1","4":"ML1","5":"NL","6":"154","7":"629","8":"116","9":"223","10":"46","11":"7","12":"39","13":"123","14":"8","15":"0","16":"51","17":"54","18":"17","19":"4","20":"0","21":"9","22":"19"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">yearID</span> <span class="op">&gt;=</span> <span class="fl">2020</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"abreual01","2":"2020","3":"1","4":"NYA","5":"AL","6":"2","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"abreubr01","2":"2020","3":"1","4":"HOU","5":"AL","6":"4","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"abreujo02","2":"2020","3":"1","4":"CHA","5":"AL","6":"60","7":"240","8":"43","9":"76","10":"15","11":"0","12":"19","13":"60","14":"0","15":"0","16":"18","17":"59","18":"1","19":"3","20":"0","21":"1","22":"10"},{"1":"acunaro01","2":"2020","3":"1","4":"ATL","5":"NL","6":"46","7":"160","8":"46","9":"40","10":"11","11":"0","12":"14","13":"29","14":"8","15":"1","16":"38","17":"60","18":"2","19":"4","20":"0","21":"0","22":"3"},{"1":"adamewi01","2":"2020","3":"1","4":"TBA","5":"AL","6":"54","7":"185","8":"29","9":"48","10":"15","11":"1","12":"8","13":"23","14":"2","15":"1","16":"20","17":"74","18":"0","19":"0","20":"0","21":"0","22":"4"},{"1":"adamja01","2":"2020","3":"1","4":"CHN","5":"NL","6":"13","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">yearID</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"abbotco01","2":"2022","3":"1","4":"WAS","5":"NL","6":"16","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"abramcj01","2":"2022","3":"1","4":"SDN","5":"NL","6":"46","7":"125","8":"16","9":"29","10":"5","11":"0","12":"2","13":"11","14":"1","15":"2","16":"4","17":"27","18":"0","19":"6","20":"2","21":"2","22":"4"},{"1":"abramcj01","2":"2022","3":"2","4":"WAS","5":"NL","6":"44","7":"159","8":"17","9":"41","10":"7","11":"2","12":"0","13":"10","14":"6","15":"2","16":"1","17":"23","18":"0","19":"3","20":"0","21":"0","22":"1"},{"1":"abreual01","2":"2022","3":"1","4":"TEX","5":"AL","6":"7","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"abreual01","2":"2022","3":"2","4":"KCA","5":"AL","6":"4","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"abreual01","2":"2022","3":"3","4":"NYA","5":"AL","6":"22","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li><p>Can check more than one condition by combining logical tests: <code>&amp;</code> or <code>,</code> to indicate “and” (check for <em>both</em> conditions) or with <code>|</code> to indicate “or” (check for <em>either</em> condition).</p></li>
<li><p>If checking multiple “or” values for the same variable, use <code>%in%</code> operator.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">lgID</span> <span class="op">==</span> <span class="st">"NL"</span>, <span class="va">yearID</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"abbotco01","2":"2022","3":"1","4":"WAS","5":"NL","6":"16","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"abramcj01","2":"2022","3":"1","4":"SDN","5":"NL","6":"46","7":"125","8":"16","9":"29","10":"5","11":"0","12":"2","13":"11","14":"1","15":"2","16":"4","17":"27","18":"0","19":"6","20":"2","21":"2","22":"4"},{"1":"abramcj01","2":"2022","3":"2","4":"WAS","5":"NL","6":"44","7":"159","8":"17","9":"41","10":"7","11":"2","12":"0","13":"10","14":"6","15":"2","16":"1","17":"23","18":"0","19":"3","20":"0","21":"0","22":"1"},{"1":"acunaro01","2":"2022","3":"1","4":"ATL","5":"NL","6":"119","7":"467","8":"71","9":"124","10":"24","11":"0","12":"15","13":"50","14":"29","15":"11","16":"53","17":"126","18":"4","19":"10","20":"0","21":"3","22":"8"},{"1":"adamewi01","2":"2022","3":"1","4":"MIL","5":"NL","6":"139","7":"563","8":"83","9":"134","10":"31","11":"0","12":"31","13":"98","14":"8","15":"3","16":"49","17":"166","18":"3","19":"1","20":"0","21":"4","22":"11"},{"1":"adamsau02","2":"2022","3":"1","4":"SDN","5":"NL","6":"2","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">lgID</span> <span class="op">==</span> <span class="st">"NL"</span> <span class="op">|</span> <span class="va">yearID</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"addybo01","2":"1876","3":"1","4":"CHN","5":"NL","6":"32","7":"142","8":"36","9":"40","10":"4","11":"1","12":"0","13":"16","14":"NA","15":"NA","16":"5","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA"},{"1":"allisar01","2":"1876","3":"1","4":"LS1","5":"NL","6":"31","7":"130","8":"9","9":"27","10":"2","11":"1","12":"0","13":"10","14":"NA","15":"NA","16":"2","17":"6","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA"},{"1":"allisdo01","2":"1876","3":"1","4":"HAR","5":"NL","6":"44","7":"163","8":"19","9":"43","10":"4","11":"0","12":"0","13":"15","14":"NA","15":"NA","16":"3","17":"9","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA"},{"1":"andrufr01","2":"1876","3":"1","4":"CHN","5":"NL","6":"8","7":"36","8":"6","9":"11","10":"3","11":"0","12":"0","13":"2","14":"NA","15":"NA","16":"0","17":"5","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA"},{"1":"ansonca01","2":"1876","3":"1","4":"CHN","5":"NL","6":"66","7":"309","8":"63","9":"110","10":"9","11":"7","12":"2","13":"59","14":"NA","15":"NA","16":"12","17":"8","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA"},{"1":"barnero01","2":"1876","3":"1","4":"CHN","5":"NL","6":"66","7":"322","8":"126","9":"138","10":"21","11":"14","12":"1","13":"59","14":"NA","15":"NA","16":"20","17":"8","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">teamID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"CIN"</span>, <span class="st">"PHI"</span>, <span class="st">"MIA"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"benedar01","2":"1883","3":"1","4":"PHI","5":"NL","6":"3","7":"15","8":"3","9":"4","10":"1","11":"0","12":"0","13":"4","14":"NA","15":"NA","16":"0","17":"4","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA"},{"1":"breital01","2":"1883","3":"1","4":"PHI","5":"NL","6":"1","7":"2","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"NA","15":"NA","16":"0","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA"},{"1":"colemjo01","2":"1883","3":"1","4":"PHI","5":"NL","6":"90","7":"354","8":"33","9":"83","10":"12","11":"8","12":"0","13":"32","14":"NA","15":"NA","16":"15","17":"39","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA"},{"1":"doyleco01","2":"1883","3":"1","4":"PHI","5":"NL","6":"16","7":"68","8":"3","9":"15","10":"3","11":"2","12":"0","13":"3","14":"NA","15":"NA","16":"0","17":"15","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA"},{"1":"farrasi01","2":"1883","3":"1","4":"PHI","5":"NL","6":"99","7":"377","8":"41","9":"88","10":"19","11":"8","12":"0","13":"29","14":"NA","15":"NA","16":"4","17":"37","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA"},{"1":"fergubo01","2":"1883","3":"1","4":"PHI","5":"NL","6":"86","7":"329","8":"39","9":"85","10":"9","11":"2","12":"0","13":"27","14":"NA","15":"NA","16":"18","17":"21","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="sec-filter-ex" class="level3" data-number="30.7.2"><h3 data-number="30.7.2" class="anchored" data-anchor-id="sec-filter-ex">
<span class="header-section-number">30.7.2</span> Exercise</h3>
<ul>
<li>
<p>Subset the <code>diamonds</code> dataset so that the result contains only rows that match each of the following scenarios (<em>NOTE: each is a separate problem</em>):</p>
<ol type="a">
<li><p>The most expensive diamond.</p></li>
<li><p>Diamonds that have <code>carat</code> between 1 and 2 (inclusive) and that are not “Premium” diamonds in terms of <code>cut</code>.</p></li>
<li><p>The least expensive diamond, but it has to have a “Fair” or “Good” <code>cut</code>. <em>HINT: This may require more than <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> statement.</em></p></li>
</ol>
</li>
</ul></section></section><section id="ordering-rows" class="level2" data-number="30.8"><h2 data-number="30.8" class="anchored" data-anchor-id="ordering-rows">
<span class="header-section-number">30.8</span> Ordering rows</h2>
<section id="arrange-basics" class="level3" data-number="30.8.1"><h3 data-number="30.8.1" class="anchored" data-anchor-id="arrange-basics">
<span class="header-section-number">30.8.1</span> arrange() basics</h3>
<ul>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> sorts rows based on the values of the supplied columns. Each additional column gets sorted by <em>within</em> the values of the previous column.</p></li>
<li><p>By default it orders <em>ascending</em> (smallest to largest); can sort <em>descending</em> by wrapping the column name in <code><a href="https://dplyr.tidyverse.org/reference/desc.html">desc()</a></code>.</p></li>
<li><p>Note that this can be used on character or factor columns as well where it sorts <em>alphabetically</em>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"1","4":"TRO","5":"NA","6":"1","7":"4","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"addybo01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"118","8":"30","9":"32","10":"6","11":"0","12":"0","13":"13","14":"8","15":"1","16":"4","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"allisar01","2":"1871","3":"1","4":"CL1","5":"NA","6":"29","7":"137","8":"28","9":"40","10":"4","11":"5","12":"0","13":"19","14":"3","15":"1","16":"2","17":"5","18":"NA","19":"NA","20":"NA","21":"NA","22":"1"},{"1":"allisdo01","2":"1871","3":"1","4":"WS3","5":"NA","6":"27","7":"133","8":"28","9":"44","10":"10","11":"2","12":"2","13":"27","14":"1","15":"1","16":"0","17":"2","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"ansonca01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"120","8":"29","9":"39","10":"11","11":"3","12":"0","13":"16","14":"6","15":"2","16":"2","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"armstbo01","2":"1871","3":"1","4":"FW1","5":"NA","6":"12","7":"49","8":"9","9":"11","10":"2","11":"1","12":"0","13":"5","14":"0","15":"1","16":"0","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">playerID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"aardsda01","2":"2004","3":"1","4":"SFN","5":"NL","6":"11","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"aardsda01","2":"2006","3":"1","4":"CHN","5":"NL","6":"45","7":"2","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"1","21":"0","22":"0"},{"1":"aardsda01","2":"2007","3":"1","4":"CHA","5":"AL","6":"25","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"aardsda01","2":"2008","3":"1","4":"BOS","5":"AL","6":"47","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"1","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"aardsda01","2":"2009","3":"1","4":"SEA","5":"AL","6":"73","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"aardsda01","2":"2010","3":"1","4":"SEA","5":"AL","6":"53","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">H</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"freemfr01","2":"2022","3":"1","4":"LAN","5":"NL","6":"159","7":"612","8":"117","9":"199","10":"47","11":"2","12":"21","13":"100","14":"13","15":"3","16":"84","17":"102","18":"12","19":"5","20":"0","21":"7","22":"6"},{"1":"turnetr01","2":"2022","3":"1","4":"LAN","5":"NL","6":"160","7":"652","8":"101","9":"194","10":"39","11":"4","12":"21","13":"100","14":"27","15":"3","16":"45","17":"131","18":"1","19":"3","20":"0","21":"6","22":"9"},{"1":"bichebo01","2":"2022","3":"1","4":"TOR","5":"AL","6":"159","7":"652","8":"91","9":"189","10":"43","11":"1","12":"24","13":"93","14":"13","15":"8","16":"41","17":"155","18":"0","19":"2","20":"0","21":"2","22":"21"},{"1":"abreujo02","2":"2022","3":"1","4":"CHA","5":"AL","6":"157","7":"601","8":"85","9":"183","10":"40","11":"0","12":"15","13":"75","14":"0","15":"0","16":"62","17":"110","18":"2","19":"12","20":"0","21":"4","22":"19"},{"1":"rosaram01","2":"2022","3":"1","4":"CLE","5":"AL","6":"153","7":"637","8":"86","9":"180","10":"26","11":"9","12":"11","13":"71","14":"18","15":"4","16":"25","17":"111","18":"0","19":"4","20":"0","21":"4","22":"19"},{"1":"lowena01","2":"2022","3":"1","4":"TEX","5":"AL","6":"157","7":"593","8":"74","9":"179","10":"26","11":"3","12":"27","13":"76","14":"2","15":"2","16":"48","17":"147","18":"2","19":"4","20":"0","21":"0","22":"10"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="sec-arrange-ex" class="level3" data-number="30.8.2"><h3 data-number="30.8.2" class="anchored" data-anchor-id="sec-arrange-ex">
<span class="header-section-number">30.8.2</span> Exercise</h3>
<ul>
<li>Use the code below and arrange the sample of the <code>diamonds</code> dataset by <code>price</code> (most expensive to least expensive) <em>within</em> <code>cut</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">diamonds_sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span><span class="va">diamonds</span>, size <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">cut</span>, <span class="va">price</span>, <span class="va">carat</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="finding-unique-rows" class="level2" data-number="30.9"><h2 data-number="30.9" class="anchored" data-anchor-id="finding-unique-rows">
<span class="header-section-number">30.9</span> Finding unique rows</h2>
<section id="distinct-basics" class="level3" data-number="30.9.1"><h3 data-number="30.9.1" class="anchored" data-anchor-id="distinct-basics">
<span class="header-section-number">30.9.1</span> distinct() basics</h3>
<ul>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct()</a></code> finds (filters to) all <em>unique rows</em> in a dataset (across all variables); in essence, it removes the <em>duplicate rows</em>.</p></li>
<li><p>More often, we are trying to see which unique combinations of certain variables exist in the dataset. To do this, just supply the column names of interest to <code><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct()</a></code>.</p></li>
<li><p>If we want to the keep other columns when filtering for unique rows, use the <code>.keep_all = TRUE</code> option. Note that <code><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct()</a></code> will keep only the <em>first occurrence</em> of the unique combo.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting_sample</span> <span class="op">&lt;-</span> <span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">teamID</span> <span class="op">==</span> <span class="st">"CIN"</span>, <span class="va">yearID</span> <span class="op">&gt;=</span> <span class="fl">2020</span><span class="op">)</span></span>
<span><span class="va">batting_sample</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">playerID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"akiyash01"},{"1":"antonte01"},{"1":"aquinar01"},{"1":"barnhtu01"},{"1":"bauertr01"},{"1":"biddlje01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting_sample</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">playerID</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"akiyash01","2":"2020","3":"1","4":"CIN","5":"NL","6":"54","7":"155","8":"16","9":"38","10":"6","11":"1","12":"0","13":"9","14":"7","15":"3","16":"25","17":"34","18":"0","19":"2","20":"0","21":"0","22":"1"},{"1":"antonte01","2":"2020","3":"1","4":"CIN","5":"NL","6":"13","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"aquinar01","2":"2020","3":"1","4":"CIN","5":"NL","6":"23","7":"47","8":"7","9":"8","10":"1","11":"0","12":"2","13":"8","14":"1","15":"0","16":"6","17":"18","18":"0","19":"3","20":"0","21":"0","22":"1"},{"1":"barnhtu01","2":"2020","3":"1","4":"CIN","5":"NL","6":"38","7":"98","8":"10","9":"20","10":"3","11":"0","12":"5","13":"13","14":"0","15":"0","16":"12","17":"28","18":"0","19":"0","20":"0","21":"0","22":"2"},{"1":"bauertr01","2":"2020","3":"1","4":"CIN","5":"NL","6":"11","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"biddlje01","2":"2020","3":"1","4":"CIN","5":"NL","6":"1","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="sec-distinct-ex" class="level3" data-number="30.9.2"><h3 data-number="30.9.2" class="anchored" data-anchor-id="sec-distinct-ex">
<span class="header-section-number">30.9.2</span> Exercise</h3>
<ul>
<li>
<p>Use the <code>diamonds</code> dataset to do the following (<em>NOTE: each is a separate problem</em>):</p>
<ol type="a">
<li><p>Find the unique combinations <code>cut</code> and <code>color</code>.</p></li>
<li><p>Find the unique combinations <code>cut</code> and <code>color</code>, except keep the rest of the variables.</p></li>
<li><p>Find the unique combinations <code>cut</code> and <code>color</code>, keeping all variables like in (b), but we want the row that is kept to be the <em>most</em> expensive diamonds for each combination. <em>HINT: Can you use a function we learned previously to help?</em></p></li>
</ol>
</li>
</ul></section></section><section id="creating-editing-columns" class="level2" data-number="30.10"><h2 data-number="30.10" class="anchored" data-anchor-id="creating-editing-columns">
<span class="header-section-number">30.10</span> Creating / editing columns</h2>
<section id="mutate-basics" class="level3" data-number="30.10.1"><h3 data-number="30.10.1" class="anchored" data-anchor-id="mutate-basics">
<span class="header-section-number">30.10.1</span> mutate() basics</h3>
<ul>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> is used create new columns based on existing columns (or to overwrite existing columns).</p></li>
<li><p>Can use simple algebra or any function of previous columns when creating new columns.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>BA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">H</span> <span class="op">/</span> <span class="va">AB</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>                   teamID <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower</a></span><span class="op">(</span><span class="va">teamID</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["chr"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]},{"label":["BA"],"name":[23],"type":["dbl"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"1","4":"tro","5":"NA","6":"1","7":"4","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","23":"0.000"},{"1":"addybo01","2":"1871","3":"1","4":"rc1","5":"NA","6":"25","7":"118","8":"30","9":"32","10":"6","11":"0","12":"0","13":"13","14":"8","15":"1","16":"4","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","23":"0.271"},{"1":"allisar01","2":"1871","3":"1","4":"cl1","5":"NA","6":"29","7":"137","8":"28","9":"40","10":"4","11":"5","12":"0","13":"19","14":"3","15":"1","16":"2","17":"5","18":"NA","19":"NA","20":"NA","21":"NA","22":"1","23":"0.292"},{"1":"allisdo01","2":"1871","3":"1","4":"ws3","5":"NA","6":"27","7":"133","8":"28","9":"44","10":"10","11":"2","12":"2","13":"27","14":"1","15":"1","16":"0","17":"2","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","23":"0.331"},{"1":"ansonca01","2":"1871","3":"1","4":"rc1","5":"NA","6":"25","7":"120","8":"29","9":"39","10":"11","11":"3","12":"0","13":"16","14":"6","15":"2","16":"2","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","23":"0.325"},{"1":"armstbo01","2":"1871","3":"1","4":"fw1","5":"NA","6":"12","7":"49","8":"9","9":"11","10":"2","11":"1","12":"0","13":"5","14":"0","15":"1","16":"0","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","23":"0.224"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li>Can also specify where we want the new columns to be placed in the resulting dataframe with <code>.before</code> and <code>.after</code>, just like with <code><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate()</a></code>.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>BA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">H</span> <span class="op">/</span> <span class="va">AB</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>                   teamID <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower</a></span><span class="op">(</span><span class="va">teamID</span><span class="op">)</span>,</span>
<span>                   .after <span class="op">=</span> <span class="va">playerID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["BA"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["yearID"],"name":[3],"type":["int"],"align":["right"]},{"label":["stint"],"name":[4],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[5],"type":["chr"],"align":["left"]},{"label":["lgID"],"name":[6],"type":["fct"],"align":["left"]},{"label":["G"],"name":[7],"type":["int"],"align":["right"]},{"label":["AB"],"name":[8],"type":["int"],"align":["right"]},{"label":["R"],"name":[9],"type":["int"],"align":["right"]},{"label":["H"],"name":[10],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[11],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[12],"type":["int"],"align":["right"]},{"label":["HR"],"name":[13],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[14],"type":["int"],"align":["right"]},{"label":["SB"],"name":[15],"type":["int"],"align":["right"]},{"label":["CS"],"name":[16],"type":["int"],"align":["right"]},{"label":["BB"],"name":[17],"type":["int"],"align":["right"]},{"label":["SO"],"name":[18],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[19],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[20],"type":["int"],"align":["right"]},{"label":["SH"],"name":[21],"type":["int"],"align":["right"]},{"label":["SF"],"name":[22],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[23],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"0.000","3":"1871","4":"1","5":"tro","6":"NA","7":"1","8":"4","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"NA","20":"NA","21":"NA","22":"NA","23":"0"},{"1":"addybo01","2":"0.271","3":"1871","4":"1","5":"rc1","6":"NA","7":"25","8":"118","9":"30","10":"32","11":"6","12":"0","13":"0","14":"13","15":"8","16":"1","17":"4","18":"0","19":"NA","20":"NA","21":"NA","22":"NA","23":"0"},{"1":"allisar01","2":"0.292","3":"1871","4":"1","5":"cl1","6":"NA","7":"29","8":"137","9":"28","10":"40","11":"4","12":"5","13":"0","14":"19","15":"3","16":"1","17":"2","18":"5","19":"NA","20":"NA","21":"NA","22":"NA","23":"1"},{"1":"allisdo01","2":"0.331","3":"1871","4":"1","5":"ws3","6":"NA","7":"27","8":"133","9":"28","10":"44","11":"10","12":"2","13":"2","14":"27","15":"1","16":"1","17":"0","18":"2","19":"NA","20":"NA","21":"NA","22":"NA","23":"0"},{"1":"ansonca01","2":"0.325","3":"1871","4":"1","5":"rc1","6":"NA","7":"25","8":"120","9":"29","10":"39","11":"11","12":"3","13":"0","14":"16","15":"6","16":"2","17":"2","18":"1","19":"NA","20":"NA","21":"NA","22":"NA","23":"0"},{"1":"armstbo01","2":"0.224","3":"1871","4":"1","5":"fw1","6":"NA","7":"12","8":"49","9":"9","10":"11","11":"2","12":"1","13":"0","14":"5","15":"0","16":"1","17":"0","18":"1","19":"NA","20":"NA","21":"NA","22":"NA","23":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="mutate-advanced" class="level3" data-number="30.10.2"><h3 data-number="30.10.2" class="anchored" data-anchor-id="mutate-advanced">
<span class="header-section-number">30.10.2</span> mutate() advanced</h3>
<ul>
<li>
<p>Often we are only interested in the columns we are mutating or simply just the result, in which case we can optionally specify which variables to keep in the result using the <code>.keep</code> option.</p>
<ul>
<li><p><code>.keep = "all"</code> → Keeps all columns; this is the default (so it was used above when nothing was specified).</p></li>
<li><p><code>.keep = "used"</code> → <em>Keeps</em> all columns involved in the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> statement and <em>drops</em> the rest.</p></li>
<li><p><code>.keep = "unused"</code> → <em>Drops</em> all columns involved in the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> statement, but <em>keeps</em> the rest.</p></li>
<li><p><code>.keep = "none"</code> → <em>Only keeps</em> the new column(s).</p></li>
</ul>
</li>
<li><p>We could of course just use the default option and then use a <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> statement accordingly, but <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> has this functionality built in. teamID = str_to_lower(teamID))</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>BA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">H</span> <span class="op">/</span> <span class="va">AB</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>                   teamID <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower</a></span><span class="op">(</span><span class="va">teamID</span><span class="op">)</span>,</span>
<span>                   .keep <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["teamID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["BA"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"tro","2":"0.000"},{"1":"rc1","2":"0.271"},{"1":"cl1","2":"0.292"},{"1":"ws3","2":"0.331"},{"1":"rc1","2":"0.325"},{"1":"fw1","2":"0.224"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li>
<p>Here are two very useful / common functions when used in <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code></p>
<ul>
<li><p><code>ifelse(condition, &lt; value if true &gt;, &lt; value if false &gt;)</code> → Assigns a value based on whether a logical test is true or false.</p></li>
<li><p><code>case_when(condition 1 ~ &lt; value if true &gt;, ...)</code> → Extends <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> to check more than one condition (checks condition by condition).</p></li>
</ul>
</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>thirty_thirty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">HR</span> <span class="op">&gt;=</span> <span class="fl">30</span> <span class="op">&amp;</span> <span class="va">SB</span> <span class="op">&gt;=</span> <span class="fl">30</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span><span class="op">)</span>,</span>
<span>                   .keep <span class="op">=</span> <span class="st">"used"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["HR"],"name":[1],"type":["int"],"align":["right"]},{"label":["SB"],"name":[2],"type":["int"],"align":["right"]},{"label":["thirty_thirty"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"0","2":"0","3":"No"},{"1":"0","2":"8","3":"No"},{"1":"0","2":"3","3":"No"},{"1":"2","2":"1","3":"No"},{"1":"0","2":"6","3":"No"},{"1":"0","2":"0","3":"No"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">favs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"CIN"</span>, <span class="st">"PHI"</span>, <span class="st">"NYA"</span><span class="op">)</span></span>
<span><span class="va">dislike</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"BOS"</span>, <span class="st">"WAS"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>My_teams <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">teamID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">favs</span> <span class="op">~</span> <span class="st">"Favorite"</span>, <span class="co"># if -&gt; finds all favorite teams</span></span>
<span>    <span class="va">teamID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">dislike</span> <span class="op">~</span> <span class="st">"Dislike"</span>, <span class="co"># ifelse -&gt; fins all disliked teams after checking for favorite</span></span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Neutral"</span> <span class="co"># else -&gt; works as an "else" statement; all other values get assigned neutral</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]},{"label":["My_teams"],"name":[23],"type":["chr"],"align":["left"]}],"data":[{"1":"abercda01","2":"1871","3":"1","4":"TRO","5":"NA","6":"1","7":"4","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","23":"Neutral"},{"1":"addybo01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"118","8":"30","9":"32","10":"6","11":"0","12":"0","13":"13","14":"8","15":"1","16":"4","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","23":"Neutral"},{"1":"allisar01","2":"1871","3":"1","4":"CL1","5":"NA","6":"29","7":"137","8":"28","9":"40","10":"4","11":"5","12":"0","13":"19","14":"3","15":"1","16":"2","17":"5","18":"NA","19":"NA","20":"NA","21":"NA","22":"1","23":"Neutral"},{"1":"allisdo01","2":"1871","3":"1","4":"WS3","5":"NA","6":"27","7":"133","8":"28","9":"44","10":"10","11":"2","12":"2","13":"27","14":"1","15":"1","16":"0","17":"2","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","23":"Neutral"},{"1":"ansonca01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"120","8":"29","9":"39","10":"11","11":"3","12":"0","13":"16","14":"6","15":"2","16":"2","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","23":"Neutral"},{"1":"armstbo01","2":"1871","3":"1","4":"FW1","5":"NA","6":"12","7":"49","8":"9","9":"11","10":"2","11":"1","12":"0","13":"5","14":"0","15":"1","16":"0","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0","23":"Neutral"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="sec-mutate-ex" class="level3" data-number="30.10.3"><h3 data-number="30.10.3" class="anchored" data-anchor-id="sec-mutate-ex">
<span class="header-section-number">30.10.3</span> Exercise</h3>
<ul>
<li>
<p>Use the sample of the <code>diamonds</code> dataset to create a new dataset matches each of the following scenarios (<em>NOTE: each is a separate problem</em>):</p>
<ol type="a">
<li><p>A new column for <code>price_per_carat</code> that is calculated accordingly; place this new column first.</p></li>
<li>
<p>Two new columns, where only the columns involved are kept:</p>
<ul>
<li><p><code>within_budget</code> → An indicator (yes or no) for whether or not <code>price</code> <span class="math inline">\(\le\)</span> $1000;</p></li>
<li><p><code>my_style</code> → An indicator (yes or no) for whether or not <code>table</code> <span class="math inline">\(\ge\)</span> 50 mm <em>and</em> <code>cut</code> is one of “Very Good” or “Premium”;</p></li>
<li><p>Afterwards, can filter to see how many diamonds are potential purchase for you!</p></li>
</ul>
</li>
<li>
<p>A new column named that <strong>discretizes</strong> <code>price</code>, which means taking a numeric variable and turning it into <strong>ordinal</strong> variable (i.e.&nbsp;categories with implicit levels such as “bad”, “okay”, “good”); here are the specifications:</p>
<ul>
<li><p>New column name = <code>price_level</code>;</p></li>
<li><p>Levels → $0 $ <code>price</code> <span class="math inline">\(&lt; 500\)</span> = “inexpensive”, <span class="math inline">\(500 \le\)</span> <code>price</code> <span class="math inline">\(&lt; 2500\)</span> = “moderate”, $2500 $ <code>price</code> <span class="math inline">\(&lt; 10,000\)</span> = “expensive”, and <code>price</code> <span class="math inline">\(\ge 10,000\)</span> = “very expensive”;</p></li>
<li><p>Drop all unused columns.</p></li>
</ul>
</li>
<li><p>Save the dataset from (c) to a new object and use this to create a bar graph of <code>price_level</code>. Notice the order of the bars in the plot; does it make sense?</p></li>
<li>
<p>Modify the plot from (d) to have the correct order, here’s how:</p>
<ul>
<li><p>By default, ggplot2 will order character variables alphabetically. To specify the order we want, we need to convert <code>price_level</code> to a <em>factor</em> data type and explicitly define the order of the levels.</p></li>
<li><p>We can do the conversion directly in the ggplot <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> statement using <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> and specifying the <code>levels</code> option with the categories we made in (c) in the order we need.</p></li>
<li><p>Make sure to give a more readable axes label.</p></li>
</ul>
</li>
</ol>
</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">diamonds_sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span><span class="va">diamonds</span>, size <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="summarize-columns" class="level2" data-number="30.11"><h2 data-number="30.11" class="anchored" data-anchor-id="summarize-columns">
<span class="header-section-number">30.11</span> Summarize columns</h2>
<section id="summarize-basics" class="level3" data-number="30.11.1"><h3 data-number="30.11.1" class="anchored" data-anchor-id="summarize-basics">
<span class="header-section-number">30.11.1</span> summarize() basics</h3>
<ul>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> is used to calculate summary measures for columns of a dataframe.</p></li>
<li>
<p>Common functions used to summarize columns are measures of center and spread such as:</p>
<ul>
<li><p>Center → <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>, <code><a href="https://rdrr.io/r/stats/median.html">median()</a></code>;</p></li>
<li><p>Spread → <code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code>, <code><a href="https://rdrr.io/r/stats/IQR.html">IQR()</a></code>;</p></li>
<li><p>Range → <code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code>, <code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code>;</p></li>
<li><p>Count → <code><a href="https://dplyr.tidyverse.org/reference/context.html">n()</a></code> counts the number of observations and <code><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct()</a></code> counts the number of unique observations.</p></li>
</ul>
</li>
<li><p>Note that if the column contains <code>NA</code> values, many of these functions will not work as desired; so we should specify the option <code>na.rm = TRUE</code> to fix this.</p></li>
<li><p>We can compute multiple summaries (which can be creative as we would like), and <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> will return a dataframe with a column for each. Note that we can name the resulting columns as well.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>most_recent_year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span>,</span>
<span>                      total_hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">HR</span><span class="op">)</span>,</span>
<span>                      BA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">H</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">AB</span><span class="op">)</span>,</span>
<span>                      n_rows <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                      n_years <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["most_recent_year"],"name":[1],"type":["int"],"align":["right"]},{"label":["total_hr"],"name":[2],"type":["int"],"align":["right"]},{"label":["BA"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n_rows"],"name":[4],"type":["int"],"align":["right"]},{"label":["n_years"],"name":[5],"type":["int"],"align":["right"]}],"data":[{"1":"2022","2":"321224","3":"0.2609548","4":"112184","5":"152"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="summarize-advanced" class="level3" data-number="30.11.2"><h3 data-number="30.11.2" class="anchored" data-anchor-id="summarize-advanced">
<span class="header-section-number">30.11.2</span> summarize() advanced</h3>
<ul>
<li>Another pair of useful summaries are the <em>number</em> or <em>proportion</em> of observations that meet a certain condition. We can compute these using <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> and <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>, respectively.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>n_first_year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">yearID</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      n_30_hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">HR</span> <span class="op">&gt;=</span> <span class="fl">30</span><span class="op">)</span>,</span>
<span>                      prop_30_hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">HR</span> <span class="op">&gt;=</span> <span class="fl">30</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["n_first_year"],"name":[1],"type":["int"],"align":["right"]},{"label":["n_30_hr"],"name":[2],"type":["int"],"align":["right"]},{"label":["prop_30_hr"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"115","2":"1437","3":"0.01280931"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li><p>If we are computing the <em>same</em> summary statistic for several variables, we can shorten the command using <code>across(cols, function)</code>, which applies the same transformation to a selection of columns.</p></li>
<li><p>We can also combine this with our <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> helper functions such as <code><a href="https://tidyselect.r-lib.org/reference/where.html">where()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code>, etc.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">reds</span> <span class="op">&lt;-</span> <span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">teamID</span> <span class="op">==</span> <span class="st">"CIN"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">playerID</span>, <span class="va">teamID</span>, <span class="va">yearID</span>, <span class="va">AB</span><span class="op">:</span><span class="va">X3B</span><span class="op">)</span></span>
<span><span class="va">reds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">R</span>, <span class="va">H</span><span class="op">)</span>, <span class="va">sum</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["R"],"name":[1],"type":["int"],"align":["right"]},{"label":["H"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"90544","2":"182491"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">reds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">AB</span><span class="op">:</span><span class="va">X3B</span><span class="op">)</span>, <span class="va">sum</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["AB"],"name":[1],"type":["int"],"align":["right"]},{"label":["R"],"name":[2],"type":["int"],"align":["right"]},{"label":["H"],"name":[3],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[4],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[5],"type":["int"],"align":["right"]}],"data":[{"1":"699146","2":"90544","3":"182491","4":"30691","5":"6819"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">reds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"X"</span><span class="op">)</span>, <span class="va">sum</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["X2B"],"name":[1],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"30691","2":"6819"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="sec-summarize-ex" class="level3" data-number="30.11.3"><h3 data-number="30.11.3" class="anchored" data-anchor-id="sec-summarize-ex">
<span class="header-section-number">30.11.3</span> Exercise</h3>
<ul>
<li>
<p>Calculate the following summaries using the <code>diamonds</code> dataset (<em>NOTE: each is a separate problem</em>):</p>
<ol type="a">
<li><p>Median <code>price</code>, minimum <code>table</code>, maximum <code>depth</code> and average <code>price</code> per <code>carat</code>.</p></li>
<li><p>Mean of <code>price</code>, <code>table</code> and <code>depth</code>, as well as the total number of observations.</p></li>
<li><p><em>Number of</em> and the <em>proportion of</em> diamonds that have an “Ideal” <code>cut</code>.</p></li>
</ol>
</li>
</ul></section></section><section id="groups" class="level2" data-number="30.12"><h2 data-number="30.12" class="anchored" data-anchor-id="groups">
<span class="header-section-number">30.12</span> Groups</h2>
<section id="group_by-basics" class="level3" data-number="30.12.1"><h3 data-number="30.12.1" class="anchored" data-anchor-id="group_by-basics">
<span class="header-section-number">30.12.1</span> group_by() basics</h3>
<ul>
<li><p>As we saw above, <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code>, collapses the entire dataframe down into a single row based on some measure.</p></li>
<li><p>Often, however, we are interested in doing a group-wise analysis on our data, where we aggregate / summarize for each <strong>group</strong> (i.e.&nbsp;level of a variable).</p></li>
<li><p>The first step in this is to group the data with <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>, which divides the data into groups (i.e.&nbsp;keeps tracks of rows corresponding to each level). Doing this doesn’t actually change the data, it just changes the attributes of the dataframe (or tibble).</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">yearID</span>, <span class="va">teamID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"1","4":"TRO","5":"NA","6":"1","7":"4","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"addybo01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"118","8":"30","9":"32","10":"6","11":"0","12":"0","13":"13","14":"8","15":"1","16":"4","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"allisar01","2":"1871","3":"1","4":"CL1","5":"NA","6":"29","7":"137","8":"28","9":"40","10":"4","11":"5","12":"0","13":"19","14":"3","15":"1","16":"2","17":"5","18":"NA","19":"NA","20":"NA","21":"NA","22":"1"},{"1":"allisdo01","2":"1871","3":"1","4":"WS3","5":"NA","6":"27","7":"133","8":"28","9":"44","10":"10","11":"2","12":"2","13":"27","14":"1","15":"1","16":"0","17":"2","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"ansonca01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"120","8":"29","9":"39","10":"11","11":"3","12":"0","13":"16","14":"6","15":"2","16":"2","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"armstbo01","2":"1871","3":"1","4":"FW1","5":"NA","6":"12","7":"49","8":"9","9":"11","10":"2","11":"1","12":"0","13":"5","14":"0","15":"1","16":"0","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li><p>Now that the data is grouped, it will affect how the subsequent functions like <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>, etc. work on the data.</p></li>
<li><p>We can also group by multiple variables simply by specifying additional columns (order matters).</p></li>
<li><p>These “second-level” groups are <em>within</em> the first grouping levels, and so on for each additional (just like when ordering by multiple variables with <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>).</p></li>
</ul></section><section id="summarize-grouped-data" class="level3" data-number="30.12.2"><h3 data-number="30.12.2" class="anchored" data-anchor-id="summarize-grouped-data">
<span class="header-section-number">30.12.2</span> Summarize grouped data</h3>
<ul>
<li><p>Pairing <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> is one of the most important capabilities of <strong>dplyr</strong>.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> works the exact same as it did on ungrouped data, except that each summary is computed for <em>each group</em>, rather than for the <em>entire</em> dataset.</p></li>
<li><p>Because this still returns a dataframe, we can work with the result as well.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>total_hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">HR</span><span class="op">)</span>,</span>
<span>            n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["yearID"],"name":[1],"type":["int"],"align":["right"]},{"label":["total_hr"],"name":[2],"type":["int"],"align":["right"]},{"label":["n"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"2022","2":"5215","3":"1686"},{"1":"2021","2":"5944","3":"1708"},{"1":"2020","2":"2304","3":"1360"},{"1":"2019","2":"6776","3":"1569"},{"1":"2018","2":"5585","3":"1535"},{"1":"2017","2":"6105","3":"1494"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li>In a long pipeline, every time we apply <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> there is a different level of aggregation (i.e.&nbsp;collapsing over more and more).</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">yearID</span>, <span class="va">teamID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>total_hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">HR</span><span class="op">)</span>,</span>
<span>            n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">total_hr</span><span class="op">)</span>,</span>
<span>            n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["yearID"],"name":[1],"type":["int"],"align":["right"]},{"label":["sum(total_hr)"],"name":[2],"type":["int"],"align":["right"]},{"label":["n"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"1871","2":"47","3":"9"},{"1":"1872","2":"37","3":"11"},{"1":"1873","2":"47","3":"9"},{"1":"1874","2":"40","3":"8"},{"1":"1875","2":"40","3":"13"},{"1":"1876","2":"40","3":"8"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="sec-groups-ex" class="level3" data-number="30.12.3"><h3 data-number="30.12.3" class="anchored" data-anchor-id="sec-groups-ex">
<span class="header-section-number">30.12.3</span> Exercise</h3>
<ul>
<li>
<p>Calculate the following summaries using the <code>diamonds</code> dataset (<em>NOTE: each is a separate problem</em>):</p>
<ol type="a">
<li><p>Median <code>price</code> for each level of <code>color</code>.</p></li>
<li><p>Average <code>price</code> and how many diamonds this corresponds to for each <code>cut</code> and <code>clarity</code> combination.</p></li>
<li><p>Recreate the summary for the number of observations in each <code>cut</code> and <code>clarity</code> combination in (b) using the <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> function. Search the help page for tips.</p></li>
</ol>
</li>
</ul></section><section id="ungroup-basics" class="level3" data-number="30.12.4"><h3 data-number="30.12.4" class="anchored" data-anchor-id="ungroup-basics">
<span class="header-section-number">30.12.4</span> ungroup() basics</h3>
<ul>
<li><p>Notice above how the result after the first <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> is <em>still grouped</em>; however once we aggregate again (over the remaining group), the result is back to a normal ungrouped dataframe.</p></li>
<li><p>By default groups set by <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> stay active until all are aggregated over. Usually this won’t cause any problems, but if we wanted to remove the groups attribute, just use <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup()</a></code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">yearID</span>, <span class="va">teamID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>total_hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">HR</span><span class="op">)</span>,</span>
<span>            n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">total_hr</span><span class="op">)</span>,</span>
<span>            n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["sum(total_hr)"],"name":[1],"type":["int"],"align":["right"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"321224","2":"3015"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="by-argument" class="level3" data-number="30.12.5"><h3 data-number="30.12.5" class="anchored" data-anchor-id="by-argument">
<span class="header-section-number">30.12.5</span> .by argument</h3>
<ul>
<li>If we know that we only want the groups for <em>one operation</em> instead of the <em>entire chain</em>, we can specify the grouping in the specific function using <code>.by</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>.by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">yearID</span>, <span class="va">teamID</span><span class="op">)</span>,</span>
<span>            total_hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">HR</span><span class="op">)</span>,</span>
<span>            n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["yearID"],"name":[1],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[2],"type":["fct"],"align":["left"]},{"label":["total_hr"],"name":[3],"type":["int"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"1871","2":"TRO","3":"6","4":"12"},{"1":"1871","2":"RC1","3":"3","4":"11"},{"1":"1871","2":"CL1","3":"7","4":"13"},{"1":"1871","2":"WS3","3":"6","4":"15"},{"1":"1871","2":"FW1","3":"2","4":"18"},{"1":"1871","2":"BS1","3":"3","4":"11"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li>This is equivalent to <code>data %&gt;% group_by(col1, col2) %&gt;% summarize(...) %&gt;% ungroup()</code> as we saw before.</li>
</ul></section><section id="group_by-with-other-functions" class="level3" data-number="30.12.6"><h3 data-number="30.12.6" class="anchored" data-anchor-id="group_by-with-other-functions">
<span class="header-section-number">30.12.6</span> group_by() with other functions</h3>
<ul>
<li><p>We can also use <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> and <code>.by</code> on functions like <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> as well.</p></li>
<li><p>They perform the same way as <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> does for grouped data: the calculation or filtering will take place <em>for each group</em>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">playerID</span>, <span class="va">yearID</span>, <span class="va">HR</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>.by <span class="op">=</span> <span class="va">playerID</span>,</span>
<span>         avg_hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">HR</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["HR"],"name":[3],"type":["int"],"align":["right"]},{"label":["avg_hr"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"0","4":"0.0"},{"1":"addybo01","2":"1871","3":"0","4":"0.1"},{"1":"allisar01","2":"1871","3":"0","4":"0.2"},{"1":"allisdo01","2":"1871","3":"2","4":"0.2"},{"1":"ansonca01","2":"1871","3":"0","4":"3.6"},{"1":"armstbo01","2":"1871","3":"0","4":"0.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span>.by <span class="op">=</span> <span class="va">playerID</span>,</span>
<span>         <span class="va">yearID</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"1","4":"TRO","5":"NA","6":"1","7":"4","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"addybo01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"118","8":"30","9":"32","10":"6","11":"0","12":"0","13":"13","14":"8","15":"1","16":"4","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"allisar01","2":"1871","3":"1","4":"CL1","5":"NA","6":"29","7":"137","8":"28","9":"40","10":"4","11":"5","12":"0","13":"19","14":"3","15":"1","16":"2","17":"5","18":"NA","19":"NA","20":"NA","21":"NA","22":"1"},{"1":"allisdo01","2":"1871","3":"1","4":"WS3","5":"NA","6":"27","7":"133","8":"28","9":"44","10":"10","11":"2","12":"2","13":"27","14":"1","15":"1","16":"0","17":"2","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"ansonca01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"120","8":"29","9":"39","10":"11","11":"3","12":"0","13":"16","14":"6","15":"2","16":"2","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"armstbo01","2":"1871","3":"1","4":"FW1","5":"NA","6":"12","7":"49","8":"9","9":"11","10":"2","11":"1","12":"0","13":"5","14":"0","15":"1","16":"0","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="slice-and-slice_" class="level3" data-number="30.12.7"><h3 data-number="30.12.7" class="anchored" data-anchor-id="slice-and-slice_">
<span class="header-section-number">30.12.7</span> slice() and slice_*()</h3>
<ul>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice()</a></code> is used to select (filter to) certain row numbers of the dataset. In base R, we can use <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> and <code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code> to get the first or last <code>n</code> rows as well.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"1","4":"TRO","5":"NA","6":"1","7":"4","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"addybo01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"118","8":"30","9":"32","10":"6","11":"0","12":"0","13":"13","14":"8","15":"1","16":"4","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"allisar01","2":"1871","3":"1","4":"CL1","5":"NA","6":"29","7":"137","8":"28","9":"40","10":"4","11":"5","12":"0","13":"19","14":"3","15":"1","16":"2","17":"5","18":"NA","19":"NA","20":"NA","21":"NA","22":"1"},{"1":"allisdo01","2":"1871","3":"1","4":"WS3","5":"NA","6":"27","7":"133","8":"28","9":"44","10":"10","11":"2","12":"2","13":"27","14":"1","15":"1","16":"0","17":"2","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"ansonca01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"120","8":"29","9":"39","10":"11","11":"3","12":"0","13":"16","14":"6","15":"2","16":"2","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"abercda01","2":"1871","3":"1","4":"TRO","5":"NA","6":"1","7":"4","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"addybo01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"118","8":"30","9":"32","10":"6","11":"0","12":"0","13":"13","14":"8","15":"1","16":"4","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"allisar01","2":"1871","3":"1","4":"CL1","5":"NA","6":"29","7":"137","8":"28","9":"40","10":"4","11":"5","12":"0","13":"19","14":"3","15":"1","16":"2","17":"5","18":"NA","19":"NA","20":"NA","21":"NA","22":"1"},{"1":"allisdo01","2":"1871","3":"1","4":"WS3","5":"NA","6":"27","7":"133","8":"28","9":"44","10":"10","11":"2","12":"2","13":"27","14":"1","15":"1","16":"0","17":"2","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"ansonca01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"120","8":"29","9":"39","10":"11","11":"3","12":"0","13":"16","14":"6","15":"2","16":"2","17":"1","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">batting</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"zeuchtj01","2":"2022","3":"1","4":"CIN","5":"NL","6":"3","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"zimmebr01","2":"2022","3":"1","4":"TOR","5":"AL","6":"77","7":"76","8":"11","9":"8","10":"4","11":"0","12":"2","13":"3","14":"2","15":"1","16":"5","17":"33","18":"0","19":"5","20":"1","21":"0","22":"0"},{"1":"zimmebr01","2":"2022","3":"2","4":"PHI","5":"NL","6":"9","7":"16","8":"4","9":"4","10":"1","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"4","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"zimmebr01","2":"2022","3":"3","4":"TOR","5":"AL","6":"23","7":"13","8":"3","9":"1","10":"0","11":"0","12":"0","13":"2","14":"1","15":"1","16":"0","17":"8","18":"0","19":"1","20":"0","21":"0","22":"0"},{"1":"zimmebr02","2":"2022","3":"1","4":"BAL","5":"AL","6":"15","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"zuninmi01","2":"2022","3":"1","4":"TBA","5":"AL","6":"36","7":"115","8":"7","9":"17","10":"3","11":"0","12":"5","13":"16","14":"0","15":"0","16":"6","17":"46","18":"0","19":"1","20":"0","21":"1","22":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li>
<p>In the previous <code>filter(.by, ...)</code> example, we filtered to the minimum year <em>for each player</em>; this could also be accomplished with one of the variants of <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice()</a></code>, which are useful when working with <em>grouped data</em>:</p>
<ul>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_head()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_tail()</a></code> select the first or last rows.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_min()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max()</a></code> select rows with highest or lowest values of a variable.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_sample()</a></code> randomly selects rows.</p></li>
</ul>
</li>
<li><p>To specify how many rows, use the options <code>n</code> or <code>prop</code>.</p></li>
<li><p>Note these can all be used on <em>ungrouped data</em> as well; then the slice is based on the entire dataset.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">playerID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_min</a></span><span class="op">(</span>order_by <span class="op">=</span> <span class="va">yearID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"aardsda01","2":"2004","3":"1","4":"SFN","5":"NL","6":"11","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"aaronha01","2":"1954","3":"1","4":"ML1","5":"NL","6":"122","7":"468","8":"58","9":"131","10":"27","11":"6","12":"13","13":"69","14":"2","15":"2","16":"28","17":"39","18":"NA","19":"3","20":"6","21":"4","22":"13"},{"1":"aaronto01","2":"1962","3":"1","4":"ML1","5":"NL","6":"141","7":"334","8":"54","9":"77","10":"20","11":"2","12":"8","13":"38","14":"6","15":"0","16":"41","17":"58","18":"0","19":"0","20":"4","21":"3","22":"10"},{"1":"aasedo01","2":"1977","3":"1","4":"BOS","5":"AL","6":"13","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"abadan01","2":"2001","3":"1","4":"OAK","5":"AL","6":"1","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0"},{"1":"abadfe01","2":"2010","3":"1","4":"HOU","5":"NL","6":"22","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"1","18":"0","19":"0","20":"0","21":"0","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span><span class="va">HR</span>, by <span class="op">=</span> <span class="va">teamID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["playerID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["yearID"],"name":[2],"type":["int"],"align":["right"]},{"label":["stint"],"name":[3],"type":["int"],"align":["right"]},{"label":["teamID"],"name":[4],"type":["fct"],"align":["left"]},{"label":["lgID"],"name":[5],"type":["fct"],"align":["left"]},{"label":["G"],"name":[6],"type":["int"],"align":["right"]},{"label":["AB"],"name":[7],"type":["int"],"align":["right"]},{"label":["R"],"name":[8],"type":["int"],"align":["right"]},{"label":["H"],"name":[9],"type":["int"],"align":["right"]},{"label":["X2B"],"name":[10],"type":["int"],"align":["right"]},{"label":["X3B"],"name":[11],"type":["int"],"align":["right"]},{"label":["HR"],"name":[12],"type":["int"],"align":["right"]},{"label":["RBI"],"name":[13],"type":["int"],"align":["right"]},{"label":["SB"],"name":[14],"type":["int"],"align":["right"]},{"label":["CS"],"name":[15],"type":["int"],"align":["right"]},{"label":["BB"],"name":[16],"type":["int"],"align":["right"]},{"label":["SO"],"name":[17],"type":["int"],"align":["right"]},{"label":["IBB"],"name":[18],"type":["int"],"align":["right"]},{"label":["HBP"],"name":[19],"type":["int"],"align":["right"]},{"label":["SH"],"name":[20],"type":["int"],"align":["right"]},{"label":["SF"],"name":[21],"type":["int"],"align":["right"]},{"label":["GIDP"],"name":[22],"type":["int"],"align":["right"]}],"data":[{"1":"pikeli01","2":"1871","3":"1","4":"TRO","5":"NA","6":"28","7":"130","8":"43","9":"49","10":"10","11":"7","12":"4","13":"39","14":"3","15":"2","16":"5","17":"7","18":"NA","19":"NA","20":"NA","21":"NA","22":"2"},{"1":"stirega01","2":"1871","3":"1","4":"RC1","5":"NA","6":"25","7":"110","8":"23","9":"30","10":"4","11":"6","12":"2","13":"24","14":"3","15":"0","16":"7","17":"5","18":"NA","19":"NA","20":"NA","21":"NA","22":"2"},{"1":"bassjo01","2":"1871","3":"1","4":"CL1","5":"NA","6":"22","7":"89","8":"18","9":"27","10":"1","11":"10","12":"3","13":"18","14":"0","15":"1","16":"3","17":"4","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"suttoez01","2":"1871","3":"1","4":"CL1","5":"NA","6":"29","7":"128","8":"35","9":"45","10":"3","11":"7","12":"3","13":"23","14":"3","15":"1","16":"1","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"1"},{"1":"allisdo01","2":"1871","3":"1","4":"WS3","5":"NA","6":"27","7":"133","8":"28","9":"44","10":"10","11":"2","12":"2","13":"27","14":"1","15":"1","16":"0","17":"2","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"},{"1":"hallge01","2":"1871","3":"1","4":"WS3","5":"NA","6":"32","7":"136","8":"31","9":"40","10":"3","11":"3","12":"2","13":"17","14":"2","15":"1","16":"8","17":"0","18":"NA","19":"NA","20":"NA","21":"NA","22":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="sec-groups-ex2" class="level3" data-number="30.12.8"><h3 data-number="30.12.8" class="anchored" data-anchor-id="sec-groups-ex2">
<span class="header-section-number">30.12.8</span> Exercise</h3>
<ul>
<li>
<p>Perform the following using the <code>diamonds</code> dataset (<em>NOTE: each is a separate problem</em>):</p>
<ol type="a">
<li><p>Summarize the median <code>price</code> for each combination of <code>color</code> and <code>cut</code> using the <code>.by</code> argument.</p></li>
<li><p>Create a random sample (without replacement) that contains 5 of diamonds from each level of <code>cut</code>. Note that this is a great way to create a <em>representative</em> random sample from a population.</p></li>
<li>
<p>Copy your code from (b) and continue the pipeline to add a new column <code>avg_price_cut</code> that represents the average price for each level of <code>cut</code>. This enables us to compare each individual price to it’s respective average in the same dataset.</p>
<ul>
<li><p>Keep only the relevant columns and be sure that the resulting dataframe is no longer grouped.</p></li>
<li><p>See if you can do this two different ways.</p></li>
</ul>
</li>
</ol>
</li>
</ul></section></section><section id="application" class="level2" data-number="30.13"><h2 data-number="30.13" class="anchored" data-anchor-id="application">
<span class="header-section-number">30.13</span> Application</h2>
<section id="recreating" class="level3" data-number="30.13.1"><h3 data-number="30.13.1" class="anchored" data-anchor-id="recreating">
<span class="header-section-number">30.13.1</span> Recreating</h3>
<ul>
<li>Now we will return to the plots that were our goals, and more specifically the data transformations to recreate them.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div id="fig-539a35d47e664c97a50115a146a7f1bd-5" class="quarto-figure quarto-figure-center anchored" width="672" data-fig-pos="hold">
<figure class="quarto-float quarto-float-fig figure"><div>
<img src="notes-r-data-transformations_files/figure-html/griffey-plot-1.png" id="fig-539a35d47e664c97a50115a146a7f1bd-5" class="img-fluid figure-img" data-fig-pos="hold" width="672">
</div>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-539a35d47e664c97a50115a146a7f1bd-6" class="quarto-figure quarto-figure-center anchored" width="672" data-fig-pos="hold">
<figure class="quarto-float quarto-float-fig figure"><div>
<img src="notes-r-data-transformations_files/figure-html/best-hr-hitters-plot-1.png" id="fig-539a35d47e664c97a50115a146a7f1bd-6" class="img-fluid figure-img" data-fig-pos="hold" width="672">
</div>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># summarize over player and year (in case traded / multiple stints)</span></span>
<span><span class="va">season_stats</span> <span class="op">&lt;-</span> <span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>.by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">playerID</span>, <span class="va">yearID</span><span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">G</span>, <span class="va">HR</span><span class="op">)</span>, <span class="va">sum</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># summarize over year to get career data</span></span>
<span><span class="co"># -&gt; calculate total games, home runs, number of seasons and indicator if still playing</span></span>
<span><span class="va">career_stats</span> <span class="op">&lt;-</span> <span class="va">season_stats</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>.by <span class="op">=</span> <span class="va">playerID</span>,</span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">G</span>, <span class="va">HR</span><span class="op">)</span>, <span class="va">sum</span><span class="op">)</span>,</span>
<span>            Seasons <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            Status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span> <span class="op">==</span> <span class="fl">2022</span>, <span class="st">"Active"</span>, <span class="st">"Retired"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># plot just for KG jr.</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">season_stats</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">playerID</span> <span class="op">==</span> <span class="st">"griffke02"</span><span class="op">)</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">yearID</span>,</span>
<span>           y <span class="op">=</span> <span class="va">HR</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="va">G</span><span class="op">)</span>,</span>
<span>             size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Home runs per season by Ken Griffey Jr. - Visual 1"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Season"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Home runs"</span>,</span>
<span>       alpha <span class="op">=</span> <span class="st">"Games played"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-539a35d47e664c97a50115a146a7f1bd-7" class="quarto-figure quarto-figure-center anchored" width="672" data-fig-pos="hold">
<figure class="quarto-float quarto-float-fig figure"><div>
<img src="notes-r-data-transformations_files/figure-html/application-plots-1.png" id="fig-539a35d47e664c97a50115a146a7f1bd-7" class="img-fluid figure-img" data-fig-pos="hold" width="672">
</div>
</figure>
</div>
</div>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># plot just top 500 HR hitters, colored by active</span></span>
<span><span class="co"># -&gt; can switch between games or seasons on x axis</span></span>
<span><span class="va">career_stats</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span>order_by <span class="op">=</span> <span class="va">HR</span>,</span>
<span>            n <span class="op">=</span> <span class="fl">500</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Seasons</span>,</span>
<span>             y <span class="op">=</span> <span class="va">HR</span>,</span>
<span>             color <span class="op">=</span> <span class="va">Status</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Active"</span> <span class="op">=</span> <span class="st">"forestgreen"</span>,</span>
<span>                                <span class="st">"Retired"</span> <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Top 500 home run hitters - Visual 2"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Seasons"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Total home runs"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-539a35d47e664c97a50115a146a7f1bd-8" class="quarto-figure quarto-figure-center anchored" width="672" data-fig-pos="hold">
<figure class="quarto-float quarto-float-fig figure"><div>
<img src="notes-r-data-transformations_files/figure-html/application-plots-2.png" id="fig-539a35d47e664c97a50115a146a7f1bd-8" class="img-fluid figure-img" data-fig-pos="hold" width="672">
</div>
</figure>
</div>
</div>
</div>
</section><section id="sec-application-ex" class="level3" data-number="30.13.2"><h3 data-number="30.13.2" class="anchored" data-anchor-id="sec-application-ex">
<span class="header-section-number">30.13.2</span> Exercise</h3>
<ul>
<li>Study the plot below and determine how the data must have been structured behind the scenes. Then perform the necessary transformations and recreate the plot.</li>
</ul>
<p><em>HINTS:</em></p>
<p><em>- This will require several steps: think about aggregating the data first, then a separate operation to find the top 5 teams, then plot only the correct teams.</em></p>
<p><em>- To get the the <span class="math inline">\(x\)</span> scale to have the labels like shown, use <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous()</a></code> with the option <code>breaks</code> (which are the tick marks). Look into <code><a href="https://rdrr.io/r/base/seq.html">seq()</a></code> as a shortcut for specifying the numbers.</em></p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-539a35d47e664c97a50115a146a7f1bd-9" class="quarto-figure quarto-figure-center anchored" width="672" data-fig-pos="hold">
<figure class="quarto-float quarto-float-fig figure"><div>
<img src="notes-r-data-transformations_files/figure-html/top-teams-plot-1.png" id="fig-539a35d47e664c97a50115a146a7f1bd-9" class="img-fluid figure-img" data-fig-pos="hold" width="672">
</div>
</figure>
</div>
</div>
</div>
</section></section><section id="exercise-solutions" class="level2" data-number="30.14"><h2 data-number="30.14" class="anchored" data-anchor-id="exercise-solutions">
<span class="header-section-number">30.14</span> Exercise solutions</h2>
<p><a href="#sec-select-ex" class="quarto-xref">Exercise&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-select-ex</span></a></p>
<div class="cell">
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># three of many ways to do this</span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">carat</span>, <span class="va">cut</span>, <span class="va">color</span>, <span class="va">price</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span> <span class="co"># explicitly naming</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["carat"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cut"],"name":[2],"type":["ord"],"align":["right"]},{"label":["color"],"name":[3],"type":["ord"],"align":["right"]},{"label":["price"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"0.23","2":"Ideal","3":"E","4":"326"},{"1":"0.21","2":"Premium","3":"E","4":"326"},{"1":"0.23","2":"Good","3":"E","4":"327"},{"1":"0.29","2":"Premium","3":"I","4":"334"},{"1":"0.31","2":"Good","3":"J","4":"335"},{"1":"0.24","2":"Very Good","3":"J","4":"336"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">7</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span> <span class="co"># block selecting using column position</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["carat"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cut"],"name":[2],"type":["ord"],"align":["right"]},{"label":["color"],"name":[3],"type":["ord"],"align":["right"]},{"label":["price"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"0.23","2":"Ideal","3":"E","4":"326"},{"1":"0.21","2":"Premium","3":"E","4":"326"},{"1":"0.23","2":"Good","3":"E","4":"327"},{"1":"0.29","2":"Premium","3":"I","4":"334"},{"1":"0.31","2":"Good","3":"J","4":"335"},{"1":"0.24","2":"Very Good","3":"J","4":"336"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">carat</span><span class="op">:</span><span class="va">price</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">clarity</span>, <span class="va">depth</span>, <span class="va">table</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span> <span class="co"># block and removing some, less efficient in terms of keystrokes in this case </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["carat"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cut"],"name":[2],"type":["ord"],"align":["right"]},{"label":["color"],"name":[3],"type":["ord"],"align":["right"]},{"label":["price"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"0.23","2":"Ideal","3":"E","4":"326"},{"1":"0.21","2":"Premium","3":"E","4":"326"},{"1":"0.23","2":"Good","3":"E","4":"327"},{"1":"0.29","2":"Premium","3":"I","4":"334"},{"1":"0.31","2":"Good","3":"J","4":"335"},{"1":"0.24","2":"Very Good","3":"J","4":"336"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><a href="#sec-rename-ex" class="quarto-xref">Exercise&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-rename-ex</span></a></p>
<div class="cell">
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># a)</span></span>
<span><span class="va">iris</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>sepal_length <span class="op">=</span> <span class="va">Sepal.Length</span>, sepal_width <span class="op">=</span> <span class="va">Sepal.Width</span>,</span>
<span>                petal_length <span class="op">=</span> <span class="va">Petal.Length</span>, petal_width <span class="op">=</span> <span class="va">Petal.Width</span>,</span>
<span>                species <span class="op">=</span> <span class="va">Species</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">glimpse</span> <span class="co"># because iris is a dataframe, use glimpse() to nicely see preview </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 150
Columns: 5
$ sepal_length &lt;dbl&gt; 5.1, 4.9, 4.7, 4.6, 5.0, 5.4, 4.6, 5.0, 4.4, 4.9, 5.4, 4.…
$ sepal_width  &lt;dbl&gt; 3.5, 3.0, 3.2, 3.1, 3.6, 3.9, 3.4, 3.4, 2.9, 3.1, 3.7, 3.…
$ petal_length &lt;dbl&gt; 1.4, 1.4, 1.3, 1.5, 1.4, 1.7, 1.4, 1.5, 1.4, 1.5, 1.5, 1.…
$ petal_width  &lt;dbl&gt; 0.2, 0.2, 0.2, 0.2, 0.2, 0.4, 0.3, 0.2, 0.2, 0.1, 0.2, 0.…
$ species      &lt;fct&gt; setosa, setosa, setosa, setosa, setosa, setosa, setosa, s…</code></pre>
</div>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># b) </span></span>
<span><span class="va">iris</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span>sepal_length <span class="op">=</span> <span class="va">Sepal.Length</span>, species <span class="op">=</span> <span class="va">Species</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">glimpse</span> <span class="co"># use select() to rename and drop other columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 150
Columns: 2
$ sepal_length &lt;dbl&gt; 5.1, 4.9, 4.7, 4.6, 5.0, 5.4, 4.6, 5.0, 4.4, 4.9, 5.4, 4.…
$ species      &lt;fct&gt; setosa, setosa, setosa, setosa, setosa, setosa, setosa, s…</code></pre>
</div>
</div>
<p><a href="#sec-relocate-ex" class="quarto-xref">Exercise&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-relocate-ex</span></a></p>
<div class="cell">
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># a)</span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">price</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["price"],"name":[1],"type":["int"],"align":["right"]},{"label":["carat"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["cut"],"name":[3],"type":["ord"],"align":["right"]},{"label":["color"],"name":[4],"type":["ord"],"align":["right"]},{"label":["clarity"],"name":[5],"type":["ord"],"align":["right"]},{"label":["depth"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["table"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["x"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["y"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["z"],"name":[10],"type":["dbl"],"align":["right"]}],"data":[{"1":"326","2":"0.23","3":"Ideal","4":"E","5":"SI2","6":"61.5","7":"55","8":"3.95","9":"3.98","10":"2.43"},{"1":"326","2":"0.21","3":"Premium","4":"E","5":"SI1","6":"59.8","7":"61","8":"3.89","9":"3.84","10":"2.31"},{"1":"327","2":"0.23","3":"Good","4":"E","5":"VS1","6":"56.9","7":"65","8":"4.05","9":"4.07","10":"2.31"},{"1":"334","2":"0.29","3":"Premium","4":"I","5":"VS2","6":"62.4","7":"58","8":"4.20","9":"4.23","10":"2.63"},{"1":"335","2":"0.31","3":"Good","4":"J","5":"SI2","6":"63.3","7":"58","8":"4.34","9":"4.35","10":"2.75"},{"1":"336","2":"0.24","3":"Very Good","4":"J","5":"VVS2","6":"62.8","7":"57","8":"3.94","9":"3.96","10":"2.48"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># b) </span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span>, .after <span class="op">=</span> <span class="va">cut</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["carat"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cut"],"name":[2],"type":["ord"],"align":["right"]},{"label":["x"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["y"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["z"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["color"],"name":[6],"type":["ord"],"align":["right"]},{"label":["clarity"],"name":[7],"type":["ord"],"align":["right"]},{"label":["depth"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["table"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["price"],"name":[10],"type":["int"],"align":["right"]}],"data":[{"1":"0.23","2":"Ideal","3":"3.95","4":"3.98","5":"2.43","6":"E","7":"SI2","8":"61.5","9":"55","10":"326"},{"1":"0.21","2":"Premium","3":"3.89","4":"3.84","5":"2.31","6":"E","7":"SI1","8":"59.8","9":"61","10":"326"},{"1":"0.23","2":"Good","3":"4.05","4":"4.07","5":"2.31","6":"E","7":"VS1","8":"56.9","9":"65","10":"327"},{"1":"0.29","2":"Premium","3":"4.20","4":"4.23","5":"2.63","6":"I","7":"VS2","8":"62.4","9":"58","10":"334"},{"1":"0.31","2":"Good","3":"4.34","4":"4.35","5":"2.75","6":"J","7":"SI2","8":"63.3","9":"58","10":"335"},{"1":"0.24","2":"Very Good","3":"3.94","4":"3.96","5":"2.48","6":"J","7":"VVS2","8":"62.8","9":"57","10":"336"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span>, .before <span class="op">=</span> <span class="va">color</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["carat"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cut"],"name":[2],"type":["ord"],"align":["right"]},{"label":["x"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["y"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["z"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["color"],"name":[6],"type":["ord"],"align":["right"]},{"label":["clarity"],"name":[7],"type":["ord"],"align":["right"]},{"label":["depth"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["table"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["price"],"name":[10],"type":["int"],"align":["right"]}],"data":[{"1":"0.23","2":"Ideal","3":"3.95","4":"3.98","5":"2.43","6":"E","7":"SI2","8":"61.5","9":"55","10":"326"},{"1":"0.21","2":"Premium","3":"3.89","4":"3.84","5":"2.31","6":"E","7":"SI1","8":"59.8","9":"61","10":"326"},{"1":"0.23","2":"Good","3":"4.05","4":"4.07","5":"2.31","6":"E","7":"VS1","8":"56.9","9":"65","10":"327"},{"1":"0.29","2":"Premium","3":"4.20","4":"4.23","5":"2.63","6":"I","7":"VS2","8":"62.4","9":"58","10":"334"},{"1":"0.31","2":"Good","3":"4.34","4":"4.35","5":"2.75","6":"J","7":"SI2","8":"63.3","9":"58","10":"335"},{"1":"0.24","2":"Very Good","3":"3.94","4":"3.96","5":"2.48","6":"J","7":"VVS2","8":"62.8","9":"57","10":"336"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><a href="#sec-filter-ex" class="quarto-xref">Exercise&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-filter-ex</span></a></p>
<div class="cell">
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># a)</span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">price</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">price</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["carat"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cut"],"name":[2],"type":["ord"],"align":["right"]},{"label":["color"],"name":[3],"type":["ord"],"align":["right"]},{"label":["clarity"],"name":[4],"type":["ord"],"align":["right"]},{"label":["depth"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["table"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["price"],"name":[7],"type":["int"],"align":["right"]},{"label":["x"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["y"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["z"],"name":[10],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.23","2":"Ideal","3":"E","4":"SI2","5":"61.5","6":"55","7":"326","8":"3.95","9":"3.98","10":"2.43"},{"1":"0.21","2":"Premium","3":"E","4":"SI1","5":"59.8","6":"61","7":"326","8":"3.89","9":"3.84","10":"2.31"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># b) </span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">carat</span> <span class="op">&gt;=</span> <span class="fl">1</span>, <span class="va">carat</span> <span class="op">&lt;=</span> <span class="fl">2</span>, <span class="va">cut</span> <span class="op">!=</span> <span class="st">"Premium"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["carat"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cut"],"name":[2],"type":["ord"],"align":["right"]},{"label":["color"],"name":[3],"type":["ord"],"align":["right"]},{"label":["clarity"],"name":[4],"type":["ord"],"align":["right"]},{"label":["depth"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["table"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["price"],"name":[7],"type":["int"],"align":["right"]},{"label":["x"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["y"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["z"],"name":[10],"type":["dbl"],"align":["right"]}],"data":[{"1":"1.17","2":"Very Good","3":"J","4":"I1","5":"60.2","6":"61","7":"2774","8":"6.83","9":"6.90","10":"4.13"},{"1":"1.01","2":"Fair","3":"E","4":"I1","5":"64.5","6":"58","7":"2788","8":"6.29","9":"6.21","10":"4.03"},{"1":"1.05","2":"Very Good","3":"J","4":"SI2","5":"63.2","6":"56","7":"2789","8":"6.49","9":"6.45","10":"4.09"},{"1":"1.05","2":"Fair","3":"J","4":"SI2","5":"65.8","6":"59","7":"2789","8":"6.41","9":"6.27","10":"4.18"},{"1":"1.01","2":"Fair","3":"E","4":"SI2","5":"67.4","6":"60","7":"2797","8":"6.19","9":"6.05","10":"4.13"},{"1":"1.00","2":"Fair","3":"G","4":"I1","5":"66.4","6":"59","7":"2808","8":"6.16","9":"6.09","10":"4.07"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html">between</a></span><span class="op">(</span><span class="va">carat</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, <span class="va">cut</span> <span class="op">!=</span> <span class="st">"Premium"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span> <span class="co"># equivalent (shorter) way</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["carat"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cut"],"name":[2],"type":["ord"],"align":["right"]},{"label":["color"],"name":[3],"type":["ord"],"align":["right"]},{"label":["clarity"],"name":[4],"type":["ord"],"align":["right"]},{"label":["depth"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["table"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["price"],"name":[7],"type":["int"],"align":["right"]},{"label":["x"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["y"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["z"],"name":[10],"type":["dbl"],"align":["right"]}],"data":[{"1":"1.17","2":"Very Good","3":"J","4":"I1","5":"60.2","6":"61","7":"2774","8":"6.83","9":"6.90","10":"4.13"},{"1":"1.01","2":"Fair","3":"E","4":"I1","5":"64.5","6":"58","7":"2788","8":"6.29","9":"6.21","10":"4.03"},{"1":"1.05","2":"Very Good","3":"J","4":"SI2","5":"63.2","6":"56","7":"2789","8":"6.49","9":"6.45","10":"4.09"},{"1":"1.05","2":"Fair","3":"J","4":"SI2","5":"65.8","6":"59","7":"2789","8":"6.41","9":"6.27","10":"4.18"},{"1":"1.01","2":"Fair","3":"E","4":"SI2","5":"67.4","6":"60","7":"2797","8":"6.19","9":"6.05","10":"4.13"},{"1":"1.00","2":"Fair","3":"G","4":"I1","5":"66.4","6":"59","7":"2808","8":"6.16","9":"6.09","10":"4.07"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># c)</span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">cut</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Fair"</span>, <span class="st">"Good"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">price</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["carat"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cut"],"name":[2],"type":["ord"],"align":["right"]},{"label":["color"],"name":[3],"type":["ord"],"align":["right"]},{"label":["clarity"],"name":[4],"type":["ord"],"align":["right"]},{"label":["depth"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["table"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["price"],"name":[7],"type":["int"],"align":["right"]},{"label":["x"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["y"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["z"],"name":[10],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.23","2":"Good","3":"E","4":"VS1","5":"56.9","6":"65","7":"327","8":"4.05","9":"4.07","10":"2.31"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><a href="#sec-arrange-ex" class="quarto-xref">Exercise&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-arrange-ex</span></a></p>
<div class="cell">
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">diamonds_sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span><span class="va">diamonds</span>, size <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">cut</span>, <span class="va">price</span>, <span class="va">carat</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span>
<span><span class="va">diamonds_sample</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">cut</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["cut"],"name":[1],"type":["ord"],"align":["right"]},{"label":["price"],"name":[2],"type":["int"],"align":["right"]},{"label":["carat"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Good","2":"6246","3":"1.56"},{"1":"Very Good","2":"521","3":"0.24"},{"1":"Premium","2":"4077","3":"1.00"},{"1":"Premium","2":"746","3":"0.37"},{"1":"Premium","2":"630","3":"0.30"},{"1":"Ideal","2":"2568","3":"0.60"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><a href="#sec-distinct-ex" class="quarto-xref">Exercise&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-distinct-ex</span></a></p>
<div class="cell">
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># a)</span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">cut</span>, <span class="va">color</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">cut</span>, <span class="va">color</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span> <span class="co"># can arrange to see combos more clearly</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["cut"],"name":[1],"type":["ord"],"align":["right"]},{"label":["color"],"name":[2],"type":["ord"],"align":["right"]}],"data":[{"1":"Fair","2":"D"},{"1":"Fair","2":"E"},{"1":"Fair","2":"F"},{"1":"Fair","2":"G"},{"1":"Fair","2":"H"},{"1":"Fair","2":"I"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># b) </span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">color</span>, <span class="va">cut</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># order doesn't matter in distinct()</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">cut</span>, <span class="va">color</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span> <span class="co"># but order does matter for arrange()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["carat"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cut"],"name":[2],"type":["ord"],"align":["right"]},{"label":["color"],"name":[3],"type":["ord"],"align":["right"]},{"label":["clarity"],"name":[4],"type":["ord"],"align":["right"]},{"label":["depth"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["table"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["price"],"name":[7],"type":["int"],"align":["right"]},{"label":["x"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["y"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["z"],"name":[10],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.75","2":"Fair","3":"D","4":"SI2","5":"64.6","6":"57","7":"2848","8":"5.74","9":"5.72","10":"3.70"},{"1":"0.22","2":"Fair","3":"E","4":"VS2","5":"65.1","6":"61","7":"337","8":"3.87","9":"3.78","10":"2.49"},{"1":"0.96","2":"Fair","3":"F","4":"SI2","5":"66.3","6":"62","7":"2759","8":"6.27","9":"5.95","10":"4.07"},{"1":"0.84","2":"Fair","3":"G","4":"SI1","5":"55.1","6":"67","7":"2782","8":"6.39","9":"6.20","10":"3.47"},{"1":"0.91","2":"Fair","3":"H","4":"SI2","5":"64.4","6":"57","7":"2763","8":"6.11","9":"6.09","10":"3.93"},{"1":"0.90","2":"Fair","3":"I","4":"SI1","5":"67.3","6":"59","7":"2804","8":"5.93","9":"5.84","10":"3.96"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># c)</span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># arrange by highest to lowest price BEFORE, that way the FIRST occurrence of each combo that is kept by distinct() is the highest priced</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">cut</span>, <span class="va">color</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">cut</span>, <span class="va">color</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["carat"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cut"],"name":[2],"type":["ord"],"align":["right"]},{"label":["color"],"name":[3],"type":["ord"],"align":["right"]},{"label":["clarity"],"name":[4],"type":["ord"],"align":["right"]},{"label":["depth"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["table"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["price"],"name":[7],"type":["int"],"align":["right"]},{"label":["x"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["y"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["z"],"name":[10],"type":["dbl"],"align":["right"]}],"data":[{"1":"2.02","2":"Fair","3":"D","4":"SI1","5":"65.0","6":"55","7":"16386","8":"7.94","9":"7.84","10":"5.13"},{"1":"1.50","2":"Fair","3":"E","4":"VS1","5":"65.4","6":"57","7":"15584","8":"7.14","9":"7.07","10":"4.65"},{"1":"1.93","2":"Fair","3":"F","4":"VS1","5":"58.9","6":"62","7":"17995","8":"8.17","9":"7.97","10":"4.75"},{"1":"2.01","2":"Fair","3":"G","4":"SI1","5":"70.6","6":"64","7":"18574","8":"7.43","9":"6.64","10":"4.69"},{"1":"2.02","2":"Fair","3":"H","4":"VS2","5":"64.5","6":"57","7":"18565","8":"8.00","9":"7.95","10":"5.14"},{"1":"3.01","2":"Fair","3":"I","4":"SI2","5":"65.8","6":"56","7":"18242","8":"8.99","9":"8.94","10":"5.90"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><a href="#sec-mutate-ex" class="quarto-xref">Exercise&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-mutate-ex</span></a></p>
<div class="cell">
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># create diamonds sample</span></span>
<span><span class="va">diamonds_sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span><span class="va">diamonds</span>, size <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># a)</span></span>
<span><span class="va">diamonds_sample</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>price_per_carat <span class="op">=</span> <span class="va">price</span> <span class="op">/</span> <span class="va">carat</span>, </span>
<span>                    .before <span class="op">=</span> <span class="va">carat</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["price_per_carat"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["carat"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["cut"],"name":[3],"type":["ord"],"align":["right"]},{"label":["color"],"name":[4],"type":["ord"],"align":["right"]},{"label":["clarity"],"name":[5],"type":["ord"],"align":["right"]},{"label":["depth"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["table"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["price"],"name":[8],"type":["int"],"align":["right"]},{"label":["x"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["y"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["z"],"name":[11],"type":["dbl"],"align":["right"]}],"data":[{"1":"3079.612","2":"1.03","3":"Ideal","4":"H","5":"I1","6":"61.5","7":"57","8":"3172","9":"6.48","10":"6.52","11":"4.00"},{"1":"6693.388","2":"2.42","3":"Premium","4":"J","5":"SI2","6":"58.5","7":"59","8":"16198","9":"8.85","10":"8.82","11":"5.17"},{"1":"3382.500","2":"0.40","3":"Ideal","4":"D","5":"VVS2","6":"60.9","7":"57","8":"1353","9":"4.74","10":"4.78","11":"2.90"},{"1":"4256.522","2":"0.92","3":"Good","4":"D","5":"SI2","6":"63.9","7":"55","8":"3916","9":"6.14","10":"6.09","11":"3.91"},{"1":"1796.774","2":"0.31","3":"Ideal","4":"I","5":"VVS1","6":"61.6","7":"55","8":"557","9":"4.36","10":"4.41","11":"2.70"},{"1":"9318.103","2":"1.16","3":"Premium","4":"F","5":"VVS1","6":"60.4","7":"60","8":"10809","9":"6.90","10":"6.77","11":"4.13"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># b) </span></span>
<span><span class="va">diamonds_sample</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>within_budget <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">price</span> <span class="op">&lt;=</span> <span class="fl">1000</span>,</span>
<span>                                <span class="st">"yes"</span>,</span>
<span>                                <span class="st">"no"</span><span class="op">)</span>,</span>
<span>         my_style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">table</span> <span class="op">&gt;=</span> <span class="fl">50</span> <span class="op">&amp;</span> <span class="va">cut</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Very Good"</span>, <span class="st">"Ideal"</span><span class="op">)</span>,</span>
<span>                           <span class="st">"yes"</span>,</span>
<span>                           <span class="st">"no"</span><span class="op">)</span>,</span>
<span>         .keep <span class="op">=</span> <span class="st">"used"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">within_budget</span> <span class="op">==</span> <span class="st">"yes"</span>,</span>
<span>         <span class="va">my_style</span> <span class="op">==</span> <span class="st">"yes"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["cut"],"name":[1],"type":["ord"],"align":["right"]},{"label":["table"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["price"],"name":[3],"type":["int"],"align":["right"]},{"label":["within_budget"],"name":[4],"type":["chr"],"align":["left"]},{"label":["my_style"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"Ideal","2":"55","3":"557","4":"yes","5":"yes"},{"1":"Ideal","2":"56","3":"694","4":"yes","5":"yes"},{"1":"Ideal","2":"56","3":"917","4":"yes","5":"yes"},{"1":"Ideal","2":"55","3":"514","4":"yes","5":"yes"},{"1":"Ideal","2":"55","3":"608","4":"yes","5":"yes"},{"1":"Ideal","2":"55","3":"421","4":"yes","5":"yes"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># c)</span></span>
<span><span class="va">diamonds_prices</span> <span class="op">&lt;-</span> <span class="va">diamonds_sample</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>price_level <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">price</span> <span class="op">&lt;</span> <span class="fl">500</span> <span class="op">~</span> <span class="st">"inexpensive"</span>, <span class="co"># natural lower bound of zero, so don't need to check &gt;= 0</span></span>
<span>    <span class="va">price</span> <span class="op">&lt;</span> <span class="fl">2500</span> <span class="op">~</span> <span class="st">"moderate"</span>, <span class="co"># case_when() already checked &lt; 500, so everything remaining is &gt;= 500; so don't need to check that again</span></span>
<span>    <span class="va">price</span> <span class="op">&lt;</span> <span class="fl">10000</span> <span class="op">~</span> <span class="st">"expensive"</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"very expensive"</span> <span class="co"># everything that is left is &gt;= 10.000</span></span>
<span>  <span class="op">)</span>,</span>
<span>  .keep <span class="op">=</span> <span class="st">"used"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># d)</span></span>
<span><span class="va">diamonds_prices</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">price_level</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-539a35d47e664c97a50115a146a7f1bd-10" class="quarto-figure quarto-figure-center anchored" width="672" data-fig-pos="hold">
<figure class="quarto-float quarto-float-fig figure"><div>
<img src="notes-r-data-transformations_files/figure-html/mutate-ex-solution-1.png" id="fig-539a35d47e664c97a50115a146a7f1bd-10" class="img-fluid figure-img" data-fig-pos="hold" width="672">
</div>
</figure>
</div>
</div>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># order of bars jumble the intuitive order in terms of how expensive</span></span>
<span></span>
<span><span class="co"># e)</span></span>
<span><span class="va">price_levels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"inexpensive"</span>, <span class="st">"moderate"</span>, <span class="st">"expensive"</span>, <span class="st">"very expensive"</span><span class="op">)</span> <span class="co"># define levels in order</span></span>
<span><span class="va">diamonds_prices</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">price_level</span>, levels <span class="op">=</span> <span class="va">price_levels</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co"># convert to factor (with correct order)</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Diamond price level"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-539a35d47e664c97a50115a146a7f1bd-11" class="quarto-figure quarto-figure-center anchored" width="672" data-fig-pos="hold">
<figure class="quarto-float quarto-float-fig figure"><div>
<img src="notes-r-data-transformations_files/figure-html/mutate-ex-solution-2.png" id="fig-539a35d47e664c97a50115a146a7f1bd-11" class="img-fluid figure-img" data-fig-pos="hold" width="672">
</div>
</figure>
</div>
</div>
</div>
<p><a href="#sec-summarize-ex" class="quarto-xref">Exercise&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-summarize-ex</span></a></p>
<div class="cell">
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># a)</span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>med_price <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">price</span><span class="op">)</span>,</span>
<span>                       min_table <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">table</span><span class="op">)</span>,</span>
<span>                       max_depth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">depth</span><span class="op">)</span>,</span>
<span>                       avg_price_carat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">price</span> <span class="op">/</span> <span class="va">carat</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["med_price"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["min_table"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["max_depth"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["avg_price_carat"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"2401","2":"43","3":"79","4":"4008.395"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># b) </span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">price</span>, <span class="va">table</span>, <span class="va">depth</span><span class="op">)</span>, <span class="va">mean</span><span class="op">)</span>,</span>
<span>                       n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["price"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["table"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["depth"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"3932.8","2":"57.45718","3":"61.7494","4":"53940"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># c)</span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>n_ideal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">cut</span> <span class="op">==</span> <span class="st">"Ideal"</span><span class="op">)</span>,</span>
<span>                       prop_ideal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">cut</span> <span class="op">==</span> <span class="st">"Ideal"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["n_ideal"],"name":[1],"type":["int"],"align":["right"]},{"label":["prop_ideal"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"21551","2":"0.3995365"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><a href="#sec-groups-ex" class="quarto-xref">Exercise&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-groups-ex</span></a></p>
<div class="cell">
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># a)</span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">color</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">price</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["color"],"name":[1],"type":["ord"],"align":["right"]},{"label":["median(price)"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"D","2":"1838.0"},{"1":"E","2":"1739.0"},{"1":"F","2":"2343.5"},{"1":"G","2":"2242.0"},{"1":"H","2":"3460.0"},{"1":"I","2":"3730.0"},{"1":"J","2":"4234.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># b) </span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">cut</span>, <span class="va">clarity</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">price</span><span class="op">)</span>,</span>
<span>            n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["cut"],"name":[1],"type":["ord"],"align":["right"]},{"label":["clarity"],"name":[2],"type":["ord"],"align":["right"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"Fair","2":"I1","3":"3703.533","4":"210"},{"1":"Fair","2":"SI2","3":"5173.916","4":"466"},{"1":"Fair","2":"SI1","3":"4208.279","4":"408"},{"1":"Fair","2":"VS2","3":"4174.724","4":"261"},{"1":"Fair","2":"VS1","3":"4165.141","4":"170"},{"1":"Fair","2":"VVS2","3":"3349.768","4":"69"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># c)</span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">cut</span>, <span class="va">clarity</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["cut"],"name":[1],"type":["ord"],"align":["right"]},{"label":["clarity"],"name":[2],"type":["ord"],"align":["right"]},{"label":["n"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"Fair","2":"I1","3":"210"},{"1":"Fair","2":"SI2","3":"466"},{"1":"Fair","2":"SI1","3":"408"},{"1":"Fair","2":"VS2","3":"261"},{"1":"Fair","2":"VS1","3":"170"},{"1":"Fair","2":"VVS2","3":"69"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><a href="#sec-groups-ex2" class="quarto-xref">Exercise&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-groups-ex2</span></a></p>
<div class="cell">
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># a)</span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>med_price <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">price</span><span class="op">)</span>,</span>
<span>            .by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">color</span>, <span class="va">cut</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["color"],"name":[1],"type":["ord"],"align":["right"]},{"label":["cut"],"name":[2],"type":["ord"],"align":["right"]},{"label":["med_price"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"E","2":"Ideal","3":"1437"},{"1":"E","2":"Premium","3":"1928"},{"1":"E","2":"Good","3":"2420"},{"1":"I","2":"Premium","3":"4640"},{"1":"J","2":"Good","3":"3733"},{"1":"J","2":"Very Good","3":"4113"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># b) </span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">cut</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">cut</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["cut"],"name":[1],"type":["ord"],"align":["right"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Fair","2":"5"},{"1":"Good","2":"5"},{"1":"Very Good","2":"5"},{"1":"Premium","2":"5"},{"1":"Ideal","2":"5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># c)</span></span>
<span><span class="co"># way 1</span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">cut</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>avg_price_cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">price</span><span class="op">)</span>,</span>
<span>         .keep <span class="op">=</span> <span class="st">"used"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="va">ungroup</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["cut"],"name":[1],"type":["ord"],"align":["right"]},{"label":["price"],"name":[2],"type":["int"],"align":["right"]},{"label":["avg_price_cut"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Fair","2":"3676","3":"2942.8"},{"1":"Fair","2":"1651","3":"2942.8"},{"1":"Fair","2":"3750","3":"2942.8"},{"1":"Fair","2":"2812","3":"2942.8"},{"1":"Fair","2":"2825","3":"2942.8"},{"1":"Good","2":"914","3":"3053.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># way 2</span></span>
<span><span class="va">diamonds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span>,</span>
<span>               by <span class="op">=</span> <span class="va">cut</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>avg_price_cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">price</span><span class="op">)</span>,</span>
<span>         .by <span class="op">=</span> <span class="va">cut</span>,</span>
<span>         .keep <span class="op">=</span> <span class="st">"used"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["cut"],"name":[1],"type":["ord"],"align":["right"]},{"label":["price"],"name":[2],"type":["int"],"align":["right"]},{"label":["avg_price_cut"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Ideal","2":"1444","3":"6490.4"},{"1":"Ideal","2":"2275","3":"6490.4"},{"1":"Ideal","2":"4239","3":"6490.4"},{"1":"Ideal","2":"17009","3":"6490.4"},{"1":"Ideal","2":"7485","3":"6490.4"},{"1":"Premium","2":"6291","3":"3896.8"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><a href="#sec-application-ex" class="quarto-xref">Exercise&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-application-ex</span></a></p>
<div class="cell">
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># summarize HRs per team and get recent data</span></span>
<span><span class="va">team_stats</span> <span class="op">&lt;-</span> <span class="va">batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>total_hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">HR</span><span class="op">)</span>,</span>
<span>            .by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">teamID</span>, <span class="va">yearID</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">yearID</span> <span class="op">&gt;=</span> <span class="fl">2012</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># find the teams with most HRs over this time period</span></span>
<span><span class="va">most_hr</span> <span class="op">&lt;-</span> <span class="va">team_stats</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>total_hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">total_hr</span><span class="op">)</span>,</span>
<span>            .by <span class="op">=</span> <span class="va">teamID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span><span class="va">total_hr</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract team names to use in filter()</span></span>
<span><span class="va">most_hr_teams</span> <span class="op">&lt;-</span> <span class="va">most_hr</span><span class="op">$</span><span class="va">teamID</span> </span>
<span></span>
<span><span class="co"># get teams of interest and create line plot of HRs over time</span></span>
<span><span class="va">team_stats</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">teamID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">most_hr_teams</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">.</span>,</span>
<span>         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">yearID</span>,</span>
<span>             y <span class="op">=</span> <span class="va">total_hr</span>,</span>
<span>             color <span class="op">=</span> <span class="va">teamID</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">2012</span>, to <span class="op">=</span> <span class="fl">2022</span>, by <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Top 5 home run hitting teams over past 10 years"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Season"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Total HRs"</span>,</span>
<span>       color <span class="op">=</span> <span class="st">"Team"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-539a35d47e664c97a50115a146a7f1bd-12" class="quarto-figure quarto-figure-center anchored" width="672" data-fig-pos="hold">
<figure class="quarto-float quarto-float-fig figure"><div>
<img src="notes-r-data-transformations_files/figure-html/application-solution-1.png" id="fig-539a35d47e664c97a50115a146a7f1bd-12" class="img-fluid figure-img" data-fig-pos="hold" width="672">
</div>
</figure>
</div>
</div>
</div>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        console.log("RESIZE");
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./hw-r-visualizations.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">HW - Visualizations</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./hw-r-data-transformations.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">HW - Data Transformations</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>