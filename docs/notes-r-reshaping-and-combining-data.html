<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.545">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>DANA 320 –Data Visualization - 32&nbsp; Notes – Reshaping and Combining Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./lab-r-data-cleaning.html" rel="next">
<link href="./hw-r-data-transformations.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./module-r.html">R</a></li><li class="breadcrumb-item"><a href="./notes-r-reshaping-and-combining-data.html"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Notes – Reshaping and Combining Data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./module-r.html">R</a></li><li class="breadcrumb-item"><a href="./notes-r-reshaping-and-combining-data.html"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Notes – Reshaping and Combining Data</span></a></li></ol></nav><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title"><span id="sec-notes-reshaping-and-combining-data" class="quarto-section-identifier"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Notes – Reshaping and Combining Data</span></span></h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">DANA 320 –<br>Data Visualization</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./module-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-meet-your-instructor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Meet Your Instructor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Syllabus</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-how-to-navigate-this-course.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">How to Navigate this Course</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-to-data-viz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introduction to Data Visualization</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./module-readings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Readings</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reading-assignments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Reading Assignments</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./module-excel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Excel</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./install-excel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Install Excel</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-to-excel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Introduction to Excel</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-excel-basic-charts-in-excel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Notes – Basic Charts in Excel</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-excel-more-charts-in-excel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Lab – More Charts in Excel</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-excel-plots-for-analyses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">HW – Plots for Analyses</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-excel-reports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Notes – Reports</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-excel-pivot-tables-and-combining-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Lab – Pivot Tables and Combining Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-excel-creating-more-engaging-reports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">HW – Creating More Engaging Reports</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-excel-dynamic-charts-and-dashboards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Notes – Dynamic Charts and Dashboards</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-excel-dynamic-charts-and-dashboards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Lab – Dynamic Charts and Dashboards</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-excel-dynamic-charts-and-dashboards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">HW – Dynamic Charts and Dashboards</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./module-tableau.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tableau</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./install-tableau-and-tableau-prep-builder.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Install Tableau and Tableau Prep Builder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-to-tableau.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Introduction to Tableau</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-tableau-working-with-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Notes – Working with Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-tableau-working-with-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">HW – Working with Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-tableau-parameters.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Notes – Parameters</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-tableau-parameters.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">HW – Parameters</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-tableau-dashboards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Notes – Dashboards</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-tableau-dashboards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">HW – Dashboards</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./module-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./install-r-and-rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Install R and RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-to-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Introduction to R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-to-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Introduction to Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-r-visualizations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Notes – Visualizations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-r-visualizations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">HW - Visualizations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-r-data-transformations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Notes – Data Transformations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-r-data-transformations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">HW - Data Transformations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-r-reshaping-and-combining-data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Notes – Reshaping and Combining Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-r-data-cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Lab - Data Cleaning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-r-data-manipulations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">HW - Data Manipulations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-r-interactive-plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Notes – Interactive Plots</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-r-interactive-plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">HW – Interactive Plots</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notes-r-apps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Notes – Apps</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project-r-shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Group Project – Shiny</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./module-extra-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extra R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./extra-r-swd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Extra - Storytelling with Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./extra-r-categorical-displays.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Extra - Categorical Displays</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><span class="header-section-number">32.1</span> Overview</a>
  <ul class="collapse">
<li><a href="#materials" id="toc-materials" class="nav-link" data-scroll-target="#materials"><span class="header-section-number">32.1.1</span> Materials</a></li>
  <li><a href="#this-section" id="toc-this-section" class="nav-link" data-scroll-target="#this-section"><span class="header-section-number">32.1.2</span> This section</a></li>
  <li><a href="#readings" id="toc-readings" class="nav-link" data-scroll-target="#readings"><span class="header-section-number">32.1.3</span> Readings</a></li>
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites"><span class="header-section-number">32.1.4</span> Prerequisites</a></li>
  </ul>
</li>
  <li>
<a href="#french-fry-example" id="toc-french-fry-example" class="nav-link" data-scroll-target="#french-fry-example"><span class="header-section-number">32.2</span> French fry example</a>
  <ul class="collapse">
<li><a href="#importing-the-example-dataset" id="toc-importing-the-example-dataset" class="nav-link" data-scroll-target="#importing-the-example-dataset"><span class="header-section-number">32.2.1</span> Importing the example dataset</a></li>
  <li><a href="#goal" id="toc-goal" class="nav-link" data-scroll-target="#goal"><span class="header-section-number">32.2.2</span> Goal</a></li>
  <li><a href="#agreggating-and-plotting" id="toc-agreggating-and-plotting" class="nav-link" data-scroll-target="#agreggating-and-plotting"><span class="header-section-number">32.2.3</span> Agreggating and plotting</a></li>
  <li><a href="#reshape-data" id="toc-reshape-data" class="nav-link" data-scroll-target="#reshape-data"><span class="header-section-number">32.2.4</span> Reshape data</a></li>
  </ul>
</li>
  <li>
<a href="#gapminder-example" id="toc-gapminder-example" class="nav-link" data-scroll-target="#gapminder-example"><span class="header-section-number">32.3</span> Gapminder example</a>
  <ul class="collapse">
<li><a href="#read-in-datasets" id="toc-read-in-datasets" class="nav-link" data-scroll-target="#read-in-datasets"><span class="header-section-number">32.3.1</span> Read in datasets</a></li>
  <li><a href="#reshape-datasets" id="toc-reshape-datasets" class="nav-link" data-scroll-target="#reshape-datasets"><span class="header-section-number">32.3.2</span> Reshape datasets</a></li>
  <li><a href="#combine-datasets" id="toc-combine-datasets" class="nav-link" data-scroll-target="#combine-datasets"><span class="header-section-number">32.3.3</span> Combine datasets</a></li>
  <li><a href="#visualize-data" id="toc-visualize-data" class="nav-link" data-scroll-target="#visualize-data"><span class="header-section-number">32.3.4</span> Visualize data</a></li>
  </ul>
</li>
  <li>
<a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="header-section-number">32.4</span> Application</a>
  <ul class="collapse">
<li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup"><span class="header-section-number">32.4.1</span> Setup</a></li>
  <li><a href="#sec-application-ex" id="toc-sec-application-ex" class="nav-link" data-scroll-target="#sec-application-ex"><span class="header-section-number">32.4.2</span> Part a)</a></li>
  <li><a href="#sec-application2-ex" id="toc-sec-application2-ex" class="nav-link" data-scroll-target="#sec-application2-ex"><span class="header-section-number">32.4.3</span> Part b)</a></li>
  </ul>
</li>
  <li><a href="#application-solutions" id="toc-application-solutions" class="nav-link" data-scroll-target="#application-solutions"><span class="header-section-number">32.5</span> Application solutions</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content"><section id="overview" class="level2" data-number="32.1"><h2 data-number="32.1" class="anchored" data-anchor-id="overview">
<span class="header-section-number">32.1</span> Overview</h2>
<section id="materials" class="level3" data-number="32.1.1"><h3 data-number="32.1.1" class="anchored" data-anchor-id="materials">
<span class="header-section-number">32.1.1</span> Materials</h3>
<ul>
<li><p>Attached are all of the supplemental materials to this content! Feel free to check them out :)</p></li>
<li>
<p>Click the image below or follow the link to access the interactive tutorial that corresponds to this content: <a href="https://coltongearhart.shinyapps.io/reshaping-and-combining-data/" class="uri">https://coltongearhart.shinyapps.io/reshaping-and-combining-data/</a></p>
<p><a href="https://coltongearhart.shinyapps.io/reshaping-and-combining-data/"><img src="images/tutorial-reshaping-and-combining-data.png" class="img-fluid" width="1000"></a></p>
</li>
<li><p>Here are the videos that go through the tutorial:</p></li>
</ul>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/taTT7nkFUuc" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/QhMMCVFN2PM" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<ul>
<li>And finally here is the starter file mentioned and needed data for the content and exercises: <a href="https://github.com/coltongearhart/dana320/blob/main/tutorials/reshaping-and-combining-data/reshaping-and-combining-data-STARTER.qmd">reshaping-and-combining-data-STARTER.qmd</a> and <a href="https://github.com/coltongearhart/dana320/blob/main/tutorials/reshaping-and-combining-data/www/">data folder</a>
</li>
</ul></section><section id="this-section" class="level3" data-number="32.1.2"><h3 data-number="32.1.2" class="anchored" data-anchor-id="this-section">
<span class="header-section-number">32.1.2</span> This section</h3>
<ul>
<li><p>In the previous tutorial, we learned how to transform our data for either for data cleaning, summarizing, or to get it into a form for different visualizations.</p></li>
<li><p>Before either of these steps can be done, generally data needs to be worked with after importing.</p></li>
</ul>
<p><img src="tutorials/reshaping-and-combining-data/images/data-science-project-workflow.png" class="img-fluid" style="width:50.0%"></p>
<p><strong>tidyr</strong> is all about cleaning up messy data and turning it into well structured / organized objects. These objects are can be easily used across all packages in the <strong>tidyverse</strong> (e.g.&nbsp;<strong>ggplot2</strong>, <strong>dpylr</strong>, etc.), which makes common data analysis tasks flow much cleaner and smoother.</p>
</section><section id="readings" class="level3" data-number="32.1.3"><h3 data-number="32.1.3" class="anchored" data-anchor-id="readings">
<span class="header-section-number">32.1.3</span> Readings</h3>
<ul>
<li>
<p>This section covers content from <a href="https://r4ds.hadley.nz/data-tidy">Chapter 6 - Data Tidying</a> of <em>R for Data Science (2e)</em>.</p>
<ul>
<li>Additional topics <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> from <a href="https://r4ds.hadley.nz/data-import">Chapter 8 - Data Import</a> and basic joins (which are a part of <strong>dplyr</strong>) from <a href="https://r4ds.hadley.nz/joins">Chapter 20 - Joins</a>.</li>
</ul>
</li>
<li><p><a href="https://tidyr.tidyverse.org/index.html">tidyr help documentation</a> contains everything you need to know about <strong>tidyr</strong>, including a very helpful <a href="https://github.com/rstudio/cheatsheets/blob/main/tidyr.pdf">cheatsheet</a>.</p></li>
</ul></section><section id="prerequisites" class="level3" data-number="32.1.4"><h3 data-number="32.1.4" class="anchored" data-anchor-id="prerequisites">
<span class="header-section-number">32.1.4</span> Prerequisites</h3>
<ul>
<li>Before we can use the functions, datasets, and help pages within the <strong>tidyverse</strong> (which includes <strong>readr</strong>, <strong>tidyr</strong>, and <strong>dplyr</strong>), we need to load the package. We can do this by running:</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="french-fry-example" class="level2" data-number="32.2"><h2 data-number="32.2" class="anchored" data-anchor-id="french-fry-example">
<span class="header-section-number">32.2</span> French fry example</h2>
<section id="importing-the-example-dataset" class="level3" data-number="32.2.1"><h3 data-number="32.2.1" class="anchored" data-anchor-id="importing-the-example-dataset">
<span class="header-section-number">32.2.1</span> Importing the example dataset</h3>
<ul>
<li><p>The first step when working with data is to read it into R. There are functions to read in all types of data (Excel .csv and .xlsx. text files .txt, SAS files .sas7bdat, etc.).</p></li>
<li><p>For an Excel .csv file, we will use <code><a href="https://readr.tidyverse.org/reference/read_delim.html">readr::read_csv()</a></code>, which has some advantages over the base R function <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code>.</p></li>
<li><p>It is better at reading in certain data structures. For example, if a column’s data has a format like <code>12-1-2019</code>, it can recognize that as a date and save you an extra step. It also has good shorthand notation for specifying how R should read in the data.</p></li>
<li><p>In addition <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> actually turns the data into a tibble. Now lets read in and preview the example dataset.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># read in dataset in with desired column attributes</span></span>
<span><span class="co"># -&gt; the long string of characters for col_types argument is shorthand notation, see documentation</span></span>
<span><span class="va">data_ff</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"tutorials/reshaping-and-combining-data/www/french-fries.csv"</span>,</span>
<span>                    col_names <span class="op">=</span> <span class="cn">TRUE</span>, col_types <span class="op">=</span> <span class="st">"fffnnnnnn"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># preview data</span></span>
<span><span class="va">data_ff</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["time"],"name":[1],"type":["fct"],"align":["left"]},{"label":["treatment"],"name":[2],"type":["fct"],"align":["left"]},{"label":["subject"],"name":[3],"type":["fct"],"align":["left"]},{"label":["rep"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["potato"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["buttery"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["grassy"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["rancid"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["painty"],"name":[9],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"1","3":"3","4":"1","5":"2.9","6":"0.0","7":"0.0","8":"0.0","9":"5.5"},{"1":"1","2":"1","3":"3","4":"2","5":"14.0","6":"0.0","7":"0.0","8":"1.1","9":"0.0"},{"1":"1","2":"1","3":"10","4":"1","5":"11.0","6":"6.4","7":"0.0","8":"0.0","9":"0.0"},{"1":"1","2":"1","3":"10","4":"2","5":"9.9","6":"5.9","7":"2.9","8":"2.2","9":"0.0"},{"1":"1","2":"1","3":"15","4":"1","5":"1.2","6":"0.1","7":"0.0","8":"1.1","9":"5.1"},{"1":"1","2":"1","3":"15","4":"2","5":"8.8","6":"3.0","7":"3.6","8":"1.5","9":"2.3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li><p>This contains information from a designed experiment where subjects were asked to taste french fries that were cooked in different oils. Subjects rated the french fries according to certain flavor attributes. Repeated samples were taken.</p></li>
<li><p>An alternative to reading the data directly is to load a .RData file, which can have the dataset already loaded with pre-specified attributes.</p></li>
<li><p>In a typical project workflow, after data cleaning it is a good idea to save a cleaned dataset and then start the analysis by loading in the cleaned data rather than starting with the raw data every time.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># alternative way to load in data with pre-specified attributes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"tutorials/reshaping-and-combining-data/www/french_fries.RData"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="goal" class="level3" data-number="32.2.2"><h3 data-number="32.2.2" class="anchored" data-anchor-id="goal">
<span class="header-section-number">32.2.2</span> Goal</h3>
<ul>
<li>The goal is to understand the data reshaping process to create the following visual.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="notes-r-reshaping-and-combining-data_files/figure-html/goal-preview-1.png" class="img-fluid figure-img" data-fig-pos="hold" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="agreggating-and-plotting" class="level3" data-number="32.2.3"><h3 data-number="32.2.3" class="anchored" data-anchor-id="agreggating-and-plotting">
<span class="header-section-number">32.2.3</span> Agreggating and plotting</h3>
<ul>
<li><p>Before we can create the goal plot, lets create some simpler plots to build up to the goal.</p></li>
<li><p>Lets start with a simple plot of the raw data.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>,</span>
<span>                 y <span class="op">=</span> <span class="va">potato</span><span class="op">)</span>,</span>
<span>             data <span class="op">=</span> <span class="va">data_ff</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="notes-r-reshaping-and-combining-data_files/figure-html/first-plot_demo-1.png" class="img-fluid figure-img" data-fig-pos="hold" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Now lets manipulate the data so that we can visually compare the raw individual potato scores to the mean over each time period. Then we can add it to the plot.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_potato</span> <span class="op">&lt;-</span> <span class="va">data_ff</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>avg_potato <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">potato</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_potato</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["time"],"name":[1],"type":["fct"],"align":["left"]},{"label":["avg_potato"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"8.562500"},{"1":"2","2":"8.059722"},{"1":"3","2":"7.797222"},{"1":"4","2":"7.713889"},{"1":"5","2":"7.328169"},{"1":"6","2":"6.670833"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">potato</span><span class="op">)</span>,</span>
<span>             data <span class="op">=</span> <span class="va">data_ff</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">avg_potato</span><span class="op">)</span>,</span>
<span>            group <span class="op">=</span> <span class="fl">1</span>,</span>
<span>            size <span class="op">=</span> <span class="fl">2</span>, color <span class="op">=</span> <span class="st">"blue"</span>,</span>
<span>            data <span class="op">=</span> <span class="va">data_potato</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="notes-r-reshaping-and-combining-data_files/figure-html/potato-demo-1.png" class="img-fluid figure-img" data-fig-pos="hold" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>Note that line plots typically used for time series plots. But they can also be used if there are related points across the <span class="math inline">\(x\)</span>-axis.</p></li>
<li><p>Lets make line plot of potato flavor over time for each subject (so we want one line per subject, across time). In order to do this, we need to format the data so that each time and subject combination are grouped together. And then we can average scores over the two batches (i.e.&nbsp;replications).</p></li>
<li><p>Then once the new data is ready, we can create the line plot of interest.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_subject</span> <span class="op">&lt;-</span> <span class="va">data_ff</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">subject</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>avg_potato <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">potato</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">avg_potato</span>, group <span class="op">=</span> <span class="va">subject</span><span class="op">)</span>,</span>
<span>            data <span class="op">=</span> <span class="va">data_subject</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="notes-r-reshaping-and-combining-data_files/figure-html/subject-plot-demo-1.png" class="img-fluid figure-img" data-fig-pos="hold" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>Now we can do the same thing, but refine our analysis by incorporating the different type of oil (treatment). We do this by also grouping by the treatment applied to each batch of french fries.</p></li>
<li><p>Then we can make new plot with more refined data. We can also add a smoothing line (<span class="math inline">\(\approx\)</span> mean line) for comparison, which will show the average scores across all subjects as well as the corresponding confidence band.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_treatment</span> <span class="op">&lt;-</span> <span class="va">data_ff</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">treatment</span>, <span class="va">subject</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>avg_potato <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">potato</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>,</span>
<span>                y <span class="op">=</span> <span class="va">avg_potato</span>,</span>
<span>                group <span class="op">=</span> <span class="va">subject</span><span class="op">)</span>,</span>
<span>            data <span class="op">=</span> <span class="va">data_treatment</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>,</span>
<span>                  y <span class="op">=</span> <span class="va">potato</span>,</span>
<span>                  group <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>              data <span class="op">=</span> <span class="va">data_ff</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">treatment</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="notes-r-reshaping-and-combining-data_files/figure-html/smooth-line-demo-1.png" class="img-fluid figure-img" data-fig-pos="hold" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>When doing this, we want to think about the grouping variables and how can we visualize differences (if there are any).</p></li>
<li><p>Aggregating to different levels reveals some information, but we also lose information because the data is based is now from a totally different perspective. So it’s important to keep this in mind when drawing conclusions.</p></li>
</ul></section><section id="reshape-data" class="level3" data-number="32.2.4"><h3 data-number="32.2.4" class="anchored" data-anchor-id="reshape-data">
<span class="header-section-number">32.2.4</span> Reshape data</h3>
<ul>
<li><p>Currently, the dataset is in wide format. So the characteristics about a single observation are represented by many columns.</p></li>
<li><p>However, the each of these characteristics are related in what they represent (i.e.&nbsp;different types of flavors). So it makes sense to instead have one column for type of flavor and another for respective flavor score (rather than one column for potato score, another for grassy score, etc.).</p></li>
<li><p>Our goal is to convert to the dataset to long (tall) format, where flavor type and flavor score variables replace the five flavor columns. Then we want to find the average score for each subject within a flavor category each week.</p></li>
<li>
<p>To do this, we will use <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">tidyr::pivot_longer()</a></code>. This functions reshapes (transposes) data from wide to long and takes the following main arguments:</p>
<ul>
<li><p><code>cols</code> → Columns to be reshaped</p></li>
<li><p><code>names_to</code> → New ID column name</p></li>
<li><p><code>values_to</code> → New value column name</p></li>
</ul>
</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_long</span> <span class="op">&lt;-</span> <span class="va">data_ff</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">potato</span><span class="op">:</span><span class="va">painty</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"flavor_type"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"flavor_score"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_long</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["time"],"name":[1],"type":["fct"],"align":["left"]},{"label":["treatment"],"name":[2],"type":["fct"],"align":["left"]},{"label":["subject"],"name":[3],"type":["fct"],"align":["left"]},{"label":["rep"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["flavor_type"],"name":[5],"type":["chr"],"align":["left"]},{"label":["flavor_score"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"1","3":"3","4":"1","5":"potato","6":"2.9"},{"1":"1","2":"1","3":"3","4":"1","5":"buttery","6":"0.0"},{"1":"1","2":"1","3":"3","4":"1","5":"grassy","6":"0.0"},{"1":"1","2":"1","3":"3","4":"1","5":"rancid","6":"0.0"},{"1":"1","2":"1","3":"3","4":"1","5":"painty","6":"5.5"},{"1":"1","2":"1","3":"3","4":"2","5":"potato","6":"14.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li><p>Now that the data is organized in a way that is conducive to the analysis we want to do, we can proceed. So we will average over the replications within each of the desired groups.</p></li>
<li><p>Then create the final visual!</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_flavor</span> <span class="op">&lt;-</span> <span class="va">data_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">treatment</span>, <span class="va">subject</span>, <span class="va">flavor_type</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>avg_flavor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">flavor_score</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>,</span>
<span>           y <span class="op">=</span> <span class="va">avg_flavor</span><span class="op">)</span>,</span>
<span>       data <span class="op">=</span> <span class="va">data_flavor</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>group <span class="op">=</span> <span class="va">subject</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>group <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">flavor_type</span> <span class="op">~</span> <span class="va">treatment</span>,</span>
<span>             scale <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="notes-r-reshaping-and-combining-data_files/figure-html/average-long-demo-1.png" class="img-fluid figure-img" data-fig-pos="hold" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>
<p>Note that we could revert the tall dataset back to its original wide format using <code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">tidyr::pivot_wider()</a></code>. This takes the following main arguments:</p>
<ul>
<li><p><code>names_from</code> → Column to get the output column names from</p></li>
<li><p><code>values_from</code> → Column to get the output values from</p></li>
</ul>
</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_wide</span> <span class="op">&lt;-</span> <span class="va">data_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">flavor_type</span>,</span>
<span>              values_from <span class="op">=</span> <span class="va">flavor_score</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_wide</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["time"],"name":[1],"type":["fct"],"align":["left"]},{"label":["treatment"],"name":[2],"type":["fct"],"align":["left"]},{"label":["subject"],"name":[3],"type":["fct"],"align":["left"]},{"label":["rep"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["potato"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["buttery"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["grassy"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["rancid"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["painty"],"name":[9],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"1","3":"3","4":"1","5":"2.9","6":"0.0","7":"0.0","8":"0.0","9":"5.5"},{"1":"1","2":"1","3":"3","4":"2","5":"14.0","6":"0.0","7":"0.0","8":"1.1","9":"0.0"},{"1":"1","2":"1","3":"10","4":"1","5":"11.0","6":"6.4","7":"0.0","8":"0.0","9":"0.0"},{"1":"1","2":"1","3":"10","4":"2","5":"9.9","6":"5.9","7":"2.9","8":"2.2","9":"0.0"},{"1":"1","2":"1","3":"15","4":"1","5":"1.2","6":"0.1","7":"0.0","8":"1.1","9":"5.1"},{"1":"1","2":"1","3":"15","4":"2","5":"8.8","6":"3.0","7":"3.6","8":"1.5","9":"2.3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_wide</span> <span class="op">==</span> <span class="va">data_ff</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     time treatment subject  rep potato buttery grassy rancid painty
[1,] TRUE      TRUE    TRUE TRUE   TRUE    TRUE   TRUE   TRUE   TRUE
[2,] TRUE      TRUE    TRUE TRUE   TRUE    TRUE   TRUE   TRUE   TRUE
[3,] TRUE      TRUE    TRUE TRUE   TRUE    TRUE   TRUE   TRUE   TRUE
[4,] TRUE      TRUE    TRUE TRUE   TRUE    TRUE   TRUE   TRUE   TRUE
[5,] TRUE      TRUE    TRUE TRUE   TRUE    TRUE   TRUE   TRUE   TRUE
[6,] TRUE      TRUE    TRUE TRUE   TRUE    TRUE   TRUE   TRUE   TRUE</code></pre>
</div>
</div>
</section></section><section id="gapminder-example" class="level2" data-number="32.3"><h2 data-number="32.3" class="anchored" data-anchor-id="gapminder-example">
<span class="header-section-number">32.3</span> Gapminder example</h2>
<ul>
<li>To illustrate more examples of reshaping and also merging datasets, we will recreate the Hans Rosling Gapminder visualization.</li>
</ul>
<section id="read-in-datasets" class="level3" data-number="32.3.1"><h3 data-number="32.3.1" class="anchored" data-anchor-id="read-in-datasets">
<span class="header-section-number">32.3.1</span> Read in datasets</h3>
<ul>
<li>First we need to read in the multiple gapminder datasets (<a href="https://www.gapminder.org/data/">gapminder.org/data</a>) about life expectancy, income, population totals, and countries.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># load data, rename / select columns and preview</span></span>
<span><span class="va">data_life</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"tutorials/reshaping-and-combining-data/www/life_expectancy_years.csv"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>country <span class="op">=</span> <span class="va">geo</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_life</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["1800"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["1801"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["1802"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["1803"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["1804"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["1805"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["1806"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["1807"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["1808"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["1809"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["1810"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["1811"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["1812"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["1813"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["1814"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["1815"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["1816"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["1817"],"name":[19],"type":["dbl"],"align":["right"]},{"label":["1818"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["1819"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["1820"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["1821"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["1822"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["1823"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["1824"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["1825"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["1826"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["1827"],"name":[29],"type":["dbl"],"align":["right"]},{"label":["1828"],"name":[30],"type":["dbl"],"align":["right"]},{"label":["1829"],"name":[31],"type":["dbl"],"align":["right"]},{"label":["1830"],"name":[32],"type":["dbl"],"align":["right"]},{"label":["1831"],"name":[33],"type":["dbl"],"align":["right"]},{"label":["1832"],"name":[34],"type":["dbl"],"align":["right"]},{"label":["1833"],"name":[35],"type":["dbl"],"align":["right"]},{"label":["1834"],"name":[36],"type":["dbl"],"align":["right"]},{"label":["1835"],"name":[37],"type":["dbl"],"align":["right"]},{"label":["1836"],"name":[38],"type":["dbl"],"align":["right"]},{"label":["1837"],"name":[39],"type":["dbl"],"align":["right"]},{"label":["1838"],"name":[40],"type":["dbl"],"align":["right"]},{"label":["1839"],"name":[41],"type":["dbl"],"align":["right"]},{"label":["1840"],"name":[42],"type":["dbl"],"align":["right"]},{"label":["1841"],"name":[43],"type":["dbl"],"align":["right"]},{"label":["1842"],"name":[44],"type":["dbl"],"align":["right"]},{"label":["1843"],"name":[45],"type":["dbl"],"align":["right"]},{"label":["1844"],"name":[46],"type":["dbl"],"align":["right"]},{"label":["1845"],"name":[47],"type":["dbl"],"align":["right"]},{"label":["1846"],"name":[48],"type":["dbl"],"align":["right"]},{"label":["1847"],"name":[49],"type":["dbl"],"align":["right"]},{"label":["1848"],"name":[50],"type":["dbl"],"align":["right"]},{"label":["1849"],"name":[51],"type":["dbl"],"align":["right"]},{"label":["1850"],"name":[52],"type":["dbl"],"align":["right"]},{"label":["1851"],"name":[53],"type":["dbl"],"align":["right"]},{"label":["1852"],"name":[54],"type":["dbl"],"align":["right"]},{"label":["1853"],"name":[55],"type":["dbl"],"align":["right"]},{"label":["1854"],"name":[56],"type":["dbl"],"align":["right"]},{"label":["1855"],"name":[57],"type":["dbl"],"align":["right"]},{"label":["1856"],"name":[58],"type":["dbl"],"align":["right"]},{"label":["1857"],"name":[59],"type":["dbl"],"align":["right"]},{"label":["1858"],"name":[60],"type":["dbl"],"align":["right"]},{"label":["1859"],"name":[61],"type":["dbl"],"align":["right"]},{"label":["1860"],"name":[62],"type":["dbl"],"align":["right"]},{"label":["1861"],"name":[63],"type":["dbl"],"align":["right"]},{"label":["1862"],"name":[64],"type":["dbl"],"align":["right"]},{"label":["1863"],"name":[65],"type":["dbl"],"align":["right"]},{"label":["1864"],"name":[66],"type":["dbl"],"align":["right"]},{"label":["1865"],"name":[67],"type":["dbl"],"align":["right"]},{"label":["1866"],"name":[68],"type":["dbl"],"align":["right"]},{"label":["1867"],"name":[69],"type":["dbl"],"align":["right"]},{"label":["1868"],"name":[70],"type":["dbl"],"align":["right"]},{"label":["1869"],"name":[71],"type":["dbl"],"align":["right"]},{"label":["1870"],"name":[72],"type":["dbl"],"align":["right"]},{"label":["1871"],"name":[73],"type":["dbl"],"align":["right"]},{"label":["1872"],"name":[74],"type":["dbl"],"align":["right"]},{"label":["1873"],"name":[75],"type":["dbl"],"align":["right"]},{"label":["1874"],"name":[76],"type":["dbl"],"align":["right"]},{"label":["1875"],"name":[77],"type":["dbl"],"align":["right"]},{"label":["1876"],"name":[78],"type":["dbl"],"align":["right"]},{"label":["1877"],"name":[79],"type":["dbl"],"align":["right"]},{"label":["1878"],"name":[80],"type":["dbl"],"align":["right"]},{"label":["1879"],"name":[81],"type":["dbl"],"align":["right"]},{"label":["1880"],"name":[82],"type":["dbl"],"align":["right"]},{"label":["1881"],"name":[83],"type":["dbl"],"align":["right"]},{"label":["1882"],"name":[84],"type":["dbl"],"align":["right"]},{"label":["1883"],"name":[85],"type":["dbl"],"align":["right"]},{"label":["1884"],"name":[86],"type":["dbl"],"align":["right"]},{"label":["1885"],"name":[87],"type":["dbl"],"align":["right"]},{"label":["1886"],"name":[88],"type":["dbl"],"align":["right"]},{"label":["1887"],"name":[89],"type":["dbl"],"align":["right"]},{"label":["1888"],"name":[90],"type":["dbl"],"align":["right"]},{"label":["1889"],"name":[91],"type":["dbl"],"align":["right"]},{"label":["1890"],"name":[92],"type":["dbl"],"align":["right"]},{"label":["1891"],"name":[93],"type":["dbl"],"align":["right"]},{"label":["1892"],"name":[94],"type":["dbl"],"align":["right"]},{"label":["1893"],"name":[95],"type":["dbl"],"align":["right"]},{"label":["1894"],"name":[96],"type":["dbl"],"align":["right"]},{"label":["1895"],"name":[97],"type":["dbl"],"align":["right"]},{"label":["1896"],"name":[98],"type":["dbl"],"align":["right"]},{"label":["1897"],"name":[99],"type":["dbl"],"align":["right"]},{"label":["1898"],"name":[100],"type":["dbl"],"align":["right"]},{"label":["1899"],"name":[101],"type":["dbl"],"align":["right"]},{"label":["1900"],"name":[102],"type":["dbl"],"align":["right"]},{"label":["1901"],"name":[103],"type":["dbl"],"align":["right"]},{"label":["1902"],"name":[104],"type":["dbl"],"align":["right"]},{"label":["1903"],"name":[105],"type":["dbl"],"align":["right"]},{"label":["1904"],"name":[106],"type":["dbl"],"align":["right"]},{"label":["1905"],"name":[107],"type":["dbl"],"align":["right"]},{"label":["1906"],"name":[108],"type":["dbl"],"align":["right"]},{"label":["1907"],"name":[109],"type":["dbl"],"align":["right"]},{"label":["1908"],"name":[110],"type":["dbl"],"align":["right"]},{"label":["1909"],"name":[111],"type":["dbl"],"align":["right"]},{"label":["1910"],"name":[112],"type":["dbl"],"align":["right"]},{"label":["1911"],"name":[113],"type":["dbl"],"align":["right"]},{"label":["1912"],"name":[114],"type":["dbl"],"align":["right"]},{"label":["1913"],"name":[115],"type":["dbl"],"align":["right"]},{"label":["1914"],"name":[116],"type":["dbl"],"align":["right"]},{"label":["1915"],"name":[117],"type":["dbl"],"align":["right"]},{"label":["1916"],"name":[118],"type":["dbl"],"align":["right"]},{"label":["1917"],"name":[119],"type":["dbl"],"align":["right"]},{"label":["1918"],"name":[120],"type":["dbl"],"align":["right"]},{"label":["1919"],"name":[121],"type":["dbl"],"align":["right"]},{"label":["1920"],"name":[122],"type":["dbl"],"align":["right"]},{"label":["1921"],"name":[123],"type":["dbl"],"align":["right"]},{"label":["1922"],"name":[124],"type":["dbl"],"align":["right"]},{"label":["1923"],"name":[125],"type":["dbl"],"align":["right"]},{"label":["1924"],"name":[126],"type":["dbl"],"align":["right"]},{"label":["1925"],"name":[127],"type":["dbl"],"align":["right"]},{"label":["1926"],"name":[128],"type":["dbl"],"align":["right"]},{"label":["1927"],"name":[129],"type":["dbl"],"align":["right"]},{"label":["1928"],"name":[130],"type":["dbl"],"align":["right"]},{"label":["1929"],"name":[131],"type":["dbl"],"align":["right"]},{"label":["1930"],"name":[132],"type":["dbl"],"align":["right"]},{"label":["1931"],"name":[133],"type":["dbl"],"align":["right"]},{"label":["1932"],"name":[134],"type":["dbl"],"align":["right"]},{"label":["1933"],"name":[135],"type":["dbl"],"align":["right"]},{"label":["1934"],"name":[136],"type":["dbl"],"align":["right"]},{"label":["1935"],"name":[137],"type":["dbl"],"align":["right"]},{"label":["1936"],"name":[138],"type":["dbl"],"align":["right"]},{"label":["1937"],"name":[139],"type":["dbl"],"align":["right"]},{"label":["1938"],"name":[140],"type":["dbl"],"align":["right"]},{"label":["1939"],"name":[141],"type":["dbl"],"align":["right"]},{"label":["1940"],"name":[142],"type":["dbl"],"align":["right"]},{"label":["1941"],"name":[143],"type":["dbl"],"align":["right"]},{"label":["1942"],"name":[144],"type":["dbl"],"align":["right"]},{"label":["1943"],"name":[145],"type":["dbl"],"align":["right"]},{"label":["1944"],"name":[146],"type":["dbl"],"align":["right"]},{"label":["1945"],"name":[147],"type":["dbl"],"align":["right"]},{"label":["1946"],"name":[148],"type":["dbl"],"align":["right"]},{"label":["1947"],"name":[149],"type":["dbl"],"align":["right"]},{"label":["1948"],"name":[150],"type":["dbl"],"align":["right"]},{"label":["1949"],"name":[151],"type":["dbl"],"align":["right"]},{"label":["1950"],"name":[152],"type":["dbl"],"align":["right"]},{"label":["1951"],"name":[153],"type":["dbl"],"align":["right"]},{"label":["1952"],"name":[154],"type":["dbl"],"align":["right"]},{"label":["1953"],"name":[155],"type":["dbl"],"align":["right"]},{"label":["1954"],"name":[156],"type":["dbl"],"align":["right"]},{"label":["1955"],"name":[157],"type":["dbl"],"align":["right"]},{"label":["1956"],"name":[158],"type":["dbl"],"align":["right"]},{"label":["1957"],"name":[159],"type":["dbl"],"align":["right"]},{"label":["1958"],"name":[160],"type":["dbl"],"align":["right"]},{"label":["1959"],"name":[161],"type":["dbl"],"align":["right"]},{"label":["1960"],"name":[162],"type":["dbl"],"align":["right"]},{"label":["1961"],"name":[163],"type":["dbl"],"align":["right"]},{"label":["1962"],"name":[164],"type":["dbl"],"align":["right"]},{"label":["1963"],"name":[165],"type":["dbl"],"align":["right"]},{"label":["1964"],"name":[166],"type":["dbl"],"align":["right"]},{"label":["1965"],"name":[167],"type":["dbl"],"align":["right"]},{"label":["1966"],"name":[168],"type":["dbl"],"align":["right"]},{"label":["1967"],"name":[169],"type":["dbl"],"align":["right"]},{"label":["1968"],"name":[170],"type":["dbl"],"align":["right"]},{"label":["1969"],"name":[171],"type":["dbl"],"align":["right"]},{"label":["1970"],"name":[172],"type":["dbl"],"align":["right"]},{"label":["1971"],"name":[173],"type":["dbl"],"align":["right"]},{"label":["1972"],"name":[174],"type":["dbl"],"align":["right"]},{"label":["1973"],"name":[175],"type":["dbl"],"align":["right"]},{"label":["1974"],"name":[176],"type":["dbl"],"align":["right"]},{"label":["1975"],"name":[177],"type":["dbl"],"align":["right"]},{"label":["1976"],"name":[178],"type":["dbl"],"align":["right"]},{"label":["1977"],"name":[179],"type":["dbl"],"align":["right"]},{"label":["1978"],"name":[180],"type":["dbl"],"align":["right"]},{"label":["1979"],"name":[181],"type":["dbl"],"align":["right"]},{"label":["1980"],"name":[182],"type":["dbl"],"align":["right"]},{"label":["1981"],"name":[183],"type":["dbl"],"align":["right"]},{"label":["1982"],"name":[184],"type":["dbl"],"align":["right"]},{"label":["1983"],"name":[185],"type":["dbl"],"align":["right"]},{"label":["1984"],"name":[186],"type":["dbl"],"align":["right"]},{"label":["1985"],"name":[187],"type":["dbl"],"align":["right"]},{"label":["1986"],"name":[188],"type":["dbl"],"align":["right"]},{"label":["1987"],"name":[189],"type":["dbl"],"align":["right"]},{"label":["1988"],"name":[190],"type":["dbl"],"align":["right"]},{"label":["1989"],"name":[191],"type":["dbl"],"align":["right"]},{"label":["1990"],"name":[192],"type":["dbl"],"align":["right"]},{"label":["1991"],"name":[193],"type":["dbl"],"align":["right"]},{"label":["1992"],"name":[194],"type":["dbl"],"align":["right"]},{"label":["1993"],"name":[195],"type":["dbl"],"align":["right"]},{"label":["1994"],"name":[196],"type":["dbl"],"align":["right"]},{"label":["1995"],"name":[197],"type":["dbl"],"align":["right"]},{"label":["1996"],"name":[198],"type":["dbl"],"align":["right"]},{"label":["1997"],"name":[199],"type":["dbl"],"align":["right"]},{"label":["1998"],"name":[200],"type":["dbl"],"align":["right"]},{"label":["1999"],"name":[201],"type":["dbl"],"align":["right"]},{"label":["2000"],"name":[202],"type":["dbl"],"align":["right"]},{"label":["2001"],"name":[203],"type":["dbl"],"align":["right"]},{"label":["2002"],"name":[204],"type":["dbl"],"align":["right"]},{"label":["2003"],"name":[205],"type":["dbl"],"align":["right"]},{"label":["2004"],"name":[206],"type":["dbl"],"align":["right"]},{"label":["2005"],"name":[207],"type":["dbl"],"align":["right"]},{"label":["2006"],"name":[208],"type":["dbl"],"align":["right"]},{"label":["2007"],"name":[209],"type":["dbl"],"align":["right"]},{"label":["2008"],"name":[210],"type":["dbl"],"align":["right"]},{"label":["2009"],"name":[211],"type":["dbl"],"align":["right"]},{"label":["2010"],"name":[212],"type":["dbl"],"align":["right"]},{"label":["2011"],"name":[213],"type":["dbl"],"align":["right"]},{"label":["2012"],"name":[214],"type":["dbl"],"align":["right"]},{"label":["2013"],"name":[215],"type":["dbl"],"align":["right"]},{"label":["2014"],"name":[216],"type":["dbl"],"align":["right"]},{"label":["2015"],"name":[217],"type":["dbl"],"align":["right"]},{"label":["2016"],"name":[218],"type":["dbl"],"align":["right"]},{"label":["2017"],"name":[219],"type":["dbl"],"align":["right"]},{"label":["2018"],"name":[220],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"28.2","3":"28.2","4":"28.2","5":"28.2","6":"28.2","7":"28.2","8":"28.1","9":"28.1","10":"28.1","11":"28.1","12":"28.1","13":"28.1","14":"28.1","15":"28.1","16":"28.1","17":"28.1","18":"28.1","19":"28.0","20":"28.0","21":"28.0","22":"28.0","23":"28.0","24":"28.0","25":"28.0","26":"28.0","27":"27.9","28":"27.9","29":"27.9","30":"27.9","31":"27.9","32":"27.9","33":"27.9","34":"27.9","35":"27.9","36":"27.9","37":"27.9","38":"27.8","39":"27.8","40":"27.8","41":"27.8","42":"27.8","43":"27.8","44":"27.8","45":"27.8","46":"27.8","47":"27.8","48":"27.7","49":"27.7","50":"27.7","51":"27.7","52":"27.7","53":"27.7","54":"27.7","55":"27.7","56":"27.7","57":"27.6","58":"27.6","59":"27.6","60":"27.6","61":"27.6","62":"27.6","63":"27.6","64":"27.6","65":"27.6","66":"27.6","67":"27.5","68":"27.5","69":"27.5","70":"27.5","71":"27.5","72":"27.5","73":"27.6","74":"27.6","75":"27.7","76":"27.7","77":"27.8","78":"27.8","79":"27.9","80":"28.0","81":"28.0","82":"28.1","83":"28.1","84":"28.2","85":"28.2","86":"28.3","87":"28.4","88":"28.4","89":"28.5","90":"28.5","91":"28.6","92":"28.6","93":"28.7","94":"28.8","95":"28.8","96":"28.9","97":"28.9","98":"29.0","99":"29.1","100":"29.1","101":"29.2","102":"29.2","103":"29.3","104":"29.3","105":"29.4","106":"29.4","107":"29.5","108":"29.6","109":"29.6","110":"29.7","111":"29.7","112":"29.8","113":"29.8","114":"29.9","115":"29.9","116":"30.0","117":"30.1","118":"30.1","119":"30.2","120":"7.89","121":"30.3","122":"30.3","123":"30.4","124":"30.4","125":"30.5","126":"30.6","127":"30.6","128":"30.7","129":"30.7","130":"30.8","131":"30.8","132":"30.9","133":"30.9","134":"31.0","135":"31.1","136":"31.1","137":"31.2","138":"31.2","139":"31.3","140":"31.3","141":"31.4","142":"31.4","143":"31.5","144":"31.6","145":"31.6","146":"31.7","147":"31.7","148":"31.8","149":"31.8","150":"31.9","151":"31.9","152":"32.0","153":"32.4","154":"33.0","155":"33.7","156":"34.4","157":"35.1","158":"35.8","159":"36.5","160":"37.2","161":"37.9","162":"38.6","163":"39.4","164":"40.1","165":"40.8","166":"41.5","167":"42.2","168":"42.9","169":"43.7","170":"44.4","171":"45.1","172":"45.8","173":"45.9","174":"45.9","175":"46.0","176":"46.1","177":"46.3","178":"46.5","179":"46.6","180":"45.0","181":"43.6","182":"43.3","183":"44.1","184":"43.8","185":"42.0","186":"39.8","187":"41.6","188":"42.6","189":"44.7","190":"47.0","191":"50.8","192":"51.6","193":"51.3","194":"51.4","195":"51.4","196":"50.7","197":"51.1","198":"51.4","199":"51.1","200":"50.1","201":"51.5","202":"51.6","203":"51.7","204":"52.4","205":"53.0","206":"53.5","207":"53.9","208":"54.1","209":"54.6","210":"55.2","211":"55.7","212":"56.2","213":"56.7","214":"57.2","215":"57.7","216":"57.8","217":"57.9","218":"58.0","219":"58.4","220":"58.7"},{"1":"Albania","2":"35.4","3":"35.4","4":"35.4","5":"35.4","6":"35.4","7":"35.4","8":"35.4","9":"35.4","10":"35.4","11":"35.4","12":"35.4","13":"35.4","14":"35.4","15":"35.4","16":"35.4","17":"35.4","18":"35.4","19":"35.4","20":"35.4","21":"35.4","22":"35.4","23":"35.4","24":"35.4","25":"35.4","26":"35.4","27":"35.4","28":"35.4","29":"35.4","30":"35.4","31":"35.4","32":"35.4","33":"35.4","34":"35.4","35":"35.4","36":"35.4","37":"35.4","38":"35.4","39":"35.4","40":"35.4","41":"35.4","42":"35.4","43":"35.4","44":"35.4","45":"35.4","46":"35.4","47":"35.4","48":"35.4","49":"35.4","50":"35.4","51":"35.4","52":"35.4","53":"35.4","54":"35.4","55":"35.4","56":"35.4","57":"35.4","58":"35.4","59":"35.4","60":"35.4","61":"35.4","62":"35.4","63":"35.4","64":"35.4","65":"35.4","66":"35.4","67":"35.4","68":"35.4","69":"35.4","70":"35.4","71":"35.4","72":"35.4","73":"35.4","74":"35.4","75":"35.4","76":"35.4","77":"35.4","78":"35.4","79":"35.4","80":"35.4","81":"35.4","82":"35.4","83":"35.4","84":"35.4","85":"35.4","86":"35.4","87":"35.4","88":"35.4","89":"35.4","90":"35.4","91":"35.4","92":"35.5","93":"35.5","94":"35.5","95":"35.5","96":"35.5","97":"35.5","98":"35.5","99":"35.5","100":"35.5","101":"35.5","102":"35.5","103":"35.5","104":"35.5","105":"35.5","106":"35.5","107":"35.5","108":"35.5","109":"35.5","110":"35.5","111":"35.5","112":"35.5","113":"35.5","114":"35.5","115":"35.5","116":"35.5","117":"35.5","118":"35.5","119":"35.5","120":"19.50","121":"35.5","122":"35.5","123":"35.5","124":"35.5","125":"35.5","126":"35.5","127":"35.5","128":"35.5","129":"35.5","130":"35.5","131":"35.5","132":"36.4","133":"37.3","134":"38.2","135":"39.1","136":"40.0","137":"40.9","138":"41.8","139":"42.8","140":"43.6","141":"43.2","142":"42.2","143":"41.7","144":"40.2","145":"37.2","146":"34.2","147":"47.2","148":"50.3","149":"51.8","150":"52.7","151":"53.6","152":"54.5","153":"54.7","154":"55.2","155":"55.8","156":"56.5","157":"57.3","158":"58.3","159":"59.3","160":"60.4","161":"61.6","162":"62.7","163":"63.7","164":"64.6","165":"65.3","166":"65.9","167":"66.3","168":"66.5","169":"66.7","170":"66.9","171":"67.1","172":"67.4","173":"68.0","174":"68.6","175":"69.2","176":"69.8","177":"70.3","178":"70.8","179":"71.3","180":"71.7","181":"72.0","182":"72.3","183":"72.4","184":"72.5","185":"72.6","186":"72.8","187":"73.0","188":"73.2","189":"73.2","190":"73.4","191":"73.7","192":"73.9","193":"73.9","194":"73.9","195":"73.9","196":"74.0","197":"74.1","198":"74.3","199":"72.5","200":"74.3","201":"74.4","202":"74.4","203":"74.5","204":"74.5","205":"74.6","206":"74.7","207":"74.9","208":"75.2","209":"75.4","210":"75.6","211":"75.9","212":"76.3","213":"76.7","214":"77.0","215":"77.2","216":"77.4","217":"77.6","218":"77.7","219":"77.9","220":"78.0"},{"1":"Algeria","2":"28.8","3":"28.8","4":"28.8","5":"28.8","6":"28.8","7":"28.8","8":"28.8","9":"28.8","10":"28.8","11":"28.8","12":"28.8","13":"28.8","14":"28.8","15":"28.8","16":"28.8","17":"28.8","18":"28.8","19":"28.8","20":"28.8","21":"28.8","22":"28.8","23":"28.8","24":"28.8","25":"28.8","26":"28.8","27":"28.8","28":"28.8","29":"28.8","30":"28.8","31":"28.8","32":"28.8","33":"28.8","34":"28.8","35":"28.8","36":"28.8","37":"28.8","38":"28.8","39":"28.8","40":"28.8","41":"28.8","42":"28.8","43":"28.8","44":"28.8","45":"28.8","46":"28.8","47":"28.8","48":"28.8","49":"28.8","50":"28.8","51":"20.0","52":"15.0","53":"22.0","54":"28.8","55":"28.8","56":"28.8","57":"28.8","58":"28.8","59":"28.8","60":"28.8","61":"28.8","62":"28.8","63":"28.8","64":"28.8","65":"28.8","66":"28.8","67":"28.8","68":"28.8","69":"21.0","70":"11.0","71":"15.0","72":"22.0","73":"28.9","74":"28.9","75":"28.9","76":"29.0","77":"29.0","78":"29.1","79":"29.1","80":"29.1","81":"29.2","82":"29.2","83":"29.3","84":"29.3","85":"29.4","86":"29.4","87":"29.4","88":"29.5","89":"29.5","90":"29.6","91":"29.6","92":"29.6","93":"29.7","94":"29.7","95":"29.8","96":"29.8","97":"29.8","98":"29.9","99":"29.9","100":"30.0","101":"30.0","102":"30.1","103":"30.2","104":"30.3","105":"31.3","106":"25.3","107":"28.0","108":"29.5","109":"29.4","110":"29.3","111":"30.9","112":"32.5","113":"32.3","114":"33.7","115":"31.5","116":"31.0","117":"30.5","118":"30.1","119":"30.2","120":"23.60","121":"30.3","122":"29.4","123":"29.5","124":"29.2","125":"31.8","126":"33.3","127":"34.1","128":"33.4","129":"28.6","130":"32.2","131":"32.5","132":"33.8","133":"31.7","134":"33.1","135":"34.3","136":"33.7","137":"35.6","138":"36.8","139":"34.9","140":"34.3","141":"36.6","142":"37.1","143":"35.3","144":"34.7","145":"30.0","146":"35.5","147":"33.2","148":"35.4","149":"38.8","150":"42.0","151":"44.4","152":"46.9","153":"47.1","154":"47.6","155":"48.1","156":"48.6","157":"49.2","158":"49.7","159":"50.3","160":"50.9","161":"51.4","162":"52.0","163":"52.6","164":"53.2","165":"53.8","166":"54.3","167":"54.9","168":"55.4","169":"56.0","170":"56.5","171":"57.0","172":"57.5","173":"57.8","174":"58.2","175":"58.5","176":"59.1","177":"59.5","178":"60.0","179":"60.6","180":"61.2","181":"61.9","182":"62.1","183":"63.4","184":"64.4","185":"65.7","186":"66.9","187":"68.0","188":"68.7","189":"69.4","190":"70.0","191":"70.5","192":"71.0","193":"71.4","194":"71.7","195":"72.0","196":"72.1","197":"72.3","198":"72.8","199":"73.0","200":"73.1","201":"73.5","202":"73.9","203":"74.1","204":"74.4","205":"74.5","206":"75.1","207":"75.4","208":"75.6","209":"75.9","210":"76.1","211":"76.3","212":"76.5","213":"76.7","214":"76.8","215":"77.0","216":"77.1","217":"77.3","218":"77.4","219":"77.6","220":"77.9"},{"1":"Andorra","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"NA","40":"NA","41":"NA","42":"NA","43":"NA","44":"NA","45":"NA","46":"NA","47":"NA","48":"NA","49":"NA","50":"NA","51":"NA","52":"NA","53":"NA","54":"NA","55":"NA","56":"NA","57":"NA","58":"NA","59":"NA","60":"NA","61":"NA","62":"NA","63":"NA","64":"NA","65":"NA","66":"NA","67":"NA","68":"NA","69":"NA","70":"NA","71":"NA","72":"NA","73":"NA","74":"NA","75":"NA","76":"NA","77":"NA","78":"NA","79":"NA","80":"NA","81":"NA","82":"NA","83":"NA","84":"NA","85":"NA","86":"NA","87":"NA","88":"NA","89":"NA","90":"NA","91":"NA","92":"NA","93":"NA","94":"NA","95":"NA","96":"NA","97":"NA","98":"NA","99":"NA","100":"NA","101":"NA","102":"NA","103":"NA","104":"NA","105":"NA","106":"NA","107":"NA","108":"NA","109":"NA","110":"NA","111":"NA","112":"NA","113":"NA","114":"NA","115":"NA","116":"NA","117":"NA","118":"NA","119":"NA","120":"NA","121":"NA","122":"NA","123":"NA","124":"NA","125":"NA","126":"NA","127":"NA","128":"NA","129":"NA","130":"NA","131":"NA","132":"NA","133":"NA","134":"NA","135":"NA","136":"NA","137":"NA","138":"NA","139":"NA","140":"NA","141":"NA","142":"NA","143":"NA","144":"NA","145":"NA","146":"NA","147":"NA","148":"NA","149":"NA","150":"NA","151":"NA","152":"NA","153":"NA","154":"NA","155":"NA","156":"NA","157":"NA","158":"NA","159":"NA","160":"NA","161":"NA","162":"NA","163":"NA","164":"NA","165":"NA","166":"NA","167":"NA","168":"NA","169":"NA","170":"NA","171":"NA","172":"76.0","173":"76.3","174":"76.6","175":"76.9","176":"77.2","177":"77.4","178":"77.7","179":"78.0","180":"78.3","181":"78.6","182":"78.7","183":"78.8","184":"78.8","185":"78.8","186":"79.0","187":"79.1","188":"79.2","189":"79.3","190":"79.3","191":"79.4","192":"79.5","193":"79.5","194":"79.6","195":"79.8","196":"80.0","197":"80.3","198":"80.6","199":"81.0","200":"81.3","201":"81.5","202":"81.8","203":"82.0","204":"82.3","205":"82.4","206":"82.3","207":"82.5","208":"82.5","209":"82.7","210":"82.7","211":"82.7","212":"82.7","213":"82.6","214":"82.6","215":"82.6","216":"82.6","217":"82.5","218":"82.5","219":"NA","220":"NA"},{"1":"Angola","2":"27.0","3":"27.0","4":"27.0","5":"27.0","6":"27.0","7":"27.0","8":"27.0","9":"27.0","10":"27.0","11":"27.0","12":"27.0","13":"27.0","14":"27.0","15":"27.0","16":"27.0","17":"27.0","18":"27.0","19":"27.0","20":"27.0","21":"27.0","22":"27.0","23":"27.0","24":"27.0","25":"27.0","26":"27.0","27":"27.0","28":"27.0","29":"27.0","30":"27.0","31":"27.0","32":"27.0","33":"27.0","34":"27.0","35":"27.0","36":"27.0","37":"27.0","38":"27.0","39":"27.0","40":"27.0","41":"27.0","42":"27.0","43":"27.0","44":"27.0","45":"27.0","46":"27.0","47":"27.0","48":"27.0","49":"27.0","50":"27.0","51":"27.0","52":"27.0","53":"27.0","54":"27.0","55":"27.0","56":"27.0","57":"27.0","58":"27.0","59":"27.0","60":"27.0","61":"27.0","62":"27.0","63":"27.0","64":"27.0","65":"27.0","66":"27.0","67":"27.0","68":"27.0","69":"27.0","70":"27.0","71":"27.0","72":"27.0","73":"27.1","74":"27.1","75":"27.2","76":"27.3","77":"27.4","78":"27.5","79":"27.6","80":"27.7","81":"27.8","82":"27.8","83":"27.9","84":"28.0","85":"28.1","86":"28.2","87":"28.3","88":"28.3","89":"28.4","90":"28.5","91":"28.6","92":"28.7","93":"28.8","94":"28.9","95":"28.9","96":"29.0","97":"29.1","98":"29.2","99":"29.3","100":"29.4","101":"29.4","102":"29.5","103":"29.6","104":"29.7","105":"29.8","106":"29.9","107":"30.0","108":"30.1","109":"30.1","110":"30.2","111":"30.3","112":"30.4","113":"30.5","114":"30.6","115":"30.6","116":"30.7","117":"30.8","118":"30.9","119":"31.0","120":"12.00","121":"31.2","122":"31.2","123":"31.3","124":"31.4","125":"31.5","126":"31.6","127":"31.7","128":"31.8","129":"31.8","130":"31.9","131":"32.0","132":"32.1","133":"32.2","134":"32.3","135":"32.4","136":"32.4","137":"32.5","138":"32.6","139":"32.7","140":"32.8","141":"32.9","142":"33.0","143":"33.3","144":"33.7","145":"34.0","146":"34.4","147":"34.8","148":"35.1","149":"35.5","150":"35.9","151":"36.2","152":"36.6","153":"36.9","154":"37.5","155":"38.1","156":"38.7","157":"39.3","158":"39.9","159":"40.5","160":"41.2","161":"41.8","162":"42.4","163":"43.0","164":"43.6","165":"44.3","166":"44.9","167":"45.5","168":"46.2","169":"46.8","170":"47.4","171":"48.1","172":"48.7","173":"49.0","174":"49.2","175":"49.4","176":"49.6","177":"49.5","178":"49.5","179":"49.6","180":"49.7","181":"49.8","182":"49.9","183":"50.0","184":"50.0","185":"50.1","186":"50.2","187":"50.3","188":"50.2","189":"50.0","190":"49.8","191":"50.2","192":"50.2","193":"50.8","194":"51.0","195":"49.7","196":"51.1","197":"52.0","198":"52.3","199":"52.7","200":"52.8","201":"52.9","202":"53.4","203":"53.6","204":"54.5","205":"55.1","206":"55.7","207":"56.5","208":"57.0","209":"57.8","210":"58.6","211":"59.3","212":"60.1","213":"60.9","214":"61.7","215":"62.5","216":"63.3","217":"64.0","218":"64.7","219":"64.9","220":"65.2"},{"1":"Antigua and Barbuda","2":"33.5","3":"33.5","4":"33.5","5":"33.5","6":"33.5","7":"33.5","8":"33.5","9":"33.5","10":"33.5","11":"33.5","12":"33.5","13":"33.5","14":"33.5","15":"33.5","16":"33.5","17":"33.5","18":"33.5","19":"33.5","20":"33.5","21":"33.5","22":"33.5","23":"33.5","24":"33.5","25":"33.5","26":"33.5","27":"33.5","28":"33.5","29":"33.5","30":"33.5","31":"33.5","32":"33.5","33":"33.5","34":"33.5","35":"33.5","36":"33.5","37":"33.5","38":"33.5","39":"33.5","40":"33.5","41":"33.5","42":"33.5","43":"33.5","44":"33.5","45":"33.5","46":"33.5","47":"33.5","48":"33.5","49":"33.5","50":"33.5","51":"33.5","52":"33.5","53":"33.5","54":"33.5","55":"33.5","56":"33.5","57":"33.5","58":"33.5","59":"33.5","60":"33.5","61":"33.5","62":"33.5","63":"33.5","64":"33.5","65":"33.5","66":"33.5","67":"33.5","68":"33.5","69":"33.5","70":"33.5","71":"33.5","72":"33.5","73":"33.5","74":"33.5","75":"33.5","76":"33.6","77":"33.6","78":"33.6","79":"33.6","80":"33.6","81":"33.6","82":"33.6","83":"33.6","84":"33.6","85":"33.6","86":"33.6","87":"33.6","88":"33.6","89":"33.6","90":"33.6","91":"33.6","92":"33.6","93":"33.6","94":"33.6","95":"33.6","96":"33.6","97":"33.7","98":"33.7","99":"33.7","100":"33.7","101":"33.7","102":"33.7","103":"33.7","104":"33.7","105":"33.7","106":"33.7","107":"33.7","108":"33.7","109":"33.7","110":"33.7","111":"33.7","112":"33.7","113":"33.7","114":"33.7","115":"33.8","116":"33.8","117":"33.8","118":"33.8","119":"33.8","120":"21.90","121":"33.8","122":"33.8","123":"33.8","124":"34.6","125":"35.5","126":"36.3","127":"37.1","128":"38.0","129":"38.8","130":"39.7","131":"40.5","132":"41.3","133":"42.2","134":"43.0","135":"43.9","136":"44.7","137":"45.5","138":"46.4","139":"47.2","140":"48.1","141":"48.9","142":"49.8","143":"50.6","144":"51.4","145":"52.3","146":"53.1","147":"54.0","148":"54.8","149":"55.6","150":"56.5","151":"57.4","152":"58.2","153":"58.5","154":"59.0","155":"59.5","156":"60.0","157":"60.5","158":"61.0","159":"61.5","160":"62.0","161":"62.4","162":"62.9","163":"63.4","164":"63.8","165":"64.2","166":"64.6","167":"65.0","168":"65.4","169":"65.8","170":"66.1","171":"66.5","172":"66.8","173":"67.2","174":"67.6","175":"68.0","176":"68.3","177":"68.4","178":"68.6","179":"69.0","180":"69.3","181":"70.0","182":"70.6","183":"71.1","184":"71.5","185":"72.1","186":"72.3","187":"72.5","188":"72.8","189":"73.1","190":"73.3","191":"73.5","192":"73.8","193":"74.0","194":"74.1","195":"74.2","196":"74.3","197":"74.4","198":"74.4","199":"74.8","200":"75.0","201":"74.9","202":"74.7","203":"75.1","204":"75.3","205":"75.5","206":"75.7","207":"75.9","208":"76.0","209":"76.4","210":"76.6","211":"76.9","212":"76.8","213":"76.9","214":"77.0","215":"77.3","216":"77.1","217":"77.2","218":"77.3","219":"77.4","220":"77.6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_income</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"tutorials/reshaping-and-combining-data/www/income_per_person.csv"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>country <span class="op">=</span> <span class="va">geo</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_income</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["1800"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["1801"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["1802"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["1803"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["1804"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["1805"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["1806"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["1807"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["1808"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["1809"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["1810"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["1811"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["1812"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["1813"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["1814"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["1815"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["1816"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["1817"],"name":[19],"type":["dbl"],"align":["right"]},{"label":["1818"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["1819"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["1820"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["1821"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["1822"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["1823"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["1824"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["1825"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["1826"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["1827"],"name":[29],"type":["dbl"],"align":["right"]},{"label":["1828"],"name":[30],"type":["dbl"],"align":["right"]},{"label":["1829"],"name":[31],"type":["dbl"],"align":["right"]},{"label":["1830"],"name":[32],"type":["dbl"],"align":["right"]},{"label":["1831"],"name":[33],"type":["dbl"],"align":["right"]},{"label":["1832"],"name":[34],"type":["dbl"],"align":["right"]},{"label":["1833"],"name":[35],"type":["dbl"],"align":["right"]},{"label":["1834"],"name":[36],"type":["dbl"],"align":["right"]},{"label":["1835"],"name":[37],"type":["dbl"],"align":["right"]},{"label":["1836"],"name":[38],"type":["dbl"],"align":["right"]},{"label":["1837"],"name":[39],"type":["dbl"],"align":["right"]},{"label":["1838"],"name":[40],"type":["dbl"],"align":["right"]},{"label":["1839"],"name":[41],"type":["dbl"],"align":["right"]},{"label":["1840"],"name":[42],"type":["dbl"],"align":["right"]},{"label":["1841"],"name":[43],"type":["dbl"],"align":["right"]},{"label":["1842"],"name":[44],"type":["dbl"],"align":["right"]},{"label":["1843"],"name":[45],"type":["dbl"],"align":["right"]},{"label":["1844"],"name":[46],"type":["dbl"],"align":["right"]},{"label":["1845"],"name":[47],"type":["dbl"],"align":["right"]},{"label":["1846"],"name":[48],"type":["dbl"],"align":["right"]},{"label":["1847"],"name":[49],"type":["dbl"],"align":["right"]},{"label":["1848"],"name":[50],"type":["dbl"],"align":["right"]},{"label":["1849"],"name":[51],"type":["dbl"],"align":["right"]},{"label":["1850"],"name":[52],"type":["dbl"],"align":["right"]},{"label":["1851"],"name":[53],"type":["dbl"],"align":["right"]},{"label":["1852"],"name":[54],"type":["dbl"],"align":["right"]},{"label":["1853"],"name":[55],"type":["dbl"],"align":["right"]},{"label":["1854"],"name":[56],"type":["dbl"],"align":["right"]},{"label":["1855"],"name":[57],"type":["dbl"],"align":["right"]},{"label":["1856"],"name":[58],"type":["dbl"],"align":["right"]},{"label":["1857"],"name":[59],"type":["dbl"],"align":["right"]},{"label":["1858"],"name":[60],"type":["dbl"],"align":["right"]},{"label":["1859"],"name":[61],"type":["dbl"],"align":["right"]},{"label":["1860"],"name":[62],"type":["dbl"],"align":["right"]},{"label":["1861"],"name":[63],"type":["dbl"],"align":["right"]},{"label":["1862"],"name":[64],"type":["dbl"],"align":["right"]},{"label":["1863"],"name":[65],"type":["dbl"],"align":["right"]},{"label":["1864"],"name":[66],"type":["dbl"],"align":["right"]},{"label":["1865"],"name":[67],"type":["dbl"],"align":["right"]},{"label":["1866"],"name":[68],"type":["dbl"],"align":["right"]},{"label":["1867"],"name":[69],"type":["dbl"],"align":["right"]},{"label":["1868"],"name":[70],"type":["dbl"],"align":["right"]},{"label":["1869"],"name":[71],"type":["dbl"],"align":["right"]},{"label":["1870"],"name":[72],"type":["dbl"],"align":["right"]},{"label":["1871"],"name":[73],"type":["dbl"],"align":["right"]},{"label":["1872"],"name":[74],"type":["dbl"],"align":["right"]},{"label":["1873"],"name":[75],"type":["dbl"],"align":["right"]},{"label":["1874"],"name":[76],"type":["dbl"],"align":["right"]},{"label":["1875"],"name":[77],"type":["dbl"],"align":["right"]},{"label":["1876"],"name":[78],"type":["dbl"],"align":["right"]},{"label":["1877"],"name":[79],"type":["dbl"],"align":["right"]},{"label":["1878"],"name":[80],"type":["dbl"],"align":["right"]},{"label":["1879"],"name":[81],"type":["dbl"],"align":["right"]},{"label":["1880"],"name":[82],"type":["dbl"],"align":["right"]},{"label":["1881"],"name":[83],"type":["dbl"],"align":["right"]},{"label":["1882"],"name":[84],"type":["dbl"],"align":["right"]},{"label":["1883"],"name":[85],"type":["dbl"],"align":["right"]},{"label":["1884"],"name":[86],"type":["dbl"],"align":["right"]},{"label":["1885"],"name":[87],"type":["dbl"],"align":["right"]},{"label":["1886"],"name":[88],"type":["dbl"],"align":["right"]},{"label":["1887"],"name":[89],"type":["dbl"],"align":["right"]},{"label":["1888"],"name":[90],"type":["dbl"],"align":["right"]},{"label":["1889"],"name":[91],"type":["dbl"],"align":["right"]},{"label":["1890"],"name":[92],"type":["dbl"],"align":["right"]},{"label":["1891"],"name":[93],"type":["dbl"],"align":["right"]},{"label":["1892"],"name":[94],"type":["dbl"],"align":["right"]},{"label":["1893"],"name":[95],"type":["dbl"],"align":["right"]},{"label":["1894"],"name":[96],"type":["dbl"],"align":["right"]},{"label":["1895"],"name":[97],"type":["dbl"],"align":["right"]},{"label":["1896"],"name":[98],"type":["dbl"],"align":["right"]},{"label":["1897"],"name":[99],"type":["dbl"],"align":["right"]},{"label":["1898"],"name":[100],"type":["dbl"],"align":["right"]},{"label":["1899"],"name":[101],"type":["dbl"],"align":["right"]},{"label":["1900"],"name":[102],"type":["dbl"],"align":["right"]},{"label":["1901"],"name":[103],"type":["dbl"],"align":["right"]},{"label":["1902"],"name":[104],"type":["dbl"],"align":["right"]},{"label":["1903"],"name":[105],"type":["dbl"],"align":["right"]},{"label":["1904"],"name":[106],"type":["dbl"],"align":["right"]},{"label":["1905"],"name":[107],"type":["dbl"],"align":["right"]},{"label":["1906"],"name":[108],"type":["dbl"],"align":["right"]},{"label":["1907"],"name":[109],"type":["dbl"],"align":["right"]},{"label":["1908"],"name":[110],"type":["dbl"],"align":["right"]},{"label":["1909"],"name":[111],"type":["dbl"],"align":["right"]},{"label":["1910"],"name":[112],"type":["dbl"],"align":["right"]},{"label":["1911"],"name":[113],"type":["dbl"],"align":["right"]},{"label":["1912"],"name":[114],"type":["dbl"],"align":["right"]},{"label":["1913"],"name":[115],"type":["dbl"],"align":["right"]},{"label":["1914"],"name":[116],"type":["dbl"],"align":["right"]},{"label":["1915"],"name":[117],"type":["dbl"],"align":["right"]},{"label":["1916"],"name":[118],"type":["dbl"],"align":["right"]},{"label":["1917"],"name":[119],"type":["dbl"],"align":["right"]},{"label":["1918"],"name":[120],"type":["dbl"],"align":["right"]},{"label":["1919"],"name":[121],"type":["dbl"],"align":["right"]},{"label":["1920"],"name":[122],"type":["dbl"],"align":["right"]},{"label":["1921"],"name":[123],"type":["dbl"],"align":["right"]},{"label":["1922"],"name":[124],"type":["dbl"],"align":["right"]},{"label":["1923"],"name":[125],"type":["dbl"],"align":["right"]},{"label":["1924"],"name":[126],"type":["dbl"],"align":["right"]},{"label":["1925"],"name":[127],"type":["dbl"],"align":["right"]},{"label":["1926"],"name":[128],"type":["dbl"],"align":["right"]},{"label":["1927"],"name":[129],"type":["dbl"],"align":["right"]},{"label":["1928"],"name":[130],"type":["dbl"],"align":["right"]},{"label":["1929"],"name":[131],"type":["dbl"],"align":["right"]},{"label":["1930"],"name":[132],"type":["dbl"],"align":["right"]},{"label":["1931"],"name":[133],"type":["dbl"],"align":["right"]},{"label":["1932"],"name":[134],"type":["dbl"],"align":["right"]},{"label":["1933"],"name":[135],"type":["dbl"],"align":["right"]},{"label":["1934"],"name":[136],"type":["dbl"],"align":["right"]},{"label":["1935"],"name":[137],"type":["dbl"],"align":["right"]},{"label":["1936"],"name":[138],"type":["dbl"],"align":["right"]},{"label":["1937"],"name":[139],"type":["dbl"],"align":["right"]},{"label":["1938"],"name":[140],"type":["dbl"],"align":["right"]},{"label":["1939"],"name":[141],"type":["dbl"],"align":["right"]},{"label":["1940"],"name":[142],"type":["dbl"],"align":["right"]},{"label":["1941"],"name":[143],"type":["dbl"],"align":["right"]},{"label":["1942"],"name":[144],"type":["dbl"],"align":["right"]},{"label":["1943"],"name":[145],"type":["dbl"],"align":["right"]},{"label":["1944"],"name":[146],"type":["dbl"],"align":["right"]},{"label":["1945"],"name":[147],"type":["dbl"],"align":["right"]},{"label":["1946"],"name":[148],"type":["dbl"],"align":["right"]},{"label":["1947"],"name":[149],"type":["dbl"],"align":["right"]},{"label":["1948"],"name":[150],"type":["dbl"],"align":["right"]},{"label":["1949"],"name":[151],"type":["dbl"],"align":["right"]},{"label":["1950"],"name":[152],"type":["dbl"],"align":["right"]},{"label":["1951"],"name":[153],"type":["dbl"],"align":["right"]},{"label":["1952"],"name":[154],"type":["dbl"],"align":["right"]},{"label":["1953"],"name":[155],"type":["dbl"],"align":["right"]},{"label":["1954"],"name":[156],"type":["dbl"],"align":["right"]},{"label":["1955"],"name":[157],"type":["dbl"],"align":["right"]},{"label":["1956"],"name":[158],"type":["dbl"],"align":["right"]},{"label":["1957"],"name":[159],"type":["dbl"],"align":["right"]},{"label":["1958"],"name":[160],"type":["dbl"],"align":["right"]},{"label":["1959"],"name":[161],"type":["dbl"],"align":["right"]},{"label":["1960"],"name":[162],"type":["dbl"],"align":["right"]},{"label":["1961"],"name":[163],"type":["dbl"],"align":["right"]},{"label":["1962"],"name":[164],"type":["dbl"],"align":["right"]},{"label":["1963"],"name":[165],"type":["dbl"],"align":["right"]},{"label":["1964"],"name":[166],"type":["dbl"],"align":["right"]},{"label":["1965"],"name":[167],"type":["dbl"],"align":["right"]},{"label":["1966"],"name":[168],"type":["dbl"],"align":["right"]},{"label":["1967"],"name":[169],"type":["dbl"],"align":["right"]},{"label":["1968"],"name":[170],"type":["dbl"],"align":["right"]},{"label":["1969"],"name":[171],"type":["dbl"],"align":["right"]},{"label":["1970"],"name":[172],"type":["dbl"],"align":["right"]},{"label":["1971"],"name":[173],"type":["dbl"],"align":["right"]},{"label":["1972"],"name":[174],"type":["dbl"],"align":["right"]},{"label":["1973"],"name":[175],"type":["dbl"],"align":["right"]},{"label":["1974"],"name":[176],"type":["dbl"],"align":["right"]},{"label":["1975"],"name":[177],"type":["dbl"],"align":["right"]},{"label":["1976"],"name":[178],"type":["dbl"],"align":["right"]},{"label":["1977"],"name":[179],"type":["dbl"],"align":["right"]},{"label":["1978"],"name":[180],"type":["dbl"],"align":["right"]},{"label":["1979"],"name":[181],"type":["dbl"],"align":["right"]},{"label":["1980"],"name":[182],"type":["dbl"],"align":["right"]},{"label":["1981"],"name":[183],"type":["dbl"],"align":["right"]},{"label":["1982"],"name":[184],"type":["dbl"],"align":["right"]},{"label":["1983"],"name":[185],"type":["dbl"],"align":["right"]},{"label":["1984"],"name":[186],"type":["dbl"],"align":["right"]},{"label":["1985"],"name":[187],"type":["dbl"],"align":["right"]},{"label":["1986"],"name":[188],"type":["dbl"],"align":["right"]},{"label":["1987"],"name":[189],"type":["dbl"],"align":["right"]},{"label":["1988"],"name":[190],"type":["dbl"],"align":["right"]},{"label":["1989"],"name":[191],"type":["dbl"],"align":["right"]},{"label":["1990"],"name":[192],"type":["dbl"],"align":["right"]},{"label":["1991"],"name":[193],"type":["dbl"],"align":["right"]},{"label":["1992"],"name":[194],"type":["dbl"],"align":["right"]},{"label":["1993"],"name":[195],"type":["dbl"],"align":["right"]},{"label":["1994"],"name":[196],"type":["dbl"],"align":["right"]},{"label":["1995"],"name":[197],"type":["dbl"],"align":["right"]},{"label":["1996"],"name":[198],"type":["dbl"],"align":["right"]},{"label":["1997"],"name":[199],"type":["dbl"],"align":["right"]},{"label":["1998"],"name":[200],"type":["dbl"],"align":["right"]},{"label":["1999"],"name":[201],"type":["dbl"],"align":["right"]},{"label":["2000"],"name":[202],"type":["dbl"],"align":["right"]},{"label":["2001"],"name":[203],"type":["dbl"],"align":["right"]},{"label":["2002"],"name":[204],"type":["dbl"],"align":["right"]},{"label":["2003"],"name":[205],"type":["dbl"],"align":["right"]},{"label":["2004"],"name":[206],"type":["dbl"],"align":["right"]},{"label":["2005"],"name":[207],"type":["dbl"],"align":["right"]},{"label":["2006"],"name":[208],"type":["dbl"],"align":["right"]},{"label":["2007"],"name":[209],"type":["dbl"],"align":["right"]},{"label":["2008"],"name":[210],"type":["dbl"],"align":["right"]},{"label":["2009"],"name":[211],"type":["dbl"],"align":["right"]},{"label":["2010"],"name":[212],"type":["dbl"],"align":["right"]},{"label":["2011"],"name":[213],"type":["dbl"],"align":["right"]},{"label":["2012"],"name":[214],"type":["dbl"],"align":["right"]},{"label":["2013"],"name":[215],"type":["dbl"],"align":["right"]},{"label":["2014"],"name":[216],"type":["dbl"],"align":["right"]},{"label":["2015"],"name":[217],"type":["dbl"],"align":["right"]},{"label":["2016"],"name":[218],"type":["dbl"],"align":["right"]},{"label":["2017"],"name":[219],"type":["dbl"],"align":["right"]},{"label":["2018"],"name":[220],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"603","3":"603","4":"603","5":"603","6":"603","7":"603","8":"603","9":"603","10":"603","11":"603","12":"604","13":"604","14":"604","15":"604","16":"604","17":"604","18":"604","19":"604","20":"604","21":"604","22":"604","23":"607","24":"609","25":"611","26":"613","27":"615","28":"617","29":"619","30":"621","31":"623","32":"625","33":"627","34":"630","35":"632","36":"634","37":"636","38":"638","39":"640","40":"643","41":"645","42":"647","43":"649","44":"651","45":"654","46":"656","47":"658","48":"660","49":"663","50":"665","51":"667","52":"669","53":"672","54":"674","55":"676","56":"678","57":"681","58":"683","59":"685","60":"688","61":"690","62":"692","63":"695","64":"697","65":"699","66":"702","67":"704","68":"707","69":"709","70":"711","71":"714","72":"716","73":"719","74":"721","75":"724","76":"726","77":"729","78":"731","79":"734","80":"736","81":"739","82":"741","83":"744","84":"746","85":"749","86":"751","87":"754","88":"756","89":"759","90":"761","91":"764","92":"767","93":"769","94":"772","95":"774","96":"777","97":"780","98":"782","99":"785","100":"788","101":"790","102":"793","103":"796","104":"798","105":"801","106":"804","107":"807","108":"809","109":"812","110":"815","111":"818","112":"820","113":"823","114":"826","115":"829","116":"833","117":"837","118":"841","119":"845","120":"849","121":"853","122":"857","123":"863","124":"868","125":"874","126":"880","127":"885","128":"891","129":"897","130":"903","131":"909","132":"915","133":"921","134":"927","135":"933","136":"939","137":"945","138":"951","139":"957","140":"963","141":"969","142":"976","143":"982","144":"988","145":"995","146":"1000","147":"1010","148":"1010","149":"1020","150":"1030","151":"1030","152":"1040","153":"1060","154":"1070","155":"1120","156":"1130","157":"1130","158":"1160","159":"1140","160":"1180","161":"1190","162":"1210","163":"1200","164":"1200","165":"1190","166":"1190","167":"1190","168":"1180","169":"1180","170":"1200","171":"1190","172":"1180","173":"1100","174":"1050","175":"1150","176":"1180","177":"1210","178":"1240","179":"1130","180":"1190","181":"1170","182":"1170","183":"1300","184":"1410","185":"1470","186":"1440","187":"1400","188":"1500","189":"1240","190":"1120","191":"1100","192":"1040","193":"1030","194":"950","195":"818","196":"732","197":"881","198":"904","199":"930","200":"956","201":"982","202":"972","203":"871","204":"1060","205":"1100","206":"1060","207":"1140","208":"1160","209":"1290","210":"1300","211":"1530","212":"1610","213":"1660","214":"1840","215":"1810","216":"1780","217":"1750","218":"1740","219":"1800","220":"1870"},{"1":"Albania","2":"667","3":"667","4":"667","5":"667","6":"667","7":"668","8":"668","9":"668","10":"668","11":"668","12":"668","13":"668","14":"668","15":"668","16":"668","17":"669","18":"669","19":"669","20":"669","21":"669","22":"669","23":"671","24":"672","25":"674","26":"675","27":"677","28":"678","29":"680","30":"681","31":"683","32":"684","33":"686","34":"688","35":"689","36":"691","37":"692","38":"694","39":"695","40":"697","41":"699","42":"700","43":"702","44":"703","45":"705","46":"707","47":"708","48":"710","49":"711","50":"713","51":"715","52":"716","53":"718","54":"720","55":"721","56":"723","57":"724","58":"726","59":"728","60":"729","61":"731","62":"733","63":"734","64":"736","65":"738","66":"739","67":"741","68":"743","69":"745","70":"746","71":"748","72":"750","73":"761","74":"772","75":"784","76":"795","77":"807","78":"819","79":"831","80":"844","81":"856","82":"869","83":"882","84":"895","85":"908","86":"922","87":"936","88":"950","89":"964","90":"978","91":"993","92":"1010","93":"1020","94":"1040","95":"1050","96":"1070","97":"1080","98":"1090","99":"1110","100":"1130","101":"1140","102":"1160","103":"1170","104":"1190","105":"1200","106":"1220","107":"1240","108":"1250","109":"1270","110":"1290","111":"1300","112":"1320","113":"1340","114":"1370","115":"1390","116":"1410","117":"1420","118":"1440","119":"1460","120":"1480","121":"1500","122":"1520","123":"1540","124":"1560","125":"1580","126":"1600","127":"1620","128":"1640","129":"1650","130":"1670","131":"1690","132":"1710","133":"1720","134":"1730","135":"1740","136":"1750","137":"1770","138":"1780","139":"1790","140":"1800","141":"1810","142":"1820","143":"1830","144":"1840","145":"1850","146":"1860","147":"1870","148":"1880","149":"1890","150":"1900","151":"1910","152":"1920","153":"2000","154":"2010","155":"2090","156":"2150","157":"2270","158":"2290","159":"2440","160":"2550","161":"2660","162":"2790","163":"2820","164":"2910","165":"3010","166":"3110","167":"3220","168":"3340","169":"3460","170":"3580","171":"3700","172":"3830","173":"3980","174":"4120","175":"4320","176":"4320","177":"4330","178":"4340","179":"4340","180":"4350","181":"4360","182":"4390","183":"4400","184":"4410","185":"4430","186":"4440","187":"4450","188":"4470","189":"4490","190":"4510","191":"4530","192":"4560","193":"3230","194":"3010","195":"3320","196":"3620","197":"4130","198":"4530","199":"4070","200":"4460","201":"5100","202":"5470","203":"5960","204":"6230","205":"6620","206":"7020","207":"7460","208":"7920","209":"8450","210":"9150","211":"9530","212":"9930","213":"10200","214":"10400","215":"10500","216":"10700","217":"11000","218":"11400","219":"11900","220":"12400"},{"1":"Algeria","2":"715","3":"716","4":"717","5":"718","6":"719","7":"720","8":"721","9":"722","10":"723","11":"724","12":"725","13":"726","14":"727","15":"728","16":"729","17":"730","18":"731","19":"732","20":"733","21":"734","22":"735","23":"743","24":"751","25":"759","26":"767","27":"775","28":"784","29":"792","30":"801","31":"810","32":"819","33":"828","34":"837","35":"846","36":"855","37":"864","38":"874","39":"883","40":"893","41":"903","42":"912","43":"922","44":"932","45":"943","46":"953","47":"963","48":"974","49":"984","50":"995","51":"1010","52":"1020","53":"1030","54":"1040","55":"1050","56":"1060","57":"1070","58":"1090","59":"1100","60":"1110","61":"1120","62":"1130","63":"1150","64":"1160","65":"1170","66":"1180","67":"1200","68":"1210","69":"1220","70":"1240","71":"1250","72":"1260","73":"1280","74":"1290","75":"1310","76":"1320","77":"1330","78":"1350","79":"1360","80":"1380","81":"1390","82":"1410","83":"1420","84":"1440","85":"1450","86":"1470","87":"1490","88":"1500","89":"1520","90":"1540","91":"1550","92":"1570","93":"1590","94":"1600","95":"1620","96":"1640","97":"1660","98":"1680","99":"1690","100":"1710","101":"1730","102":"1750","103":"1770","104":"1790","105":"1810","106":"1830","107":"1850","108":"1870","109":"1890","110":"1910","111":"1930","112":"1950","113":"2000","114":"2050","115":"2100","116":"2130","117":"2170","118":"2210","119":"2240","120":"2280","121":"2320","122":"2360","123":"2420","124":"2480","125":"2540","126":"2600","127":"2660","128":"2720","129":"2780","130":"2830","131":"2890","132":"2950","133":"3010","134":"3060","135":"3120","136":"3180","137":"3230","138":"3290","139":"3340","140":"3390","141":"3450","142":"3500","143":"3550","144":"3610","145":"3660","146":"3710","147":"3760","148":"3810","149":"3860","150":"3910","151":"3960","152":"4000","153":"3980","154":"4100","155":"4100","156":"4340","157":"4390","158":"4740","159":"5200","160":"5310","161":"6190","162":"6520","163":"5640","164":"4520","165":"5590","166":"5740","167":"5960","168":"5520","169":"5860","170":"6370","171":"6810","172":"7290","173":"6490","174":"7630","175":"7650","176":"7890","177":"8200","178":"8480","179":"8980","180":"9830","181":"10400","182":"10300","183":"10300","184":"10600","185":"10800","186":"11100","187":"11200","188":"10800","189":"10500","190":"10000","191":"10200","192":"10200","193":"9870","194":"9820","195":"9400","196":"9130","197":"9300","198":"9510","199":"9460","200":"9800","201":"9970","202":"10200","203":"10400","204":"10800","205":"11500","206":"11800","207":"12300","208":"12300","209":"12600","210":"12700","211":"12600","212":"12900","213":"13000","214":"13200","215":"13300","216":"13500","217":"13700","218":"14000","219":"13800","220":"13700"},{"1":"Andorra","2":"1200","3":"1200","4":"1200","5":"1200","6":"1210","7":"1210","8":"1210","9":"1210","10":"1220","11":"1220","12":"1220","13":"1220","14":"1220","15":"1230","16":"1230","17":"1230","18":"1230","19":"1240","20":"1240","21":"1240","22":"1240","23":"1260","24":"1270","25":"1290","26":"1300","27":"1320","28":"1330","29":"1350","30":"1370","31":"1380","32":"1400","33":"1410","34":"1430","35":"1450","36":"1470","37":"1480","38":"1500","39":"1520","40":"1540","41":"1550","42":"1570","43":"1590","44":"1610","45":"1630","46":"1650","47":"1670","48":"1690","49":"1710","50":"1730","51":"1750","52":"1770","53":"1790","54":"1810","55":"1830","56":"1860","57":"1880","58":"1900","59":"1920","60":"1950","61":"1970","62":"1990","63":"2020","64":"2040","65":"2060","66":"2090","67":"2110","68":"2140","69":"2160","70":"2190","71":"2220","72":"2240","73":"2270","74":"2300","75":"2320","76":"2350","77":"2380","78":"2410","79":"2440","80":"2460","81":"2490","82":"2520","83":"2550","84":"2580","85":"2610","86":"2650","87":"2680","88":"2710","89":"2740","90":"2770","91":"2810","92":"2840","93":"2870","94":"2910","95":"2940","96":"2980","97":"3010","98":"3050","99":"3080","100":"3120","101":"3160","102":"3200","103":"3230","104":"3270","105":"3310","106":"3350","107":"3390","108":"3430","109":"3470","110":"3510","111":"3550","112":"3600","113":"3640","114":"3680","115":"3730","116":"3790","117":"3850","118":"3920","119":"3980","120":"4050","121":"4120","122":"4190","123":"4260","124":"4330","125":"4410","126":"4480","127":"4560","128":"4640","129":"4720","130":"4800","131":"4880","132":"4970","133":"5050","134":"5140","135":"5230","136":"5320","137":"5410","138":"5500","139":"5600","140":"5690","141":"5790","142":"5890","143":"5990","144":"6100","145":"6200","146":"6310","147":"6410","148":"6520","149":"6640","150":"6750","151":"6870","152":"6980","153":"7550","154":"8160","155":"8830","156":"9540","157":"10300","158":"11200","159":"12100","160":"13000","161":"14100","162":"15200","163":"16500","164":"17800","165":"19200","166":"20800","167":"22500","168":"24300","169":"26300","170":"28400","171":"30700","172":"33200","173":"33000","174":"34000","175":"34900","176":"35300","177":"34100","178":"34000","179":"34000","180":"33500","181":"32500","182":"32100","183":"30800","184":"29900","185":"29100","186":"28400","187":"27800","188":"27600","189":"27900","190":"28200","191":"28400","192":"28400","193":"28000","194":"27200","195":"26000","196":"25900","197":"26100","198":"27200","199":"29700","200":"30800","201":"31900","202":"31700","203":"31800","204":"31900","205":"34500","206":"36300","207":"39800","208":"42700","209":"43400","210":"41400","211":"41700","212":"39000","213":"42000","214":"41900","215":"43700","216":"44900","217":"46600","218":"48200","219":"49800","220":"51500"},{"1":"Angola","2":"618","3":"620","4":"623","5":"626","6":"628","7":"631","8":"634","9":"637","10":"640","11":"642","12":"645","13":"648","14":"651","15":"654","16":"657","17":"660","18":"662","19":"665","20":"668","21":"671","22":"674","23":"677","24":"680","25":"683","26":"686","27":"689","28":"692","29":"695","30":"698","31":"701","32":"704","33":"708","34":"711","35":"714","36":"717","37":"720","38":"723","39":"726","40":"730","41":"733","42":"736","43":"739","44":"743","45":"746","46":"749","47":"752","48":"756","49":"759","50":"762","51":"766","52":"769","53":"773","54":"776","55":"779","56":"783","57":"786","58":"790","59":"793","60":"797","61":"800","62":"804","63":"807","64":"811","65":"814","66":"818","67":"822","68":"825","69":"829","70":"832","71":"836","72":"840","73":"844","74":"847","75":"851","76":"855","77":"858","78":"862","79":"866","80":"870","81":"874","82":"878","83":"881","84":"885","85":"889","86":"893","87":"897","88":"901","89":"905","90":"909","91":"913","92":"917","93":"921","94":"925","95":"929","96":"933","97":"937","98":"941","99":"946","100":"950","101":"954","102":"958","103":"962","104":"967","105":"971","106":"975","107":"979","108":"984","109":"988","110":"992","111":"997","112":"1000","113":"1010","114":"1010","115":"1010","116":"1050","117":"1080","118":"1110","119":"1140","120":"1170","121":"1210","122":"1250","123":"1290","124":"1330","125":"1370","126":"1410","127":"1460","128":"1500","129":"1550","130":"1600","131":"1650","132":"1700","133":"1760","134":"1810","135":"1870","136":"1930","137":"1990","138":"2060","139":"2120","140":"2190","141":"2260","142":"2330","143":"2400","144":"2480","145":"2560","146":"2640","147":"2720","148":"2810","149":"2900","150":"2990","151":"3080","152":"3180","153":"3260","154":"3340","155":"3420","156":"3290","157":"3510","158":"3400","159":"3670","160":"3810","161":"3770","162":"3860","163":"4310","164":"4130","165":"4280","166":"4690","167":"4960","168":"5170","169":"5390","170":"5230","171":"5300","172":"5550","173":"5780","174":"5670","175":"6000","176":"6060","177":"5620","178":"5200","179":"5110","180":"4720","181":"4610","182":"4590","183":"4250","184":"4110","185":"4140","186":"4240","187":"4260","188":"4290","189":"4480","190":"4620","191":"4530","192":"4390","193":"4210","194":"3790","195":"2760","196":"2770","197":"2970","198":"3210","199":"3370","200":"3500","201":"3510","202":"3510","203":"3540","204":"3180","205":"3240","206":"3460","207":"3950","208":"4600","209":"5440","210":"5980","211":"5910","212":"5900","213":"5910","214":"6000","215":"6190","216":"6260","217":"6230","218":"6030","219":"5940","220":"5850"},{"1":"Antigua and Barbuda","2":"757","3":"757","4":"757","5":"757","6":"757","7":"757","8":"757","9":"758","10":"758","11":"758","12":"758","13":"758","14":"758","15":"758","16":"758","17":"758","18":"759","19":"759","20":"759","21":"759","22":"759","23":"764","24":"769","25":"775","26":"780","27":"785","28":"790","29":"796","30":"801","31":"806","32":"812","33":"817","34":"823","35":"828","36":"834","37":"840","38":"845","39":"851","40":"857","41":"863","42":"868","43":"874","44":"880","45":"886","46":"892","47":"898","48":"904","49":"910","50":"917","51":"923","52":"929","53":"935","54":"942","55":"948","56":"954","57":"961","58":"967","59":"974","60":"980","61":"987","62":"994","63":"1000","64":"1010","65":"1010","66":"1020","67":"1030","68":"1040","69":"1040","70":"1050","71":"1060","72":"1060","73":"1070","74":"1080","75":"1090","76":"1090","77":"1100","78":"1110","79":"1110","80":"1120","81":"1130","82":"1140","83":"1150","84":"1150","85":"1160","86":"1170","87":"1180","88":"1180","89":"1190","90":"1200","91":"1210","92":"1220","93":"1220","94":"1230","95":"1240","96":"1250","97":"1260","98":"1270","99":"1280","100":"1280","101":"1290","102":"1300","103":"1310","104":"1320","105":"1330","106":"1340","107":"1350","108":"1360","109":"1360","110":"1370","111":"1380","112":"1390","113":"1400","114":"1410","115":"1420","116":"1460","117":"1490","118":"1530","119":"1570","120":"1600","121":"1640","122":"1680","123":"1730","124":"1770","125":"1810","126":"1860","127":"1900","128":"1950","129":"2000","130":"2040","131":"2090","132":"2150","133":"2200","134":"2250","135":"2310","136":"2360","137":"2420","138":"2480","139":"2540","140":"2600","141":"2670","142":"2730","143":"2800","144":"2870","145":"2940","146":"3010","147":"3080","148":"3160","149":"3230","150":"3310","151":"3390","152":"3470","153":"3560","154":"3650","155":"3730","156":"3830","157":"3920","158":"4010","159":"4110","160":"4210","161":"4310","162":"4420","163":"4530","164":"4640","165":"4750","166":"4870","167":"4980","168":"5100","169":"5230","170":"5360","171":"5490","172":"5620","173":"5890","174":"6160","175":"6540","176":"6650","177":"6230","178":"5670","179":"6140","180":"6440","181":"7250","182":"7850","183":"8350","184":"8470","185":"9150","186":"9960","187":"10900","188":"12100","189":"13400","190":"14800","191":"15900","192":"16400","193":"16600","194":"16500","195":"17000","196":"17700","197":"16500","198":"17100","199":"17500","200":"17900","201":"18100","202":"18800","203":"17500","204":"17500","205":"18300","206":"19200","207":"20100","208":"22500","209":"24200","210":"24000","211":"20800","212":"19100","213":"18600","214":"19100","215":"18900","216":"19500","217":"20100","218":"20800","219":"20900","220":"21000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"tutorials/reshaping-and-combining-data/www/population_total.csv"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>country <span class="op">=</span> <span class="va">geo</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_pop</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["1800"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["1801"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["1802"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["1803"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["1804"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["1805"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["1806"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["1807"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["1808"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["1809"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["1810"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["1811"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["1812"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["1813"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["1814"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["1815"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["1816"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["1817"],"name":[19],"type":["dbl"],"align":["right"]},{"label":["1818"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["1819"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["1820"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["1821"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["1822"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["1823"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["1824"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["1825"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["1826"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["1827"],"name":[29],"type":["dbl"],"align":["right"]},{"label":["1828"],"name":[30],"type":["dbl"],"align":["right"]},{"label":["1829"],"name":[31],"type":["dbl"],"align":["right"]},{"label":["1830"],"name":[32],"type":["dbl"],"align":["right"]},{"label":["1831"],"name":[33],"type":["dbl"],"align":["right"]},{"label":["1832"],"name":[34],"type":["dbl"],"align":["right"]},{"label":["1833"],"name":[35],"type":["dbl"],"align":["right"]},{"label":["1834"],"name":[36],"type":["dbl"],"align":["right"]},{"label":["1835"],"name":[37],"type":["dbl"],"align":["right"]},{"label":["1836"],"name":[38],"type":["dbl"],"align":["right"]},{"label":["1837"],"name":[39],"type":["dbl"],"align":["right"]},{"label":["1838"],"name":[40],"type":["dbl"],"align":["right"]},{"label":["1839"],"name":[41],"type":["dbl"],"align":["right"]},{"label":["1840"],"name":[42],"type":["dbl"],"align":["right"]},{"label":["1841"],"name":[43],"type":["dbl"],"align":["right"]},{"label":["1842"],"name":[44],"type":["dbl"],"align":["right"]},{"label":["1843"],"name":[45],"type":["dbl"],"align":["right"]},{"label":["1844"],"name":[46],"type":["dbl"],"align":["right"]},{"label":["1845"],"name":[47],"type":["dbl"],"align":["right"]},{"label":["1846"],"name":[48],"type":["dbl"],"align":["right"]},{"label":["1847"],"name":[49],"type":["dbl"],"align":["right"]},{"label":["1848"],"name":[50],"type":["dbl"],"align":["right"]},{"label":["1849"],"name":[51],"type":["dbl"],"align":["right"]},{"label":["1850"],"name":[52],"type":["dbl"],"align":["right"]},{"label":["1851"],"name":[53],"type":["dbl"],"align":["right"]},{"label":["1852"],"name":[54],"type":["dbl"],"align":["right"]},{"label":["1853"],"name":[55],"type":["dbl"],"align":["right"]},{"label":["1854"],"name":[56],"type":["dbl"],"align":["right"]},{"label":["1855"],"name":[57],"type":["dbl"],"align":["right"]},{"label":["1856"],"name":[58],"type":["dbl"],"align":["right"]},{"label":["1857"],"name":[59],"type":["dbl"],"align":["right"]},{"label":["1858"],"name":[60],"type":["dbl"],"align":["right"]},{"label":["1859"],"name":[61],"type":["dbl"],"align":["right"]},{"label":["1860"],"name":[62],"type":["dbl"],"align":["right"]},{"label":["1861"],"name":[63],"type":["dbl"],"align":["right"]},{"label":["1862"],"name":[64],"type":["dbl"],"align":["right"]},{"label":["1863"],"name":[65],"type":["dbl"],"align":["right"]},{"label":["1864"],"name":[66],"type":["dbl"],"align":["right"]},{"label":["1865"],"name":[67],"type":["dbl"],"align":["right"]},{"label":["1866"],"name":[68],"type":["dbl"],"align":["right"]},{"label":["1867"],"name":[69],"type":["dbl"],"align":["right"]},{"label":["1868"],"name":[70],"type":["dbl"],"align":["right"]},{"label":["1869"],"name":[71],"type":["dbl"],"align":["right"]},{"label":["1870"],"name":[72],"type":["dbl"],"align":["right"]},{"label":["1871"],"name":[73],"type":["dbl"],"align":["right"]},{"label":["1872"],"name":[74],"type":["dbl"],"align":["right"]},{"label":["1873"],"name":[75],"type":["dbl"],"align":["right"]},{"label":["1874"],"name":[76],"type":["dbl"],"align":["right"]},{"label":["1875"],"name":[77],"type":["dbl"],"align":["right"]},{"label":["1876"],"name":[78],"type":["dbl"],"align":["right"]},{"label":["1877"],"name":[79],"type":["dbl"],"align":["right"]},{"label":["1878"],"name":[80],"type":["dbl"],"align":["right"]},{"label":["1879"],"name":[81],"type":["dbl"],"align":["right"]},{"label":["1880"],"name":[82],"type":["dbl"],"align":["right"]},{"label":["1881"],"name":[83],"type":["dbl"],"align":["right"]},{"label":["1882"],"name":[84],"type":["dbl"],"align":["right"]},{"label":["1883"],"name":[85],"type":["dbl"],"align":["right"]},{"label":["1884"],"name":[86],"type":["dbl"],"align":["right"]},{"label":["1885"],"name":[87],"type":["dbl"],"align":["right"]},{"label":["1886"],"name":[88],"type":["dbl"],"align":["right"]},{"label":["1887"],"name":[89],"type":["dbl"],"align":["right"]},{"label":["1888"],"name":[90],"type":["dbl"],"align":["right"]},{"label":["1889"],"name":[91],"type":["dbl"],"align":["right"]},{"label":["1890"],"name":[92],"type":["dbl"],"align":["right"]},{"label":["1891"],"name":[93],"type":["dbl"],"align":["right"]},{"label":["1892"],"name":[94],"type":["dbl"],"align":["right"]},{"label":["1893"],"name":[95],"type":["dbl"],"align":["right"]},{"label":["1894"],"name":[96],"type":["dbl"],"align":["right"]},{"label":["1895"],"name":[97],"type":["dbl"],"align":["right"]},{"label":["1896"],"name":[98],"type":["dbl"],"align":["right"]},{"label":["1897"],"name":[99],"type":["dbl"],"align":["right"]},{"label":["1898"],"name":[100],"type":["dbl"],"align":["right"]},{"label":["1899"],"name":[101],"type":["dbl"],"align":["right"]},{"label":["1900"],"name":[102],"type":["dbl"],"align":["right"]},{"label":["1901"],"name":[103],"type":["dbl"],"align":["right"]},{"label":["1902"],"name":[104],"type":["dbl"],"align":["right"]},{"label":["1903"],"name":[105],"type":["dbl"],"align":["right"]},{"label":["1904"],"name":[106],"type":["dbl"],"align":["right"]},{"label":["1905"],"name":[107],"type":["dbl"],"align":["right"]},{"label":["1906"],"name":[108],"type":["dbl"],"align":["right"]},{"label":["1907"],"name":[109],"type":["dbl"],"align":["right"]},{"label":["1908"],"name":[110],"type":["dbl"],"align":["right"]},{"label":["1909"],"name":[111],"type":["dbl"],"align":["right"]},{"label":["1910"],"name":[112],"type":["dbl"],"align":["right"]},{"label":["1911"],"name":[113],"type":["dbl"],"align":["right"]},{"label":["1912"],"name":[114],"type":["dbl"],"align":["right"]},{"label":["1913"],"name":[115],"type":["dbl"],"align":["right"]},{"label":["1914"],"name":[116],"type":["dbl"],"align":["right"]},{"label":["1915"],"name":[117],"type":["dbl"],"align":["right"]},{"label":["1916"],"name":[118],"type":["dbl"],"align":["right"]},{"label":["1917"],"name":[119],"type":["dbl"],"align":["right"]},{"label":["1918"],"name":[120],"type":["dbl"],"align":["right"]},{"label":["1919"],"name":[121],"type":["dbl"],"align":["right"]},{"label":["1920"],"name":[122],"type":["dbl"],"align":["right"]},{"label":["1921"],"name":[123],"type":["dbl"],"align":["right"]},{"label":["1922"],"name":[124],"type":["dbl"],"align":["right"]},{"label":["1923"],"name":[125],"type":["dbl"],"align":["right"]},{"label":["1924"],"name":[126],"type":["dbl"],"align":["right"]},{"label":["1925"],"name":[127],"type":["dbl"],"align":["right"]},{"label":["1926"],"name":[128],"type":["dbl"],"align":["right"]},{"label":["1927"],"name":[129],"type":["dbl"],"align":["right"]},{"label":["1928"],"name":[130],"type":["dbl"],"align":["right"]},{"label":["1929"],"name":[131],"type":["dbl"],"align":["right"]},{"label":["1930"],"name":[132],"type":["dbl"],"align":["right"]},{"label":["1931"],"name":[133],"type":["dbl"],"align":["right"]},{"label":["1932"],"name":[134],"type":["dbl"],"align":["right"]},{"label":["1933"],"name":[135],"type":["dbl"],"align":["right"]},{"label":["1934"],"name":[136],"type":["dbl"],"align":["right"]},{"label":["1935"],"name":[137],"type":["dbl"],"align":["right"]},{"label":["1936"],"name":[138],"type":["dbl"],"align":["right"]},{"label":["1937"],"name":[139],"type":["dbl"],"align":["right"]},{"label":["1938"],"name":[140],"type":["dbl"],"align":["right"]},{"label":["1939"],"name":[141],"type":["dbl"],"align":["right"]},{"label":["1940"],"name":[142],"type":["dbl"],"align":["right"]},{"label":["1941"],"name":[143],"type":["dbl"],"align":["right"]},{"label":["1942"],"name":[144],"type":["dbl"],"align":["right"]},{"label":["1943"],"name":[145],"type":["dbl"],"align":["right"]},{"label":["1944"],"name":[146],"type":["dbl"],"align":["right"]},{"label":["1945"],"name":[147],"type":["dbl"],"align":["right"]},{"label":["1946"],"name":[148],"type":["dbl"],"align":["right"]},{"label":["1947"],"name":[149],"type":["dbl"],"align":["right"]},{"label":["1948"],"name":[150],"type":["dbl"],"align":["right"]},{"label":["1949"],"name":[151],"type":["dbl"],"align":["right"]},{"label":["1950"],"name":[152],"type":["dbl"],"align":["right"]},{"label":["1951"],"name":[153],"type":["dbl"],"align":["right"]},{"label":["1952"],"name":[154],"type":["dbl"],"align":["right"]},{"label":["1953"],"name":[155],"type":["dbl"],"align":["right"]},{"label":["1954"],"name":[156],"type":["dbl"],"align":["right"]},{"label":["1955"],"name":[157],"type":["dbl"],"align":["right"]},{"label":["1956"],"name":[158],"type":["dbl"],"align":["right"]},{"label":["1957"],"name":[159],"type":["dbl"],"align":["right"]},{"label":["1958"],"name":[160],"type":["dbl"],"align":["right"]},{"label":["1959"],"name":[161],"type":["dbl"],"align":["right"]},{"label":["1960"],"name":[162],"type":["dbl"],"align":["right"]},{"label":["1961"],"name":[163],"type":["dbl"],"align":["right"]},{"label":["1962"],"name":[164],"type":["dbl"],"align":["right"]},{"label":["1963"],"name":[165],"type":["dbl"],"align":["right"]},{"label":["1964"],"name":[166],"type":["dbl"],"align":["right"]},{"label":["1965"],"name":[167],"type":["dbl"],"align":["right"]},{"label":["1966"],"name":[168],"type":["dbl"],"align":["right"]},{"label":["1967"],"name":[169],"type":["dbl"],"align":["right"]},{"label":["1968"],"name":[170],"type":["dbl"],"align":["right"]},{"label":["1969"],"name":[171],"type":["dbl"],"align":["right"]},{"label":["1970"],"name":[172],"type":["dbl"],"align":["right"]},{"label":["1971"],"name":[173],"type":["dbl"],"align":["right"]},{"label":["1972"],"name":[174],"type":["dbl"],"align":["right"]},{"label":["1973"],"name":[175],"type":["dbl"],"align":["right"]},{"label":["1974"],"name":[176],"type":["dbl"],"align":["right"]},{"label":["1975"],"name":[177],"type":["dbl"],"align":["right"]},{"label":["1976"],"name":[178],"type":["dbl"],"align":["right"]},{"label":["1977"],"name":[179],"type":["dbl"],"align":["right"]},{"label":["1978"],"name":[180],"type":["dbl"],"align":["right"]},{"label":["1979"],"name":[181],"type":["dbl"],"align":["right"]},{"label":["1980"],"name":[182],"type":["dbl"],"align":["right"]},{"label":["1981"],"name":[183],"type":["dbl"],"align":["right"]},{"label":["1982"],"name":[184],"type":["dbl"],"align":["right"]},{"label":["1983"],"name":[185],"type":["dbl"],"align":["right"]},{"label":["1984"],"name":[186],"type":["dbl"],"align":["right"]},{"label":["1985"],"name":[187],"type":["dbl"],"align":["right"]},{"label":["1986"],"name":[188],"type":["dbl"],"align":["right"]},{"label":["1987"],"name":[189],"type":["dbl"],"align":["right"]},{"label":["1988"],"name":[190],"type":["dbl"],"align":["right"]},{"label":["1989"],"name":[191],"type":["dbl"],"align":["right"]},{"label":["1990"],"name":[192],"type":["dbl"],"align":["right"]},{"label":["1991"],"name":[193],"type":["dbl"],"align":["right"]},{"label":["1992"],"name":[194],"type":["dbl"],"align":["right"]},{"label":["1993"],"name":[195],"type":["dbl"],"align":["right"]},{"label":["1994"],"name":[196],"type":["dbl"],"align":["right"]},{"label":["1995"],"name":[197],"type":["dbl"],"align":["right"]},{"label":["1996"],"name":[198],"type":["dbl"],"align":["right"]},{"label":["1997"],"name":[199],"type":["dbl"],"align":["right"]},{"label":["1998"],"name":[200],"type":["dbl"],"align":["right"]},{"label":["1999"],"name":[201],"type":["dbl"],"align":["right"]},{"label":["2000"],"name":[202],"type":["dbl"],"align":["right"]},{"label":["2001"],"name":[203],"type":["dbl"],"align":["right"]},{"label":["2002"],"name":[204],"type":["dbl"],"align":["right"]},{"label":["2003"],"name":[205],"type":["dbl"],"align":["right"]},{"label":["2004"],"name":[206],"type":["dbl"],"align":["right"]},{"label":["2005"],"name":[207],"type":["dbl"],"align":["right"]},{"label":["2006"],"name":[208],"type":["dbl"],"align":["right"]},{"label":["2007"],"name":[209],"type":["dbl"],"align":["right"]},{"label":["2008"],"name":[210],"type":["dbl"],"align":["right"]},{"label":["2009"],"name":[211],"type":["dbl"],"align":["right"]},{"label":["2010"],"name":[212],"type":["dbl"],"align":["right"]},{"label":["2011"],"name":[213],"type":["dbl"],"align":["right"]},{"label":["2012"],"name":[214],"type":["dbl"],"align":["right"]},{"label":["2013"],"name":[215],"type":["dbl"],"align":["right"]},{"label":["2014"],"name":[216],"type":["dbl"],"align":["right"]},{"label":["2015"],"name":[217],"type":["dbl"],"align":["right"]},{"label":["2016"],"name":[218],"type":["dbl"],"align":["right"]},{"label":["2017"],"name":[219],"type":["dbl"],"align":["right"]},{"label":["2018"],"name":[220],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"3280000","3":"3280000","4":"3280000","5":"3280000","6":"3280000","7":"3280000","8":"3280000","9":"3280000","10":"3280000","11":"3280000","12":"3280000","13":"3280000","14":"3280000","15":"3280000","16":"3290000","17":"3290000","18":"3300000","19":"3300000","20":"3310000","21":"3320000","22":"3320000","23":"3330000","24":"3340000","25":"3350000","26":"3360000","27":"3380000","28":"3390000","29":"3400000","30":"3420000","31":"3430000","32":"3450000","33":"3470000","34":"3480000","35":"3500000","36":"3520000","37":"3540000","38":"3550000","39":"3570000","40":"3590000","41":"3610000","42":"3630000","43":"3640000","44":"3660000","45":"3680000","46":"3700000","47":"3720000","48":"3730000","49":"3750000","50":"3770000","51":"3790000","52":"3810000","53":"3830000","54":"3840000","55":"3860000","56":"3870000","57":"3890000","58":"3910000","59":"3920000","60":"3940000","61":"3960000","62":"3970000","63":"3990000","64":"4010000","65":"4030000","66":"4050000","67":"4070000","68":"4080000","69":"4110000","70":"4130000","71":"4150000","72":"4170000","73":"4190000","74":"4220000","75":"4240000","76":"4260000","77":"4290000","78":"4310000","79":"4340000","80":"4360000","81":"4390000","82":"4420000","83":"4450000","84":"4480000","85":"4500000","86":"4530000","87":"4560000","88":"4590000","89":"4620000","90":"4650000","91":"4680000","92":"4710000","93":"4740000","94":"4770000","95":"4800000","96":"4830000","97":"4860000","98":"4890000","99":"4930000","100":"4960000","101":"4990000","102":"5020000","103":"5050000","104":"5090000","105":"5120000","106":"5150000","107":"5180000","108":"5220000","109":"5250000","110":"5280000","111":"5320000","112":"5350000","113":"5390000","114":"5420000","115":"5460000","116":"5500000","117":"5550000","118":"5600000","119":"5650000","120":"5700000","121":"5760000","122":"5810000","123":"5870000","124":"5930000","125":"5980000","126":"6040000","127":"6100000","128":"6160000","129":"6210000","130":"6270000","131":"6330000","132":"6390000","133":"6460000","134":"6520000","135":"6580000","136":"6640000","137":"6710000","138":"6770000","139":"6840000","140":"6900000","141":"6970000","142":"7030000","143":"7100000","144":"7170000","145":"7240000","146":"7310000","147":"7380000","148":"7450000","149":"7520000","150":"7590000","151":"7660000","152":"7750000","153":"7840000","154":"7930000","155":"8040000","156":"8150000","157":"8270000","158":"8400000","159":"8540000","160":"8680000","161":"8830000","162":"9000000","163":"9170000","164":"9350000","165":"9530000","166":"9730000","167":"9940000","168":"10200000","169":"10400000","170":"10600000","171":"10900000","172":"11100000","173":"11400000","174":"11700000","175":"12000000","176":"12300000","177":"12600000","178":"12800000","179":"13100000","180":"13200000","181":"13300000","182":"13200000","183":"13100000","184":"12700000","185":"12400000","186":"12000000","187":"11800000","188":"11600000","189":"11500000","190":"11500000","191":"11800000","192":"12200000","193":"13000000","194":"14000000","195":"15100000","196":"16200000","197":"17100000","198":"17800000","199":"18400000","200":"18900000","201":"19400000","202":"20100000","203":"21000000","204":"22000000","205":"23100000","206":"24100000","207":"25100000","208":"25900000","209":"26600000","210":"27300000","211":"28000000","212":"28800000","213":"29700000","214":"30700000","215":"31700000","216":"32800000","217":"33700000","218":"34700000","219":"35500000","220":"36400000"},{"1":"Albania","2":"410000","3":"412000","4":"413000","5":"414000","6":"416000","7":"417000","8":"418000","9":"420000","10":"421000","11":"422000","12":"424000","13":"425000","14":"426000","15":"428000","16":"429000","17":"431000","18":"432000","19":"434000","20":"435000","21":"437000","22":"439000","23":"440000","24":"442000","25":"444000","26":"446000","27":"448000","28":"449000","29":"451000","30":"453000","31":"455000","32":"457000","33":"459000","34":"461000","35":"463000","36":"466000","37":"468000","38":"470000","39":"472000","40":"474000","41":"476000","42":"478000","43":"480000","44":"483000","45":"485000","46":"488000","47":"491000","48":"494000","49":"497000","50":"500000","51":"503000","52":"507000","53":"511000","54":"515000","55":"519000","56":"523000","57":"528000","58":"533000","59":"537000","60":"542000","61":"547000","62":"553000","63":"558000","64":"564000","65":"569000","66":"575000","67":"581000","68":"586000","69":"592000","70":"598000","71":"604000","72":"610000","73":"616000","74":"622000","75":"628000","76":"634000","77":"641000","78":"647000","79":"653000","80":"660000","81":"666000","82":"673000","83":"679000","84":"686000","85":"692000","86":"699000","87":"706000","88":"713000","89":"720000","90":"727000","91":"734000","92":"742000","93":"749000","94":"757000","95":"764000","96":"772000","97":"780000","98":"788000","99":"796000","100":"804000","101":"812000","102":"820000","103":"828000","104":"836000","105":"844000","106":"852000","107":"860000","108":"868000","109":"876000","110":"884000","111":"893000","112":"901000","113":"910000","114":"918000","115":"926000","116":"932000","117":"938000","118":"943000","119":"949000","120":"954000","121":"959000","122":"964000","123":"969000","124":"974000","125":"979000","126":"984000","127":"989000","128":"995000","129":"1000000","130":"1010000","131":"1010000","132":"1020000","133":"1020000","134":"1030000","135":"1030000","136":"1040000","137":"1040000","138":"1050000","139":"1060000","140":"1080000","141":"1100000","142":"1120000","143":"1140000","144":"1150000","145":"1160000","146":"1160000","147":"1180000","148":"1200000","149":"1210000","150":"1230000","151":"1250000","152":"1260000","153":"1290000","154":"1320000","155":"1350000","156":"1380000","157":"1420000","158":"1460000","159":"1500000","160":"1540000","161":"1590000","162":"1640000","163":"1690000","164":"1740000","165":"1790000","166":"1840000","167":"1900000","168":"1950000","169":"2000000","170":"2050000","171":"2100000","172":"2150000","173":"2200000","174":"2250000","175":"2310000","176":"2360000","177":"2410000","178":"2460000","179":"2520000","180":"2570000","181":"2630000","182":"2680000","183":"2740000","184":"2790000","185":"2840000","186":"2900000","187":"2970000","188":"3040000","189":"3120000","190":"3200000","191":"3250000","192":"3280000","193":"3280000","194":"3240000","195":"3190000","196":"3140000","197":"3110000","198":"3090000","199":"3090000","200":"3100000","201":"3120000","202":"3120000","203":"3120000","204":"3120000","205":"3110000","206":"3100000","207":"3080000","208":"3050000","209":"3020000","210":"2990000","211":"2960000","212":"2940000","213":"2930000","214":"2920000","215":"2920000","216":"2920000","217":"2920000","218":"2930000","219":"2930000","220":"2930000"},{"1":"Algeria","2":"2500000","3":"2510000","4":"2520000","5":"2530000","6":"2540000","7":"2550000","8":"2560000","9":"2570000","10":"2580000","11":"2590000","12":"2600000","13":"2600000","14":"2610000","15":"2630000","16":"2640000","17":"2650000","18":"2660000","19":"2670000","20":"2690000","21":"2700000","22":"2710000","23":"2730000","24":"2740000","25":"2760000","26":"2770000","27":"2790000","28":"2810000","29":"2820000","30":"2840000","31":"2860000","32":"2880000","33":"2900000","34":"2920000","35":"2940000","36":"2960000","37":"2980000","38":"3000000","39":"3020000","40":"3040000","41":"3060000","42":"3080000","43":"3100000","44":"3120000","45":"3150000","46":"3170000","47":"3190000","48":"3210000","49":"3230000","50":"3250000","51":"3280000","52":"3300000","53":"3320000","54":"3350000","55":"3370000","56":"3390000","57":"3420000","58":"3440000","59":"3460000","60":"3490000","61":"3510000","62":"3540000","63":"3560000","64":"3590000","65":"3610000","66":"3640000","67":"3670000","68":"3690000","69":"3720000","70":"3750000","71":"3780000","72":"3810000","73":"3840000","74":"3870000","75":"3900000","76":"3930000","77":"3970000","78":"4000000","79":"4030000","80":"4070000","81":"4110000","82":"4140000","83":"4180000","84":"4220000","85":"4250000","86":"4290000","87":"4330000","88":"4370000","89":"4410000","90":"4450000","91":"4490000","92":"4530000","93":"4570000","94":"4610000","95":"4650000","96":"4690000","97":"4730000","98":"4770000","99":"4820000","100":"4860000","101":"4900000","102":"4950000","103":"4990000","104":"5030000","105":"5080000","106":"5120000","107":"5170000","108":"5220000","109":"5260000","110":"5310000","111":"5360000","112":"5400000","113":"5450000","114":"5500000","115":"5560000","116":"5620000","117":"5690000","118":"5770000","119":"5840000","120":"5910000","121":"5990000","122":"6060000","123":"6140000","124":"6220000","125":"6300000","126":"6380000","127":"6460000","128":"6540000","129":"6620000","130":"6710000","131":"6790000","132":"6880000","133":"6960000","134":"7050000","135":"7140000","136":"7230000","137":"7320000","138":"7410000","139":"7510000","140":"7600000","141":"7700000","142":"7800000","143":"7900000","144":"8000000","145":"8100000","146":"8200000","147":"8300000","148":"8410000","149":"8510000","150":"8620000","151":"8730000","152":"8870000","153":"9040000","154":"9220000","155":"9410000","156":"9610000","157":"9830000","158":"10100000","159":"10300000","160":"10600000","161":"10800000","162":"11100000","163":"11400000","164":"11700000","165":"12000000","166":"12300000","167":"12600000","168":"13000000","169":"13400000","170":"13700000","171":"14100000","172":"14600000","173":"15000000","174":"15400000","175":"15800000","176":"16200000","177":"16700000","178":"17200000","179":"17700000","180":"18200000","181":"18800000","182":"19300000","183":"19900000","184":"20600000","185":"21200000","186":"21900000","187":"22600000","188":"23200000","189":"23900000","190":"24600000","191":"25300000","192":"25900000","193":"26600000","194":"27200000","195":"27800000","196":"28400000","197":"28900000","198":"29400000","199":"29900000","200":"30300000","201":"30800000","202":"31200000","203":"31600000","204":"32000000","205":"32400000","206":"32800000","207":"33300000","208":"33800000","209":"34300000","210":"34900000","211":"35500000","212":"36100000","213":"36800000","214":"37600000","215":"38300000","216":"39100000","217":"39900000","218":"40600000","219":"41300000","220":"42000000"},{"1":"Andorra","2":"2650","3":"2650","4":"2650","5":"2650","6":"2650","7":"2650","8":"2650","9":"2650","10":"2650","11":"2650","12":"2650","13":"2660","14":"2660","15":"2660","16":"2660","17":"2670","18":"2670","19":"2680","20":"2680","21":"2690","22":"2700","23":"2710","24":"2720","25":"2730","26":"2740","27":"2760","28":"2770","29":"2790","30":"2800","31":"2820","32":"2840","33":"2850","34":"2870","35":"2890","36":"2910","37":"2930","38":"2950","39":"2970","40":"2990","41":"3010","42":"3030","43":"3050","44":"3070","45":"3090","46":"3110","47":"3130","48":"3150","49":"3170","50":"3190","51":"3210","52":"3230","53":"3250","54":"3270","55":"3290","56":"3310","57":"3330","58":"3350","59":"3370","60":"3390","61":"3410","62":"3440","63":"3460","64":"3480","65":"3500","66":"3520","67":"3540","68":"3570","69":"3590","70":"3610","71":"3630","72":"3650","73":"3680","74":"3700","75":"3720","76":"3740","77":"3770","78":"3790","79":"3810","80":"3840","81":"3860","82":"3890","83":"3910","84":"3930","85":"3960","86":"3980","87":"4010","88":"4030","89":"4060","90":"4080","91":"4110","92":"4130","93":"4160","94":"4180","95":"4210","96":"4230","97":"4260","98":"4290","99":"4310","100":"4340","101":"4370","102":"4390","103":"4420","104":"4450","105":"4470","106":"4500","107":"4530","108":"4560","109":"4590","110":"4610","111":"4640","112":"4670","113":"4700","114":"4730","115":"4760","116":"4790","117":"4820","118":"4850","119":"4880","120":"4910","121":"4940","122":"4970","123":"5010","124":"5040","125":"5070","126":"5110","127":"5140","128":"5170","129":"5210","130":"5240","131":"5270","132":"5310","133":"5340","134":"5380","135":"5410","136":"5450","137":"5480","138":"5520","139":"5560","140":"5590","141":"5630","142":"5670","143":"5700","144":"5740","145":"5780","146":"5820","147":"5850","148":"5890","149":"5930","150":"5970","151":"6010","152":"6200","153":"6690","154":"7250","155":"7870","156":"8530","157":"9230","158":"9990","159":"10800","160":"11600","161":"12500","162":"13400","163":"14400","164":"15400","165":"16400","166":"17500","167":"18500","168":"19600","169":"20800","170":"21900","171":"23100","172":"24300","173":"25600","174":"26900","175":"28200","176":"29500","177":"30700","178":"31800","179":"32800","180":"33700","181":"34800","182":"36100","183":"37500","184":"39100","185":"40900","186":"42700","187":"44600","188":"46500","189":"48500","190":"50400","191":"52400","192":"54500","193":"56700","194":"58900","195":"61000","196":"62700","197":"63900","198":"64400","199":"64300","200":"64100","201":"64400","202":"65400","203":"67300","204":"70000","205":"73200","206":"76200","207":"78900","208":"81000","209":"82700","210":"83900","211":"84500","212":"84400","213":"83800","214":"82400","215":"80800","216":"79200","217":"78000","218":"77300","219":"77000","220":"77000"},{"1":"Angola","2":"1570000","3":"1570000","4":"1570000","5":"1570000","6":"1570000","7":"1570000","8":"1570000","9":"1570000","10":"1570000","11":"1570000","12":"1570000","13":"1570000","14":"1570000","15":"1570000","16":"1570000","17":"1580000","18":"1580000","19":"1580000","20":"1590000","21":"1590000","22":"1600000","23":"1600000","24":"1610000","25":"1620000","26":"1630000","27":"1630000","28":"1640000","29":"1650000","30":"1660000","31":"1670000","32":"1690000","33":"1700000","34":"1710000","35":"1720000","36":"1740000","37":"1750000","38":"1760000","39":"1770000","40":"1790000","41":"1800000","42":"1810000","43":"1830000","44":"1840000","45":"1850000","46":"1870000","47":"1880000","48":"1890000","49":"1910000","50":"1920000","51":"1940000","52":"1950000","53":"1970000","54":"1980000","55":"2000000","56":"2020000","57":"2040000","58":"2050000","59":"2070000","60":"2090000","61":"2110000","62":"2130000","63":"2140000","64":"2160000","65":"2180000","66":"2200000","67":"2220000","68":"2240000","69":"2260000","70":"2280000","71":"2300000","72":"2320000","73":"2340000","74":"2360000","75":"2380000","76":"2400000","77":"2420000","78":"2440000","79":"2460000","80":"2480000","81":"2500000","82":"2520000","83":"2550000","84":"2570000","85":"2590000","86":"2610000","87":"2630000","88":"2660000","89":"2680000","90":"2700000","91":"2730000","92":"2750000","93":"2770000","94":"2800000","95":"2820000","96":"2850000","97":"2870000","98":"2890000","99":"2920000","100":"2940000","101":"2970000","102":"3000000","103":"3020000","104":"3050000","105":"3070000","106":"3100000","107":"3130000","108":"3150000","109":"3180000","110":"3210000","111":"3230000","112":"3260000","113":"3290000","114":"3320000","115":"3350000","116":"3380000","117":"3400000","118":"3430000","119":"3460000","120":"3490000","121":"3510000","122":"3540000","123":"3560000","124":"3590000","125":"3620000","126":"3640000","127":"3670000","128":"3700000","129":"3720000","130":"3750000","131":"3780000","132":"3800000","133":"3830000","134":"3860000","135":"3890000","136":"3920000","137":"3940000","138":"3970000","139":"4000000","140":"4030000","141":"4060000","142":"4090000","143":"4130000","144":"4180000","145":"4220000","146":"4260000","147":"4310000","148":"4350000","149":"4400000","150":"4440000","151":"4490000","152":"4550000","153":"4660000","154":"4770000","155":"4890000","156":"5000000","157":"5120000","158":"5220000","159":"5330000","160":"5430000","161":"5540000","162":"5640000","163":"5750000","164":"5870000","165":"5980000","166":"6090000","167":"6200000","168":"6310000","169":"6410000","170":"6520000","171":"6640000","172":"6780000","173":"6930000","174":"7090000","175":"7280000","176":"7470000","177":"7680000","178":"7900000","179":"8130000","180":"8380000","181":"8640000","182":"8930000","183":"9240000","184":"9580000","185":"9930000","186":"10300000","187":"10600000","188":"10900000","189":"11200000","190":"11500000","191":"11800000","192":"12200000","193":"12600000","194":"13000000","195":"13400000","196":"13800000","197":"14300000","198":"14700000","199":"15100000","200":"15500000","201":"15900000","202":"16400000","203":"17000000","204":"17600000","205":"18200000","206":"18900000","207":"19600000","208":"20300000","209":"21000000","210":"21800000","211":"22500000","212":"23400000","213":"24200000","214":"25100000","215":"26000000","216":"26900000","217":"27900000","218":"28800000","219":"29800000","220":"30800000"},{"1":"Antigua and Barbuda","2":"37000","3":"37000","4":"37000","5":"37000","6":"37000","7":"37000","8":"37000","9":"37000","10":"37000","11":"37000","12":"37000","13":"37000","14":"37000","15":"37000","16":"37000","17":"37000","18":"37000","19":"37000","20":"37000","21":"37000","22":"37000","23":"37000","24":"37000","25":"37000","26":"37000","27":"37000","28":"37000","29":"37000","30":"37000","31":"37000","32":"37000","33":"37000","34":"37000","35":"37000","36":"37000","37":"37000","38":"37000","39":"37000","40":"37000","41":"37000","42":"37000","43":"37000","44":"37000","45":"37000","46":"37000","47":"37000","48":"37000","49":"37000","50":"37000","51":"37000","52":"37000","53":"37000","54":"37000","55":"37000","56":"36900","57":"36900","58":"36800","59":"36800","60":"36700","61":"36600","62":"36500","63":"36400","64":"36300","65":"36200","66":"36100","67":"36000","68":"35900","69":"35800","70":"35700","71":"35600","72":"35500","73":"35400","74":"35400","75":"35200","76":"35200","77":"35100","78":"35100","79":"35100","80":"35100","81":"35100","82":"35200","83":"35300","84":"35400","85":"35500","86":"35600","87":"35700","88":"35900","89":"36000","90":"36100","91":"36200","92":"36300","93":"36300","94":"36300","95":"36200","96":"36100","97":"36000","98":"35800","99":"35600","100":"35400","101":"35200","102":"34900","103":"34700","104":"34400","105":"34200","106":"33900","107":"33600","108":"33300","109":"33000","110":"32700","111":"32400","112":"32100","113":"31800","114":"31600","115":"31400","116":"31200","117":"31000","118":"30800","119":"30600","120":"30400","121":"30200","122":"30000","123":"30000","124":"30200","125":"30600","126":"31000","127":"31500","128":"31900","129":"32300","130":"32800","131":"33200","132":"33600","133":"34100","134":"34600","135":"35000","136":"35500","137":"36000","138":"36500","139":"37000","140":"37500","141":"38000","142":"38500","143":"39000","144":"39500","145":"40100","146":"40600","147":"41200","148":"41900","149":"42800","150":"43800","151":"44900","152":"46300","153":"48400","154":"50000","155":"51300","156":"52200","157":"52900","158":"53400","159":"53800","160":"54200","161":"54700","162":"55300","163":"56100","164":"57100","165":"58300","166":"59500","167":"60800","168":"62100","169":"63400","170":"64700","171":"65900","172":"67100","173":"68200","174":"69200","175":"70100","176":"70900","177":"71600","178":"72300","179":"72900","180":"73300","181":"73500","182":"73400","183":"73100","184":"72400","185":"71600","186":"70700","187":"69800","188":"68800","189":"67800","190":"67100","191":"66600","192":"66700","193":"67300","194":"68400","195":"69900","196":"71700","197":"73600","198":"75600","199":"77700","200":"79900","201":"81800","202":"83600","203":"85100","204":"86300","205":"87300","206":"88300","207":"89300","208":"90300","209":"91400","210":"92500","211":"93600","212":"94700","213":"95700","214":"96800","215":"97800","216":"98900","217":"99900","218":"101000","219":"102000","220":"103000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_countries</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"tutorials/reshaping-and-combining-data/www/countries_total.csv"</span>,</span>
<span>                           col_select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>country <span class="op">=</span> <span class="va">name</span>, country_id <span class="op">=</span> <span class="va">`alpha-2`</span>,<span class="va">region</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_countries</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["country_id"],"name":[2],"type":["chr"],"align":["left"]},{"label":["region"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"Afghanistan","2":"AF","3":"Asia"},{"1":"\\xea\\xf3land Islands","2":"AX","3":"Europe"},{"1":"Albania","2":"AL","3":"Europe"},{"1":"Algeria","2":"DZ","3":"Africa"},{"1":"American Samoa","2":"AS","3":"Oceania"},{"1":"Andorra","2":"AD","3":"Europe"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="reshape-datasets" class="level3" data-number="32.3.2"><h3 data-number="32.3.2" class="anchored" data-anchor-id="reshape-datasets">
<span class="header-section-number">32.3.2</span> Reshape datasets</h3>
<ul>
<li>Now the life expectancy, income and population totals need to be pivot to be long data, just like we did with the french fry data.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_life_long</span> <span class="op">&lt;-</span> <span class="va">data_life</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"life_exp"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_life_long</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["year"],"name":[2],"type":["chr"],"align":["left"]},{"label":["life_exp"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"1800","3":"28.2"},{"1":"Afghanistan","2":"1801","3":"28.2"},{"1":"Afghanistan","2":"1802","3":"28.2"},{"1":"Afghanistan","2":"1803","3":"28.2"},{"1":"Afghanistan","2":"1804","3":"28.2"},{"1":"Afghanistan","2":"1805","3":"28.2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_income_long</span> <span class="op">&lt;-</span> <span class="va">data_income</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"income"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_income_long</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["year"],"name":[2],"type":["chr"],"align":["left"]},{"label":["income"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"1800","3":"603"},{"1":"Afghanistan","2":"1801","3":"603"},{"1":"Afghanistan","2":"1802","3":"603"},{"1":"Afghanistan","2":"1803","3":"603"},{"1":"Afghanistan","2":"1804","3":"603"},{"1":"Afghanistan","2":"1805","3":"603"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_pop_long</span> <span class="op">&lt;-</span> <span class="va">data_pop</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"population"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_pop_long</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["year"],"name":[2],"type":["chr"],"align":["left"]},{"label":["population"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"1800","3":"3280000"},{"1":"Afghanistan","2":"1801","3":"3280000"},{"1":"Afghanistan","2":"1802","3":"3280000"},{"1":"Afghanistan","2":"1803","3":"3280000"},{"1":"Afghanistan","2":"1804","3":"3280000"},{"1":"Afghanistan","2":"1805","3":"3280000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="combine-datasets" class="level3" data-number="32.3.3"><h3 data-number="32.3.3" class="anchored" data-anchor-id="combine-datasets">
<span class="header-section-number">32.3.3</span> Combine datasets</h3>
<ul>
<li>Now that each dataset has been converted to long format, we can begin to combine each of them into a single dataset.</li>
</ul>
<p><img src="tutorials/reshaping-and-combining-data/images/tableau-flow.png" class="img-fluid" style="width:100.0%"></p>
<p><img src="tutorials/reshaping-and-combining-data/images/joins.png" class="img-fluid" style="width:75.0%"></p>
<p><img src="tutorials/reshaping-and-combining-data/images/joins-example.png" class="img-fluid" style="width:75.0%"></p>
<ul>
<li><p>The first step is to inner join the life expectancy, income, and population databy country and year. This will keep all observations with matching (Country, Year) values. This can be done in with a series of pipes.</p></li>
<li><p>Then we can take that result and left join with the countries total data to add in the country abbreviations.</p></li>
<li><p>The join family of functions <code>*_join()</code> use <code>join_by(lhs == rhs)</code> to specify which columns to join by.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_gapminder</span> <span class="op">&lt;-</span> <span class="va">data_life_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">data_income_long</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html">join_by</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">data_pop_long</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html">join_by</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">data_countries</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html">join_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_gapminder</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["year"],"name":[2],"type":["chr"],"align":["left"]},{"label":["life_exp"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["income"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["population"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["country_id"],"name":[6],"type":["chr"],"align":["left"]},{"label":["region"],"name":[7],"type":["chr"],"align":["left"]}],"data":[{"1":"Afghanistan","2":"1800","3":"28.2","4":"603","5":"3280000","6":"AF","7":"Asia"},{"1":"Afghanistan","2":"1801","3":"28.2","4":"603","5":"3280000","6":"AF","7":"Asia"},{"1":"Afghanistan","2":"1802","3":"28.2","4":"603","5":"3280000","6":"AF","7":"Asia"},{"1":"Afghanistan","2":"1803","3":"28.2","4":"603","5":"3280000","6":"AF","7":"Asia"},{"1":"Afghanistan","2":"1804","3":"28.2","4":"603","5":"3280000","6":"AF","7":"Asia"},{"1":"Afghanistan","2":"1805","3":"28.2","4":"603","5":"3280000","6":"AF","7":"Asia"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="visualize-data" class="level3" data-number="32.3.4"><h3 data-number="32.3.4" class="anchored" data-anchor-id="visualize-data">
<span class="header-section-number">32.3.4</span> Visualize data</h3>
<ul>
<li>Now that the data is merged, we can recreate the visual for a particular year.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">income</span>,</span>
<span>                 y <span class="op">=</span> <span class="va">life_exp</span>,</span>
<span>                 size <span class="op">=</span> <span class="va">population</span> <span class="op">/</span> <span class="fl">1000000</span>,</span>
<span>                 color <span class="op">=</span> <span class="va">region</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Hans Rosling Gapminder Visualization"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Income per person ($)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Life expectancy (years)"</span>,</span>
<span>       size <span class="op">=</span> <span class="st">"Population size (millions)"</span>,</span>
<span>       color <span class="op">=</span> <span class="st">"Region"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="notes-r-reshaping-and-combining-data_files/figure-html/visualize-data-demo-1.png" class="img-fluid figure-img" data-fig-pos="hold" width="672"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="application" class="level2" data-number="32.4"><h2 data-number="32.4" class="anchored" data-anchor-id="application">
<span class="header-section-number">32.4</span> Application</h2>
<section id="setup" class="level3" data-number="32.4.1"><h3 data-number="32.4.1" class="anchored" data-anchor-id="setup">
<span class="header-section-number">32.4.1</span> Setup</h3>
<ul>
<li>Load the halloween candy data (<a href="https://www.dataplusscience.com/HalloweenData.html">source</a>), which contains yearly data on the number of candies given to trick-or-treaters in Cincinnati, OH dating back to 2008 and the weather data from some of those dates.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># load candy and weather data with prespecified attributes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"tutorials/reshaping-and-combining-data/www/data-halloween.RData"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_candy</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Date"],"name":[1],"type":["date"],"align":["right"]},{"label":["Day_of_week"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Time"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Count"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"2008-10-31","2":"Friday","3":"6:00pm","4":"0"},{"1":"2008-10-31","2":"Friday","3":"6:30pm","4":"75"},{"1":"2008-10-31","2":"Friday","3":"7:00pm","4":"117"},{"1":"2008-10-31","2":"Friday","3":"7:30pm","4":"147"},{"1":"2008-10-31","2":"Friday","3":"8:00pm","4":"144"},{"1":"2008-10-31","2":"Friday","3":"8:15pm","4":"9"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_weather</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Date"],"name":[1],"type":["date"],"align":["right"]},{"label":["TMAX"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["TMIN"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["PRCP"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"2008-10-31","2":"60.08","3":"28.94","4":"0.00"},{"1":"2009-10-31","2":"80.06","3":"46.94","4":"0.73"},{"1":"2010-10-31","2":"64.04","3":"37.94","4":"0.00"},{"1":"2011-10-31","2":"57.92","3":"30.92","4":"0.00"},{"1":"2012-10-31","2":"39.92","3":"35.06","4":"0.30"},{"1":"2013-10-31","2":"62.96","3":"53.06","4":"0.03"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<ul>
<li>Note that the candy data is already in long format because the information is repeated for each time interval.</li>
</ul></section><section id="sec-application-ex" class="level3" data-number="32.4.2"><h3 data-number="32.4.2" class="anchored" data-anchor-id="sec-application-ex">
<span class="header-section-number">32.4.2</span> Part a)</h3>
<ul>
<li>If we want to recreate the following scatterplot which visualizes maximum temperatures and total candy count, we need to have the data in wide format so that there is a separate column for the <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> variable.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="notes-r-reshaping-and-combining-data_files/figure-html/application-preview-1.png" class="img-fluid figure-img" data-fig-pos="hold" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>Note that typically wide data is better for this type of plot and for reporting because it is easier to process than long data, but long data is preferred when we are doing any grouping in our plots such as multiple lines or facets.</p></li>
<li><p>Using the code chunk below, do the following:</p></li>
</ul>
<ol type="1">
<li><p>Convert the <code>data_candy</code> to wide format and name the resulting object <code>data_halloween_wide</code>.</p></li>
<li><p>Add the following lines of code after the pivot, which will add the candy amounts from each time interval across the rows to get a total count for the entire night:</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>data_candy_wide <span class="ot">&lt;-</span> <span class="er">&lt;</span> code to pivot wide <span class="sc">&gt;</span> <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  rowwise <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total =</span> <span class="fu">sum</span>(<span class="fu">c_across</span>(<span class="st">`</span><span class="at">6:00pm</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">8:15pm</span><span class="st">`</span>))) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Explanation of code:</em></p>
<p><em>- To sum across rows, data needs to be grouped by rows with <code><a href="https://dplyr.tidyverse.org/reference/rowwise.html">dplyr::rowwise()</a></code>.</em></p>
<p><em>- Then we can <code>mutate(c_across())</code> the columns we want (<code><a href="https://dplyr.tidyverse.org/reference/c_across.html">c_across()</a></code> pairs with <code><a href="https://dplyr.tidyverse.org/reference/rowwise.html">rowwise()</a></code> to perform row-wise aggregations).</em></p>
<ol start="3" type="1">
<li><p>Pipe another statement to join the weather data to the updated <code>data_halloween_wide</code>. Be sure to pick the correct type of join so that we keep all of the candy data (there is not weather data for every year).</p></li>
<li><p>Create the scatterplot of interest and try to add all of the extra features to make it a polished plot.</p></li>
</ol></section><section id="sec-application2-ex" class="level3" data-number="32.4.3"><h3 data-number="32.4.3" class="anchored" data-anchor-id="sec-application2-ex">
<span class="header-section-number">32.4.3</span> Part b)</h3>
<ul>
<li>Using the code chunk below, perform the necessary data steps and recreate the following plot that visualizes the candy count by time interval across years. Try to add all of the extra features to make it a polished plot. <em>HINT: To format the color of the lines, add <code><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_brewer()</a></code> to your ggplot function call for the color palette used above.</em>
</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="notes-r-reshaping-and-combining-data_files/figure-html/application2-preview-1.png" class="img-fluid figure-img" data-fig-pos="hold" width="672"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="application-solutions" class="level2" data-number="32.5"><h2 data-number="32.5" class="anchored" data-anchor-id="application-solutions">
<span class="header-section-number">32.5</span> Application solutions</h2>
<p><a href="#sec-application-ex" class="quarto-xref">Application&nbsp;<span>32.4.2</span></a></p>
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># pivot to wide data, then calculate total candy count, and join with weather data</span></span>
<span><span class="va">data_halloween_wide</span> <span class="op">&lt;-</span> <span class="va">data_candy</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">Time</span>,</span>
<span>              values_from <span class="op">=</span> <span class="va">Count</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="va">rowwise</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/c_across.html">c_across</a></span><span class="op">(</span><span class="va">`6:00pm`</span><span class="op">:</span><span class="va">`8:15pm`</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">data_weather</span>, by <span class="op">=</span> <span class="st">"Date"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create scatterplot of max temp and total candy count</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data_halloween_wide</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">TMAX</span>,</span>
<span>           y <span class="op">=</span> <span class="va">total</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">Date</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            vjust <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Halloween candy count"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Max temp on Halloween (F)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Total candy count"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="notes-r-reshaping-and-combining-data_files/figure-html/application-solution-1.png" class="img-fluid figure-img" data-fig-pos="hold" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#sec-application2-ex" class="quarto-xref">Application&nbsp;<span>32.4.3</span></a></p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># convert halloween data to long so can group by time interval for lines</span></span>
<span><span class="va">data_halloween_long</span> <span class="op">&lt;-</span> <span class="va">data_halloween_wide</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">`6:00pm`</span><span class="op">:</span><span class="va">total</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create polished line plot</span></span>
<span><span class="va">data_halloween_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Date</span>,</span>
<span>                y <span class="op">=</span> <span class="va">Count</span>,</span>
<span>                group <span class="op">=</span> <span class="va">Time</span>,</span>
<span>                color <span class="op">=</span> <span class="va">Time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_brewer</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Halloween candy count over the years"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Candy count"</span>,</span>
<span>       color <span class="op">=</span> <span class="st">"30-min time interval"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="notes-r-reshaping-and-combining-data_files/figure-html/application2-solution-1.png" class="img-fluid figure-img" data-fig-pos="hold" width="672"></p>
</figure>
</div>
</div>
</div>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./hw-r-data-transformations.html" class="pagination-link  aria-label=" data="" transformations="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">HW - Data Transformations</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./lab-r-data-cleaning.html" class="pagination-link" aria-label="<span class='chapter-number'>33</span>&nbsp; <span class='chapter-title'>Lab - Data Cleaning</span>">
        <span class="nav-page-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Lab - Data Cleaning</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>